<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create a shadow test - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="shadow-tests-create" /><meta name="default_state" content="shadow-tests-create" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="shadow-tests-create.html" /><meta name="description" content="Create a Amazon SageMaker shadow test to compare operational metrics on your variants." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="shadow-tests-create.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/shadow-tests-create.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/shadow-tests-create.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/shadow-tests-create.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/shadow-tests-create.html" hreflang="de" /><link rel="alternative" href="shadow-tests-create.html" hreflang="en-us" /><link rel="alternative" href="shadow-tests-create.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/shadow-tests-create.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/shadow-tests-create.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/shadow-tests-create.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/shadow-tests-create.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/shadow-tests-create.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/shadow-tests-create.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/shadow-tests-create.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/shadow-tests-create.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/shadow-tests-create.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/shadow-tests-create.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/shadow-tests-create.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/shadow-tests-create.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/shadow-tests-create.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/shadow-tests-create.html" hreflang="zh-tw" /><link rel="alternative" href="shadow-tests-create.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Create a shadow test" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Create a shadow test - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#shadow-tests-create" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/shadow-tests-create.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/shadow-tests-create.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/shadow-tests-create.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,inference,deploy model,endpoint,prediction,ML application,serverless machine learning,multi model deployment,inference pipelines,ML model" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Deploy models for inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deploy-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Shadow tests",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/shadow-tests.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Create a shadow test",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/shadow-tests.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#shadow-tests-create" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="shadow-tests-create.html#shadow-tests-create-prerequisites">Prerequisites</a><a href="shadow-tests-create.html#shadow-tests-create-console-shadow-test-details">Enter shadow test details</a><a href="shadow-tests-create.html#shadow-tests-create-console-shadow-test-settings">
                Enter shadow test settings
            </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="shadow-tests-create">Create a shadow test</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>
        You can create a shadow test to compare the performance of a shadow variant against a production variant. You
        can run the test on an existing endpoint that is serving inference requests or you can create a new endpoint on
        which to run the test.
    </p><p>
        To create a shadow test you need to specify the following:
    </p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p> 
                A <em>production variant</em> that receives and responds to 100 percent of
                the incoming inference requests.
            </p>
        </li><li class="listitem">
            <p>
                A <em>shadow variant</em> that receives a percentage of the incoming requests,
                replicated from the production variant, but does not return any responses.
            </p>
        </li></ul></div><p>
        For each variant, you can use SageMaker to control the model, instance type, and instance count. You can configure
        the percentage of incoming requests, known as the traffic sampling percentage, that you want replicated to your
        shadow variant. SageMaker manages the replication of requests to your shadow variant and you can modify the traffic
        sampling percentage when your test is scheduled or running. You can also optionally turn on Data Capture to log
        requests and responses of your production and shadow variants.
    </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
            SageMaker supports a maximum of one shadow variant per endpoint. For an endpoint with a shadow variant,
            there can be a maximum of one production variant.
        </p></div></div><p>
        You can schedule the test to start at any time and continue for a specified duration. The default duration is 7
        days and the maximum is 30 days. After the test is complete, the endpoint reverts to the state it was in prior
        to starting the test. This ensures that you do not have to manually clean up resources upon the completion of
        the test.
    </p><p>
        You can monitor a test that is running through a dashboard in the SageMaker console. The dashboard provides a side by
        side comparison of invocation metrics and instance metrics between the production and shadow variants, along
        with a tabular view with relevant metric statistics. This dashboard is also available for completed tests. Once
        you have reviewed the metrics, you can either choose to promote the shadow variant to be the new production
        variant or retain the existing production variant. Once you promote the shadow variant, it responds to all
        incoming requests. For more information, see <a href="shadow-tests-complete.html#shadow-tests-complete-promote">Promote a shadow variant</a>.
    </p><p>
        The following procedure describes how to create a shadow test through the SageMaker console. There are variations in
        the workflow depending on whether you want to use an existing endpoint or to create a new endpoint for the
        shadow test.
    </p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="shadow-tests-create.html#shadow-tests-create-prerequisites">Prerequisites</a></li><li><a href="shadow-tests-create.html#shadow-tests-create-console-shadow-test-details">Enter shadow test details</a></li><li><a href="shadow-tests-create.html#shadow-tests-create-console-shadow-test-settings">
                Enter shadow test settings
            </a></li></ul></div>
        <h2 id="shadow-tests-create-prerequisites">Prerequisites</h2>
        <p>
            Before creating a shadow test with the SageMaker console, you must have a SageMaker model ready to use. For more
            information about how to create a SageMaker model, see <a href="realtime-endpoints-deployment.html#realtime-endpoints-deployment-create-model">Create a Model</a>.
        </p>
        <p>
            You can get started with shadow tests with an existing endpoint with a production variant and a shadow
            variant, an existing endpoint with only a production variant, or just the SageMaker models you'd like to
            compare. Shadow tests support creating an endpoint and adding variants before your test begins.
        </p>
     
        <h2 id="shadow-tests-create-console-shadow-test-details">Enter shadow test details</h2>
        <p>
            To start creating your shadow test, fill out the <b>Enter shadow test details</b> page by
            doing the following:
        </p>
        <div class="procedure"><ol><li>
                <p>
                    Open the <a href="https://console.aws.amazon.com/sagemaker/" rel="noopener noreferrer" target="_blank"><span>SageMaker console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                </p>
            </li><li>
                <p>
                    In the left navigation panel, choose <b>Inference</b>, and then choose
                    <b>Shadow tests</b>.
                </p>
            </li><li>
                <p>
                    Choose <b>Create shadow test</b>.
                </p>
            </li><li>
                <p>
                    Under <b>Name</b>, enter a name for the test.
                </p>
            </li><li>
                <p>
                    (Optional) Under <b>Description</b>, enter a description for the test.
                </p>
            </li><li>
                <p>
                    (Optional) Specify <b>Tags</b> using <b>Key</b> and
                    <b>Value</b> pairs.
                </p>
            </li><li>
                <p>
                    Choose <b>Next</b>.
                </p>
            </li></ol></div>
     
        <h2 id="shadow-tests-create-console-shadow-test-settings">
                Enter shadow test settings
            </h2>
        <p>
            After filling out the <b>Enter shadow test details</b> page, fill out the <b>Enter
            shadow test settings</b> page. If you already have a SageMaker Inference endpoint and a production
            variant, follow the <b>Use an existing endpoint</b> workflow. If you don't already have an
            endpoint, follow the <b>Create a new endpoint</b> workflow.
        </p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Use an existing endpoint</dt><dd tab-id="use-an-existing-endpoint">
                    <p>
                        If you want to use an existing endpoint for your test, fill out the <b>Enter shadow test
                        settings</b> page by doing the following:
                    </p>
                    <div class="procedure"><ol><li>
                            <p>
                                Choose a role that has the <code class="code">AmazonSageMakerFullAccess</code> IAM policy attached.
                            </p>
                        </li><li>
                            <p>
                                Choose <b>Use an existing endpoint</b>, and then choose one of the
                                available endpoints.
                            </p>
                        </li><li>
                            <p>
                                (Optional) To encrypt the storage volume on your endpoint, either choose an existing
                                KMS key or choose <b>Enter a KMS key ARN</b> from the dropdown list
                                under <b>Encryption key</b>. If you choose the second option, a field to
                                enter the KMS key ARN appears. Enter the KMS key ARN in that field.
                            </p>
                        </li><li>
                            <p>
                                If you have multiple production variants behind that endpoint, remove the ones you don't
                                want to use for the test. You can remove a model variant by selecting it and then
                                choosing <b>Remove</b>.
                            </p>
                        </li><li>
                            <p>
                                If you do not already have a shadow variant, add a shadow variant. To add a shadow
                                variant, do the following:
                            </p>
                            <ol><li>
                                    <p>
                                        Choose <b>Add</b>.
                                    </p>
                                </li><li>
                                    <p>
                                        Choose <b>Shadow variant</b>.
                                    </p>
                                </li><li>
                                    <p>
                                        In the <b>Add model</b> dialog box, choose the model you want
                                        to use for your shadow variant.
                                    </p>
                                </li><li>
                                    <p>
                                        Choose <b>Save</b>.
                                    </p>
                                </li></ol>
                        </li><li>
                            <p>
                                (Optional) In the preceding step, the shadow variant is added with the default
                                settings. To modify these settings, select the shadow variant and choose
                                <b>Edit</b>. The <b>Edit shadow variant</b> dialog box
                                appears. For more information on filling out this dialog box, see <a href="shadow-tests-view-monitor-edit.html#shadow-tests-view-monitor-edit-individual">Edit a shadow test</a>.
                            </p>
                        </li><li>
                            <p>
                                In the <b>Schedule</b> section, enter the duration of the test by doing
                                the following:
                            </p>
                            <ol><li>
                                    <p>
                                        Choose the box under <b>Duration</b>. A popup calender appears.
                                    </p>
                                </li><li>
                                    <p>
                                        Select the start and end dates from the calender, or enter the start and end
                                        dates in the fields for <b>Start date</b> and <b>End
                                        date</b>, respectively.
                                    </p>
                                </li><li>
                                    <p>
                                        (Optional) For the fields <b>Start time</b> and <b>End
                                        time</b>, enter the start and end times, respectively, in the 24 hour
                                        format.
                                    </p>
                                </li><li>
                                    <p>
                                        Choose <b>Apply</b>.
                                    </p>
                                </li></ol>
                            <p>
                                The minimum duration is 1 hour, and the maximum duration is 30 days.
                            </p>
                        </li><li>
                            <p>
                                (Optional) Turn on <b>Enable data capture</b> to save inference
                                request and response information from your endpoint to an Amazon S3 bucket, and then enter the
                                location of the Amazon S3 bucket.
                            </p>
                        </li><li>
                            <p>
                                Choose <b>Create shadow test</b>.
                            </p>
                        </li></ol></div>
                </dd>
            <dt>Create a new endpoint</dt><dd tab-id="create-a-new-endpoint">
                    <p>
                        If you don't have an existing endpoint, or you want to create a new endpoint for your test, fill
                        out the <b>Enter shadow test settings</b> page by doing the following:
                    </p>
                    <div class="procedure"><ol><li>
                            <p>
                                Choose a role that has the <code class="code">AmazonSageMakerFullAccess</code> IAM policy attached.
                            </p>
                        </li><li>
                            <p>
                                Choose <b>Create a new endpoint</b>.
                            </p>
                        </li><li>
                            <p>
                                Under <b>Name</b>, enter a name for the endpoint.
                            </p>
                        </li><li>
                            <p>
                                Add one production variant and one shadow variant to the endpoint:
                            </p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>
                                        To add a production variant choose <b>Add</b>, and then choose
                                        <b>Production variant</b>. In the <b>Add model</b>
                                        dialog box, choose the model you want to use for your production variant, and
                                        then choose <b>Save</b>.
                                    </p>
                                </li><li class="listitem">
                                    <p>
                                        To add a shadow variant choose <b>Add</b>, and then choose
                                        <b>Shadow variant</b>. In the <b>Add model</b>
                                        dialog box, choose the model you want to use for your shadow variant, and then
                                        choose <b>Save</b>.
                                    </p>
                                </li></ul></div>
                        </li><li>
                            <p>
                                (Optional) In the preceding step, the shadow variant is added with the default
                                settings. To modify these settings, select the shadow variant and choose
                                <b>Edit</b>. The <b>Edit shadow variant</b> dialog box
                                appears. For more information on filling out this dialog box, see <a href="shadow-tests-view-monitor-edit.html#shadow-tests-view-monitor-edit-individual">Edit a shadow test</a>.
                            </p>
                        </li><li>
                            <p>
                                In the <b>Schedule</b> section, enter the duration of the test by doing
                                the following:
                            </p>
                            <ol><li>
                                    <p>
                                        Choose the box under <b>Duration</b>. A popup calender appears.
                                    </p>
                                </li><li>
                                    <p>
                                        Select the start and end dates from the calender, or enter the start and end
                                        dates under <b>Start date</b> and <b>End date</b>,
                                        respectively.
                                    </p>
                                </li><li>
                                    <p>
                                        (Optional) Under <b>Start time</b> and <b>End
                                        time</b>, enter the start and end times, respectively, in the 24 hour
                                        format.
                                    </p>
                                </li><li>
                                    <p>
                                        Choose <b>Apply</b>.
                                    </p>
                                </li></ol>
                            <p>
                                The minimum duration is 1 hour, and the maximum duration is 30 days.
                            </p>
                        </li><li>
                            <p>
                                (Optional) Turn on <b>Enable data capture</b> to save inference request
                                and response information from your endpoint to an Amazon S3 bucket, and then enter the
                                location of the Amazon S3 bucket.
                            </p>
                        </li><li>
                            <p>
                                Choose <b>Create shadow test</b>.
                            </p>
                        </li></ol></div>
                </dd>
        </dl></awsdocs-tabs>
        <p>
            After completing the preceding procedures, you should now have a test scheduled to begin at your specified
            start date and time. You can view the progress of the test from a dashboard. For more information about
            viewing your test and the actions you can take, see <a href="shadow-tests-view-monitor-edit.html">View, monitor, and edit shadow tests</a>.
        </p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./shadow-tests.html">Shadow tests</div><div id="next" class="next-link" accesskey="n" href="./shadow-tests-view-monitor-edit.html">View, monitor, and edit shadow tests</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/shadow-tests-create.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/shadow-tests-create.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create a lifecycle configuration from the AWS CLI - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="studio-lcc-create-cli" /><meta name="default_state" content="studio-lcc-create-cli" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="studio-lcc-create-cli.html" /><meta name="description" content="Create a lifecycle configuration from the AWS CLI to automate customization for your Studio environment." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="studio-lcc-create-cli.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="de" /><link rel="alternative" href="studio-lcc-create-cli.html" hreflang="en-us" /><link rel="alternative" href="studio-lcc-create-cli.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/studio-lcc-create-cli.html" hreflang="zh-tw" /><link rel="alternative" href="studio-lcc-create-cli.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Create a lifecycle configuration from the AWS CLI" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Create a lifecycle configuration from the AWS CLI - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#studio-lcc-create-cli" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-lcc-create-cli.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-lcc-create-cli.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-lcc-create-cli.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Use machine learning environments offered by SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/machine-learning-environments.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon SageMaker Studio",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Customize Amazon SageMaker Studio",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-customize.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Use lifecycle configurations with Amazon SageMaker Studio",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-lcc.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Create and associate a lifecycle configuration",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-lcc-create.html"
      },
      {
        "@type" : "ListItem",
        "position" : 9,
        "name" : "Create a lifecycle configuration from the AWS CLI",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-lcc-create.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#studio-lcc-create-cli" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="studio-lcc-create-cli.html#studio-lcc-create-cli-prerequisites">Prerequisites</a><a href="studio-lcc-create-cli.html#studio-lcc-create-cli-step1">Step 1: Create a lifecycle
                configuration</a><a href="studio-lcc-create-cli.html#studio-lcc-create-cli-step2">Step 2: Attach the lifecycle configuration</a><a href="studio-lcc-create-cli.html#studio-lcc-create-cli-step3">Step 3: Launch application with lifecycle configuration</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="studio-lcc-create-cli">Create a lifecycle configuration from the
            AWS CLI</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The following topic shows how to create a lifecycle configuration using the AWS CLI to
        automate customization for your Studio environment.</p>
        <h2 id="studio-lcc-create-cli-prerequisites">Prerequisites</h2>
        <p>Before you begin, complete the following prerequisites: </p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Update the AWS CLI by following the steps in <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv1.html#install-tool-bundled">Installing the current AWS CLI Version</a>.</p>
            </li><li class="listitem">
                <p>From your local machine, run <code class="code">aws configure</code> and provide your AWS
                    credentials. For information about AWS credentials, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html">Understanding and getting your AWS credentials</a>. </p>
            </li><li class="listitem">
                <p>Onboard to SageMaker domain by following the steps in <a href="gs-studio-onboard.html">Onboard to Amazon SageMaker Domain</a>.</p>
            </li></ul></div>
     
        <h2 id="studio-lcc-create-cli-step1">Step 1: Create a lifecycle
                configuration</h2>
        <p>The following procedure shows how to create a lifecycle configuration script that
            prints <code class="code">Hello World</code>.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Each script can have up to <b>16,384
                characters</b>.</p></div></div>
        <div class="procedure"><ol><li>
                <p>From your local machine, create a file named <code class="code">my-script.sh</code> with
                    the following content.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">#!/bin/bash
set -eux
echo 'Hello World!'</code></pre>
            </li><li>
                <p>Convert your <code class="code">my-script.sh</code> file into base64 format. This
                    requirement prevents errors that occur from spacing and line break
                    encoding.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="zsh ">LCC_CONTENT=`openssl base64 -A -in my-script.sh`</code></pre>
            </li><li>
                <p>Create a lifecycle configuration for use with Studio. The following command creates
                    a lifecycle configuration that runs when you launch an associated
                        <code class="code">KernelGateway</code> application. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws sagemaker create-studio-lifecycle-config \
--region <code class="replaceable">region</code> \
--studio-lifecycle-config-name <code class="replaceable">my-studio-lcc</code> \
--studio-lifecycle-config-content $LCC_CONTENT \
--studio-lifecycle-config-app-type KernelGateway </code></pre>
                <p>Note the ARN of the newly created lifecycle configuration that is returned.
                    This ARN is required to attach the lifecycle configuration to your
                    application.</p>
            </li></ol></div>
     
        <h2 id="studio-lcc-create-cli-step2">Step 2: Attach the lifecycle configuration
                to your domain, user profile, or shared space</h2>
        <p>To attach the lifecycle configuration, you must update the <code class="code">UserSettings</code>
            for your domain or user profile, or the <code class="code">SpaceSettings</code> for a shared space.
            Lifecycle configuration scripts that are associated at the domain level are inherited by
            all users. However, scripts that are associated at the user profile level are scoped to
            a specific user, while scripts that are associated at the shared space level are scoped
            to the shared space. </p>
        <p>The following example shows how to create a new user profile with the lifecycle
            configuration attached. You can also create a new domain or space with a lifecycle
            configuration attached by using the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/opensearch/create-domain.html" rel="noopener noreferrer" target="_blank"><span>create-domain</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/sagemaker/create-space.html" rel="noopener noreferrer" target="_blank"><span>create-space</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> commands, respectively.</p>
        <p>Add the lifecycle configuration ARN from the previous step to the settings for the
            appropriate app type. For example, place it in the <code class="code">JupyterServerAppSettings</code>
            of the user. You can add multiple lifecycle configurations at the same time by passing a
            list of lifecycle configurations. When a user launches a JupyterServer application with
            the AWS CLI, they can pass a lifecycle configuration to use instead of the default. The
            lifecycle configuration that the user passes must belong to the list of lifecycle
            configurations in <code class="code">JupyterServerAppSettings</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"># Create a new UserProfile
aws sagemaker create-user-profile --domain-id <code class="replaceable">domain-id</code> \
--user-profile-name <code class="replaceable">user-profile-name</code> \
--region <code class="replaceable">region</code> \
--user-settings '<span>{</span>
"JupyterServerAppSettings": <span>{</span>
  "LifecycleConfigArns":
    [<code class="replaceable">lifecycle-configuration-arn-list</code>]
  }
}'</code></pre>
        <p>The following example shows how to update an existing shared space to attach the
            lifecycle configuration. You can also update an existing domain or user profile with a
            lifecycle configuration attached by using the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/sagemaker/update-domain.html" rel="noopener noreferrer" target="_blank"><span>update-domain</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> or <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/sagemaker/update-user-profile.html" rel="noopener noreferrer" target="_blank"><span>update-user-profile</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command. When you update the list of lifecycle
            configurations attached, you must pass all lifecycle configurations as part of the list.
            If a lifecycle configuration is not part of this list, it will not be attached to the
            application.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws sagemaker update-space --domain-id <code class="replaceable">domain-id</code> \
--space-name <code class="replaceable">space-name</code> \
--region <code class="replaceable">region</code> \
--space-settings '<span>{</span>
"JupyterServerAppSettings": <span>{</span>
  "LifecycleConfigArns":
    [<code class="replaceable">lifecycle-configuration-arn-list</code>]
  }
}'</code></pre>
        <p>For information about setting a default lifecycle configuration for a resource, see
                <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/studio-lcc-defaults.html">Set default lifecycle configurations</a>.</p>
     
        <h2 id="studio-lcc-create-cli-step3">Step 3: Launch application with lifecycle
                configuration</h2>
        <p>After you attach a lifecycle configuration to a domain, user profile, or space, the
            user can select it when launching an application with the AWS CLI. This section describes
            how to launch an application with an attached lifecycle configuration. For information
            about changing the default lifecycle configuration after launching a JupyterServer
            application, see <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/studio-lcc-defaults.html">Set default lifecycle configurations</a>.</p>
            <p>Launch the desired application type using the <code class="code">create-app</code> command and
            specify the lifecycle configuration ARN in the <code class="code">resource-spec</code> argument. </p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>The following example shows how to create a <code class="code">JupyterServer</code>
                    application with an associated lifecycle configuration. When creating the
                        <code class="code">JupyterServer</code>, the <code class="code">app-name</code> must be
                        <code class="code">default</code>. The lifecycle configuration ARN passed as part of the
                        <code class="code">resource-spec</code> parameter must be part of the list of lifecycle
                    configuration ARNs specified in <code class="code">UserSettings</code> for your domain or
                    user profile, or <code class="code">SpaceSettings</code> for a shared space.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws sagemaker create-app --domain-id <code class="replaceable">domain-id</code> \
--region <code class="replaceable">region</code> \
--user-profile-name <code class="replaceable">user-profile-name</code> \
--app-type JupyterServer \
--resource-spec LifecycleConfigArn=<code class="replaceable">lifecycle-configuration-arn</code> \
--app-name default</code></pre>
                </li><li class="listitem">
                    <p>The following example shows how to create a <code class="code">KernelGateway</code>
                    application with an associated lifecycle configuration.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws sagemaker create-app --domain-id <code class="replaceable">domain-id</code> \
--region <code class="replaceable">region</code> \
--user-profile-name <code class="replaceable">user-profile-name</code> \
--app-type KernelGateway \
--resource-spec LifecycleConfigArn=<code class="replaceable">lifecycle-configuration-arn</code>,SageMakerImageArn=<code class="replaceable">sagemaker-image-arn</code>,InstanceType=<code class="replaceable">instance-type</code> \
--app-name <code class="replaceable">app-name</code></code></pre>
                </li></ul></div>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./studio-lcc-create.html">Create and associate a lifecycle configuration</div><div id="next" class="next-link" accesskey="n" href="./studio-lcc-create-console.html">Create from the SageMaker Console</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-lcc-create-cli.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-lcc-create-cli.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
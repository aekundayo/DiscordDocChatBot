<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Visualize Amazon SageMaker Debugger Output Tensors in TensorBoard - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="debugger-enable-tensorboard-summaries" /><meta name="default_state" content="debugger-enable-tensorboard-summaries" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="debugger-enable-tensorboard-summaries.html" /><meta name="description" content="Use SageMaker Debugger to create output tensor files that are compatible with TensorBoard. Load the files to visualize in TensorBoard and analyze your SageMaker training jobs." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="debugger-enable-tensorboard-summaries.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="de" /><link rel="alternative" href="debugger-enable-tensorboard-summaries.html" hreflang="en-us" /><link rel="alternative" href="debugger-enable-tensorboard-summaries.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" hreflang="zh-tw" /><link rel="alternative" href="debugger-enable-tensorboard-summaries.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Visualize Amazon SageMaker Debugger Output Tensors in TensorBoard" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Visualize Amazon SageMaker Debugger Output Tensors in TensorBoard - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#debugger-enable-tensorboard-summaries" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Train machine learning models",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Debug and improve model performance",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-debug-and-improve-model-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Use Amazon SageMaker Debugger to debug and improve model performance",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-debugger.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Debug Training Jobs Using Amazon SageMaker Debugger",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/debugger-debug-training-jobs.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Visualize Amazon SageMaker Debugger Output Tensors in TensorBoard",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/debugger-debug-training-jobs.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#debugger-enable-tensorboard-summaries" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="debugger-enable-tensorboard-summaries">Visualize Amazon SageMaker Debugger Output Tensors in
            TensorBoard</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>This page is deprecated in favor of Amazon SageMaker with TensoBoard, which provides a
            comprehensive TensorBoard experience integrated with SageMaker Training and the access
            control functionalities of SageMaker Domain. To learn more, see <a href="tensorboard-on-sagemaker.html">Use TensorBoard to debug and analyze training
            jobs in Amazon SageMaker</a>.</p></div></div><p>Use SageMaker Debugger to create output tensor files that are compatible with TensorBoard. Load
        the files to visualize in TensorBoard and analyze your SageMaker training jobs. Debugger
        automatically generates output tensor files that are compatible with TensorBoard. For any
        hook configuration you customize for saving output tensors, Debugger has the flexibility to
        create scalar summaries, distributions, and histograms that you can import to TensorBoard. </p><div class="mediaobject">
         
            <img src="../../../images/sagemaker/latest/dg/images/debugger/debugger-tensorboard-concept.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            An architecture diagram of the Debugger output tensor saving mechanism.&#xA;        " style="max-width:100%" />
         
         
    </div><p>You can enable this by passing <code class="code">DebuggerHookConfig</code> and
            <code class="code">TensorBoardOutputConfig</code> objects to an <code class="code">estimator</code>.</p><p>The following procedure explains how to save scalars, weights, and biases as full tensors,
        histograms, and distributions that can be visualized with TensorBoard. Debugger saves them to
        the training container's local path (the default path is
        <code class="code">/opt/ml/output/tensors</code>) and syncs to the Amazon S3 locations passed through the
        Debugger output configuration objects.</p><div class="procedure"><h6>To save TensorBoard compatible output tensor files using Debugger</h6><ol><li>
            <p>Set up a <code class="code">tensorboard_output_config</code> configuration object to save
                TensorBoard output using the Debugger <code class="code">TensorBoardOutputConfig</code> class. For
                the <code class="code">s3_output_path</code> parameter, specify the default S3 bucket of the
                current SageMaker session or a preferred S3 bucket. This example does not add the
                    <code class="code">container_local_output_path</code> parameter; instead, it is set to the
                default local path <code class="code">/opt/ml/output/tensors</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="py ">import sagemaker
from sagemaker.debugger import TensorBoardOutputConfig

bucket = sagemaker.Session().default_bucket()
tensorboard_output_config = TensorBoardOutputConfig(
    s3_output_path='s3://<span>{</span>}'.format(bucket)
)</code></pre>
            <p>For additional information, see the Debugger <code class="code"><a href="https://sagemaker.readthedocs.io/en/stable/api/training/debugger.html#sagemaker.debugger.TensorBoardOutputConfig" rel="noopener noreferrer" target="_blank"><span>TensorBoardOutputConfig</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></code> API in the
                <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
        </li><li>
            <p>Configure the Debugger hook and customize the hook parameter values. For example,
                the following code configures a Debugger hook to save all scalar outputs every 100
                steps in training phases and 10 steps in validation phases, the <code class="code">weights</code>
                parameters every 500 steps (the default <code class="code">save_interval</code> value for saving
                tensor collections is 500), and the <code class="code">bias</code> parameters every 10 global
                steps until the global step reaches 500.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="py ">from sagemaker.debugger import CollectionConfig, DebuggerHookConfig

hook_config = DebuggerHookConfig(
    hook_parameters=<span>{</span>
        "train.save_interval": "100",
        "eval.save_interval": "10"
    },
    collection_configs=[
        CollectionConfig("weights"),
        CollectionConfig(
            name="biases",
            parameters=<span>{</span>
                "save_interval": "10",
                "end_step": "500",
                "save_histogram": "True"
            }
        ),
    ]
)</code></pre>
            <p>For more information about the Debugger configuration APIs, see the Debugger
                        <code class="code"><a href="https://sagemaker.readthedocs.io/en/stable/api/training/debugger.html#sagemaker.debugger.CollectionConfig" rel="noopener noreferrer" target="_blank"><span>CollectionConfig</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></code> and <code class="code"><a href="https://sagemaker.readthedocs.io/en/stable/api/training/debugger.html#sagemaker.debugger.DebuggerHookConfig" rel="noopener noreferrer" target="_blank"><span>DebuggerHookConfig</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></code> APIs in the <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
        </li><li>
            <p>Construct a SageMaker estimator with the Debugger parameters passing the configuration
                objects. The following example template shows how to create a generic SageMaker
                estimator. You can replace <code class="code">estimator</code> and <code class="code">Estimator</code> with
                other SageMaker frameworks' estimator parent classes and estimator classes. Available
                SageMaker framework estimators for this functionality are <code class="code"><a href="https://sagemaker.readthedocs.io/en/stable/frameworks/tensorflow/using_tf.html#create-an-estimator" rel="noopener noreferrer" target="_blank"><span>TensorFlow</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></code>, <code class="code"><a href="https://sagemaker.readthedocs.io/en/stable/frameworks/pytorch/using_pytorch.html#create-an-estimator" rel="noopener noreferrer" target="_blank"><span>PyTorch</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></code>, and <code class="code"><a href="https://sagemaker.readthedocs.io/en/stable/frameworks/mxnet/using_mxnet.html#create-an-estimator" rel="noopener noreferrer" target="_blank"><span>MXNet</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="py ">from sagemaker.<code class="userinput">estimator</code> import <code class="userinput">Estimator</code>

estimator = <code class="userinput">Estimator</code>(
    ...
    # Debugger parameters
    debugger_hook_config=hook_config,
    tensorboard_output_config=tensorboard_output_config
)
estimator.fit()</code></pre>
            <p>The <code class="code">estimator.fit()</code> method starts a training job, and Debugger writes
                the output tensor files in real time to the Debugger S3 output path and to the
                TensorBoard S3 output path. To retrieve the output paths, use the following
                estimator methods:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>For the Debugger S3 output path, use
                            <code class="code">estimator.latest_job_debugger_artifacts_path()</code>.</p>
                </li><li class="listitem">
                    <p>For the TensorBoard S3 output path, use
                            <code class="code">estimator.latest_job_tensorboard_artifacts_path()</code>.</p>
                </li></ul></div>
        </li><li>
            <p>After the training has completed, check the names of saved output tensors:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="py ">from smdebug.trials import create_trial
trial = create_trial(estimator.latest_job_debugger_artifacts_path())
trial.tensor_names()</code></pre>
        </li><li>
            <p>Check the TensorBoard output data in Amazon S3:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="py ">tensorboard_output_path=estimator.latest_job_tensorboard_artifacts_path()
print(tensorboard_output_path)
!aws s3 ls <span>{</span>tensorboard_output_path}/</code></pre>
        </li><li>
            <p>Download the TensorBoard output data to your notebook instance. For example, the
                following AWS CLI command downloads the TensorBoard files to <code class="code">/logs/fit</code>
                under the current working directory of your notebook instance.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="py ">!aws s3 cp --recursive <span>{</span>tensorboard_output_path} <code class="replaceable">./logs/fit</code></code></pre>
        </li><li>
            <p>Compress the file directory to a TAR file to download to your local
                machine.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">!tar -cf logs.tar logs</code></pre>
        </li><li>
            <p>Download and extract the Tensorboard TAR file to a directory on your device,
                launch a Jupyter notebook server, open a new notebook, and run the TensorBoard
                app.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">!tar -xf logs.tar
%load_ext tensorboard
%tensorboard --logdir logs/fit</code></pre>
        </li></ol></div><p>The following animated screenshot illustrates steps 5 through 8.
        It demonstrates how to download the Debugger TensorBoard TAR file and load the file in a
        Jupyter notebook on your local device.</p><div class="mediaobject">
         
            <img src="../../../images/sagemaker/latest/dg/images/debugger/debugger-tensorboard.gif" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            An animated screenshot showing how to download and load the Debugger TensorBoard&#xA;                file on your local machine.&#xA;        " style="max-width:100%" />
         
         
    </div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./debugger-cloudwatch-lambda.html">Create Actions on Rules Using Amazon CloudWatch and
                AWS Lambda</div><div id="next" class="next-link" accesskey="n" href="./debugger-built-in-rules.html">List of Built-in Rules</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/debugger-enable-tensorboard-summaries.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
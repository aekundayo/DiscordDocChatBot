<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cross-Account Lineage Tracking - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="xaccount-lineage-tracking" /><meta name="default_state" content="xaccount-lineage-tracking" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="xaccount-lineage-tracking.html" /><meta name="description" content="Accessing lineage entities from another account" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="xaccount-lineage-tracking.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="de" /><link rel="alternative" href="xaccount-lineage-tracking.html" hreflang="en-us" /><link rel="alternative" href="xaccount-lineage-tracking.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/xaccount-lineage-tracking.html" hreflang="zh-tw" /><link rel="alternative" href="xaccount-lineage-tracking.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Cross-Account Lineage Tracking" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Cross-Account Lineage Tracking - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#xaccount-lineage-tracking" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/xaccount-lineage-tracking.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/xaccount-lineage-tracking.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/xaccount-lineage-tracking.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Implement MLOps",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/mlops.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon SageMaker ML Lineage Tracking",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/lineage-tracking.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Cross-Account Lineage Tracking",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/lineage-tracking.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#xaccount-lineage-tracking" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="xaccount-lineage-tracking.html#setup-xaccount-lineage-tracking">Set Up Cross-Account Lineage
          Tracking</a><a href="xaccount-lineage-tracking.html#tracking-lineage-xaccount">Tracking Lineage cross-account</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="xaccount-lineage-tracking">Cross-Account Lineage Tracking</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon SageMaker supports tracking lineage entities from a different AWS account. Other AWS accounts can 
      share their lineage entities with you and you can access these lineage entities through direct API calls or 
      SageMaker lineage queries.</p><p>SageMaker uses <a href="https://docs.aws.amazon.com/ram/latest/userguide/what-is.html">AWS Resource Access Manager</a> to help you securely share your lineage resources. You can
      share your resources through the <a href="https://console.aws.amazon.com/ram/home" rel="noopener noreferrer" target="_blank"><span>AWS RAM console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><p></p>
      <h2 id="setup-xaccount-lineage-tracking">Set Up Cross-Account Lineage
          Tracking</h2>
      <p>You can group and share your <a href="lineage-tracking-entities.html">Lineage Tracking Entities</a> through a 
        lineage group in Amazon SageMaker. SageMaker supports only one default lineage group per account. SageMaker creates the default lineage group 
        whenever a lineage entity is created in your account. Every lineage entity owned by your account is assigned to this default 
        lineage group. To share lineage entities with another account, you share this default lineage group with that account.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can share all lineage tracking entities in a lineage group or none.</p></div></div>
      <p>Create a resource share for your lineage entities using AWS Resource Access Manager console. For more information, see <a href="https://docs.aws.amazon.com/ram/latest/userguide/getting-started-sharing.html">Sharing your AWS resources</a> in the <em>AWS Resource Access Manager User Guide</em>.</p>      
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>After the resource share is created, it can take a few minutes for the resource and principal
          associations to complete. Once the association is set, the shared account receives an
          invitation to join the resource share. The shared account must accept the invite to gain
          access to shared resources. For more information on accepting a resource share invite in
          AWS RAM, see <a href="https://docs.aws.amazon.com/ram/latest/userguide/getting-started-shared.html">Using shared AWS resources
          </a> in the <em>AWS Resource Access Manager User Guide</em>.</p></div></div>
         
          <h3 id="setup-xaccount-lineage-tracking">Your
            cross-account lineage tracking resource policy</h3>          
          <p>Amazon SageMaker supports only one type of resource policy. The SageMaker resource policy must allow all of the following
          operations:</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"sagemaker:DescribeAction"
"sagemaker:DescribeArtifact"
"sagemaker:DescribeContext"
"sagemaker:DescribeTrialComponent"
"sagemaker:AddAssociation"
"sagemaker:DeleteAssociation"
"sagemaker:QueryLineage"            
          </code></pre>
          <div class="example"><h6>Example The following is a SageMaker resource policy created using AWS Resource Access Manager for creating a resource share for an accounts lineage group.</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "FullLineageAccess",
      "Effect": "Allow",
      "Principal": <span>{</span>
        "AWS": "<code class="replaceable">123456789012</code>" #account-id
      },
      "Action": [
        "sagemaker:DescribeAction",
        "sagemaker:DescribeArtifact",
        "sagemaker:DescribeContext",
        "sagemaker:DescribeTrialComponent",
        "sagemaker:AddAssociation",
        "sagemaker:DeleteAssociation",
        "sagemaker:QueryLineage"
      ],
      "Resource": "arn:aws:sagemaker:<code class="replaceable">us-west-2</code>:<code class="replaceable">111111111111</code>:lineage-group/sagemaker-default-lineage-group" #Sample lineage group resource 
    }
  ]
}</code></pre></div></div>          
               
     
      <h2 id="tracking-lineage-xaccount">Tracking Cross-Account Lineage  
          Entities</h2>
      <p>With cross-account lineage tracking you can associate
        lineage entities in different accounts using the same <code class="code">AddAssociation</code> API
        action. When you associate two lineage entities, SageMaker validates if you have permissions to
        perform the <code class="code">AddAssociation</code> API action on both lineage entities. SageMaker then
        establishes the association. If you don’t have the permissions, SageMaker <em>does
          not</em> create the association. Once the cross-account association is established,
        you can access either lineage entity from the other through the <code class="code">QueryLineage</code>
        API action. For more information, see <a href="querying-lineage-entities.html">Querying Lineage Entities</a>.</p>
      <p>In addition to SageMaker automatically creating lineage entities, if you have cross-account
        access, SageMaker connects artifacts that reference
        the same object or data. If the data from one account is used in lineage tracking by 
        different accounts, SageMaker creates an artifact in each account to track that data.
        With cross-account lineage, whenever SageMaker creates new artifacts, SageMaker checks if there 
        are other artifacts created for the same data that are also shared with you. SageMaker then 
        establishes associations between the newly created artifact and each of the artifacts 
        shared with you with the <code class="code">AssociationType</code> set to <code class="code">SameAs</code>. 
        You can then use the <code class="code"><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_QueryLineage.html">QueryLineage</a></code> API action to traverse the lineage entities 
        in your own account to lineage entities shared with you but owned by a different AWS 
        account. For more information, see <a href="querying-lineage-entities.html">Querying Lineage Entities</a></p>
      <div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="xaccount-lineage-tracking.html#tracking-lineage-xaccount-accessing-resources">Accessing lineage
            resources from a different accounts</a></li><li><a href="xaccount-lineage-tracking.html#tracking-lineage-xaccount-authorization">Authorization for querying
            cross-account lineage entities</a></li></ul></div>
       
        <h3 id="tracking-lineage-xaccount-accessing-resources">Accessing lineage
            resources from a different accounts</h3>
        <p>Once the cross-account access for sharing lineage has been set up, you can call the
          following SageMaker API actions directly with the ARN to describe the shared lineage entities
          from another account:</p>
        <div class="itemizedlist">         
           
           
           
           
        <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DescribeAction.html"><code class="code">DescribeAction</code></a></p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DescribeArtifact.html"><code class="code">DescribeArtifact</code></a></p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DescribeContext.html"><code class="code">DescribeContext</code></a></p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DescribeTrialComponent.html"><code class="code">DescribeTrialComponent</code></a></p></li></ul></div>
        <p>You can also manage <a href="lineage-tracking-entities.html">Associations
          </a>for lineage entities owned by different accounts that are shared with you, using the following SageMaker API actions:
        </p>
        <div class="itemizedlist">        
           
           
        <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_AddAssociation.html"><code class="code">AddAssociation</code></a></p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DeleteAssociation.html"><code class="code">DeleteAssociation</code></a></p></li></ul></div>
        <p>For a notebook that demonstrates how to use SageMaker Lineage APIs to query lineage across accounts., 
          see <a href="https://github.com/aws/amazon-sagemaker-examples/blob/master/sagemaker-lineage/sagemaker-lineage-cross-account-with-ram.ipynb" rel="noopener noreferrer" target="_blank"><span>sagemaker-lineage-cross-account-with-ram.ipynb</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
       
       
        <h3 id="tracking-lineage-xaccount-authorization">Authorization for querying
            cross-account lineage entities</h3>
        <p>Amazon SageMaker must validate that you have permissions to perform the
          <code class="code">QueryLineage</code> API action on the <code class="code">StartArns</code>. This is enforced through the
          resource policy attached to the <code class="code">LineageGroup</code>.  The result from this action includes all the lineage entities to which
          you have access, whether they are owned by your account or shared by another account. For
          more information, see <a href="querying-lineage-entities.html">Querying Lineage Entities</a>.</p>
       
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./querying-lineage-entities.html">Querying Lineage Entities</div><div id="next" class="next-link" accesskey="n" href="./model-registry.html">Catalog models with Model Registry</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/xaccount-lineage-tracking.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/xaccount-lineage-tracking.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
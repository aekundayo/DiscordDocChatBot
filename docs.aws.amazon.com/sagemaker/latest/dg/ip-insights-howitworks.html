<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>How IP Insights Works - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="ip-insights-howitworks" /><meta name="default_state" content="ip-insights-howitworks" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="ip-insights-howitworks.html" /><meta name="description" content="Amazon SageMaker IP Insights is an unsupervised algorithm that consumes observed data in the form of (entity, IPv4 address) pairs that associates entities with IP addresses. IP Insights determines how likely it is that an entity would use a particular IP address by learning latent vector representations for both entities and IP addresses. The distance between these two representations can then serve as the proxy for how likely this association is." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="ip-insights-howitworks.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="de" /><link rel="alternative" href="ip-insights-howitworks.html" hreflang="en-us" /><link rel="alternative" href="ip-insights-howitworks.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/ip-insights-howitworks.html" hreflang="zh-tw" /><link rel="alternative" href="ip-insights-howitworks.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="How IP Insights Works" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>How IP Insights Works - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#ip-insights-howitworks" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ip-insights-howitworks.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ip-insights-howitworks.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ip-insights-howitworks.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Train machine learning models",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Choose an Algorithm",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/algorithms-choose.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Use Amazon SageMaker Built-in Algorithms or Pre-trained Models",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/algos.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Unsupervised Built-in SageMaker Algorithms",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/algorithms-unsupervised.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "IP Insights",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/ip-insights.html"
      },
      {
        "@type" : "ListItem",
        "position" : 9,
        "name" : "How IP Insights Works",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/ip-insights.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#ip-insights-howitworks" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="ip-insights-howitworks">How IP Insights Works</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon SageMaker IP Insights is an unsupervised algorithm that consumes observed data in the form
            of (entity, IPv4 address) pairs that associates entities with IP addresses. IP Insights
            determines how likely it is that an entity would use a particular IP address by learning
            latent vector representations for both entities and IP addresses. The distance between
            these two representations can then serve as the proxy for how likely this association
            is.</p><p>The IP Insights algorithm uses a neural network to learn the latent vector
            representations for entities and IP addresses. Entities are first hashed to a large but
            fixed hash space and then encoded by a simple embedding layer. Character strings such as
            user names or account IDs can be fed directly into IP Insights as they appear in log
            files. You don't need to preprocess the data for entity identifiers. You can provide
            entities as an arbitrary string value during both training and inference. The hash size
            should be configured with a value that is high enough to ensure that the number of
                <em>collisions</em>, which occur when distinct entities are mapped to
            the same latent vector, remain insignificant. For more information about how to select
            appropriate hash sizes, see <a href="https://alex.smola.org/papers/2009/Weinbergeretal09.pdf" rel="noopener noreferrer" target="_blank"><span>Feature Hashing for
                Large Scale Multitask Learning</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. For representing IP addresses, on the other
            hand, IP Insights uses a specially designed encoder network to uniquely represent each
            possible IPv4 address by exploiting the prefix structure of IP addresses.</p><p>During training, IP Insights automatically generates negative samples by randomly
            pairing entities and IP addresses. These negative samples represent data that is less
            likely to occur in reality. The model is trained to discriminate between positive
            samples that are observed in the training data and these generated negative samples.
            More specifically, the model is trained to minimize the <em>cross
                entropy</em>, also known as the <em>log loss</em>, defined as
            follows: </p><div class="mediaobject">
             
                <img src="../../../images/sagemaker/latest/dg/images/ip-insight-image-cross-entropy.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                An image containing the equation for log loss.&#xA;            " style="max-width:45%" />
             
             
        </div><p>y<sub>n</sub> is the label that indicates whether the sample is from the
            real distribution governing observed data (y<sub>n</sub>=1) or from the
            distribution generating negative samples (y<sub>n</sub>=0).
                p<sub>n</sub> is the probability that the sample is from the real
            distribution, as predicted by the model.</p><p>Generating negative samples is an important process that is used to achieve an
            accurate model of the observed data. If negative samples are extremely unlikely, for
            example, if all of the IP addresses in negative samples are 10.0.0.0, then the model
            trivially learns to distinguish negative samples and fails to accurately characterize
            the actual observed dataset. To keep negative samples more realistic, IP Insights
            generates negative samples both by randomly generating IP addresses and randomly picking
            IP addresses from training data. You can configure the type of negative sampling and the
            rates at which negative samples are generated with the
                <code class="code">random_negative_sampling_rate</code> and
                <code class="code">shuffled_negative_sampling_rate</code> hyperparameters.</p><p>Given an nth (entity, IP address pair), the IP Insights model outputs a
                <em>score</em>, S<sub>n</sub> , that indicates how
            compatible the entity is with the IP address. This score corresponds to the log odds
            ratio for a given (entity, IP address) of the pair coming from a real distribution as
            compared to coming from a negative distribution. It is defined as follows:</p><div class="mediaobject">
             
                <img src="../../../images/sagemaker/latest/dg/images/ip-insight-image-log-odds.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                An image containing the equation for the score, a log odds ratio.&#xA;            " style="max-width:20%" />
             
             
        </div><p>The score is essentially a measure of the similarity between the vector
            representations of the nth entity and IP address. It can be interpreted as how much more
            likely it would be to observe this event in reality than in a randomly generated
            dataset. During training, the algorithm uses this score to calculate an estimate of the
            probability of a sample coming from the real distribution, p<sub>n</sub>, to
            use in the cross entropy minimization, where:</p><div class="mediaobject">
             
                <img src="../../../images/sagemaker/latest/dg/images/ip-insight-image-sample-probability.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                An image showing the equation for probability that the sample is from a real&#xA;                    distribution.&#xA;            " style="max-width:15%" />
             
             
        </div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./ip-insights.html">IP Insights</div><div id="next" class="next-link" accesskey="n" href="./ip-insights-hyperparameters.html">Hyperparameters</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ip-insights-howitworks.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ip-insights-howitworks.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
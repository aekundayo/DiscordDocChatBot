<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Run Agent - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="edge-getting-started-step5" /><meta name="default_state" content="edge-getting-started-step5" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="edge-getting-started-step5.html" /><meta name="description" content="In this section you will run the agent as a binary using gRPC, and check that both your device and fleet are working and collecting sample data." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="edge-getting-started-step5.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="de" /><link rel="alternative" href="edge-getting-started-step5.html" hreflang="en-us" /><link rel="alternative" href="edge-getting-started-step5.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/edge-getting-started-step5.html" hreflang="zh-tw" /><link rel="alternative" href="edge-getting-started-step5.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Run Agent" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Run Agent - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#edge-getting-started-step5" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/edge-getting-started-step5.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/edge-getting-started-step5.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/edge-getting-started-step5.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,inference,deploy model,endpoint,prediction,ML application,serverless machine learning,multi model deployment,inference pipelines,ML model" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Deploy models for inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deploy-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Deploy models at the edge with SageMaker Edge Manager",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/edge.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Getting Started",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/edge-manager-getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Run Agent",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/edge-manager-getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#edge-getting-started-step5" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="edge-getting-started-step5">Run Agent</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>In this section you will run the agent as a binary using gRPC, and check that both
            your device and fleet are working and collecting sample data.</p><div class="procedure"><ol><li>
                <p><b>Launch the agent.</b></p>
                <p>The SageMaker Edge Manager agent can be run as a standalone process in the form of an
                    Executable and Linkable Format (ELF) executable binary or can be linked against
                    as a Dynamic Shared Object (.dll). Running as a standalone executable binary is
                    the preferred mode and is supported on Linux.</p>
                <p>This example uses gRPC to run the agent. gRPC is an open source
                    high-performance Remote Procedure Call (RPC) framework that can run in any
                    environment. For more information about gRPC, see the <a href="https://grpc.io/docs/" rel="noopener noreferrer" target="_blank"><span>gRPC documentation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                <p>To use gRPC, perform the following steps: </p>
                <ol><li>
                        <p>Define a service in a .proto file.</p>
                    </li><li>
                        <p>Generate server and client code using the protocol buffer
                            compiler.</p>
                    </li><li>
                        <p>Use the Python (or other languages supported by gRPC) gRPC API to
                            write the server for your service.</p>
                    </li><li>
                        <p>Use the Python (or other languages supported by gRPC) gRPC API to
                            write a client for your service. </p>
                    </li></ol>
                <p>The release artifact you downloaded contains a gRPC application ready for you
                    to run the agent. The example is located within the <code class="code">/bin</code> directory
                    of your release artifact. The <code class="code">sagemaker_edge_agent_binary</code> binary
                    executable is in this directory.</p>
                <p>To run the agent with this example, provide the path to your socket file
                    (.sock) and JSON .config file:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">./bin/sagemaker_edge_agent_binary -a /tmp/sagemaker_edge_agent_example.sock -c sagemaker_edge_config.json</code></pre>
            </li><li>
                <p><b>Check your device.</b></p>
                <p>Check that your device is connected and sampling data. Making periodic checks,
                    manually or automatically, allows you to check that your device or fleet is
                    working properly.</p>
                <p>Provide the name of the fleet to which the device belongs and the unique
                    device identifier. From your local machine, run the following:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">sagemaker_client.describe_device(
    DeviceName=device_name,
    DeviceFleetName=device_fleet_name
)</code></pre>
                <p>For the given model, you can see the name, model version, latest sample time,
                    and when the last inference was made.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python "><span>{</span> 
  "DeviceName": "sample-device",
  "DeviceFleetName": "demo-device-fleet",
  "IoTThingName": "sample-thing-name-1",
  "RegistrationTime": 1600977370,
  "LatestHeartbeat": 1600977370,
  "Models":[
    <span>{</span>
        "ModelName": "mobilenet_v2.tar.gz", 
        "ModelVersion": "1.1",
        "LatestSampleTime": 1600977370,
        "LatestInference": 1600977370 
    }
  ]
}</code></pre>
                <p>The timestamp provided by <code class="code">LastetHeartbeat</code> indicates the last
                    signal that was received from the device. <code class="code">LatestSampleTime</code> and
                        <code class="code">LatestInference</code> describe the time stamp of the last data sample
                    and inference, respectively.</p>
            </li><li>
                <p><b>Check your fleet.</b></p>
                <p>Check that your fleet is working with <code class="code">GetDeviceFleetReport</code>.
                    Provide the name of the fleet the device belongs to.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">sagemaker_client.get_device_fleet_report(
    DeviceFleetName=device_fleet_name
)</code></pre>
                <p>For a given model, you can see the name, model version, latest sample time,
                    and when the last inference was made, along with the Amazon S3 bucket URI where the
                    data samples are stored.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python "># Sample output
<span>{</span>
 "DeviceFleetName": "sample-device-fleet",
 "DeviceFleetArn": "arn:aws:sagemaker:us-west-2:9999999999:device-fleet/sample-fleet-name",
 "OutputConfig": <span>{</span>
              "S3OutputLocation": "s3://fleet-bucket/package_output",
  },
 "AgentVersions":[<span>{</span>"Version": "1.1", "AgentCount": 2}]}
 "DeviceStats": <span>{</span>"Connected": 2, "Registered": 2}, 
 "Models":[<span>{</span>
            "ModelName": "sample-model", 
            "ModelVersion": "1.1",
            "OfflineDeviceCount": 0,
            "ConnectedDeviceCount": 2,
            "ActiveDeviceCount": 2, 
            "SamplingDeviceCount": 100
            }]
}</code></pre>
            </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./edge-getting-started-step4.html">Download and Set Up Edge Manager</div><div id="next" class="next-link" accesskey="n" href="./edge-device-fleet.html">Set Up Devices and Fleets</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/edge-getting-started-step5.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/edge-getting-started-step5.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Automatically scale Provisioned Concurrency for a serverless endpoint - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="serverless-endpoints-autoscale" /><meta name="default_state" content="serverless-endpoints-autoscale" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="serverless-endpoints-autoscale.html" /><meta name="description" content="Learn how to autoscale the Provisioned Concurrency for a serverless endpoint based on either a target metric or a schedule." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="serverless-endpoints-autoscale.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="de" /><link rel="alternative" href="serverless-endpoints-autoscale.html" hreflang="en-us" /><link rel="alternative" href="serverless-endpoints-autoscale.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/serverless-endpoints-autoscale.html" hreflang="zh-tw" /><link rel="alternative" href="serverless-endpoints-autoscale.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Automatically scale Provisioned Concurrency for a serverless endpoint" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Automatically scale Provisioned Concurrency for a serverless endpoint - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#serverless-endpoints-autoscale" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/serverless-endpoints-autoscale.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/serverless-endpoints-autoscale.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/serverless-endpoints-autoscale.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,inference,deploy model,endpoint,prediction,ML application,serverless machine learning,multi model deployment,inference pipelines,ML model,serverless,autoscale,provisioned concurrency,serverless endpoint" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Deploy models for inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deploy-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Serverless Inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/serverless-endpoints.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Automatically scale Provisioned Concurrency for a serverless endpoint",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/serverless-endpoints.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#serverless-endpoints-autoscale" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-register">Register a model</a><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-define">Define a scaling policy</a><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-apply">Apply a scaling policy</a><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-delete">Delete a scaling policy</a><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-deregister">Deregister a model</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="serverless-endpoints-autoscale">Automatically scale Provisioned Concurrency for a serverless endpoint</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>
        Amazon SageMaker automatically scales in or out on-demand serverless endpoints. For serverless
        endpoints with Provisioned Concurrency you can use Application Auto Scaling to scale up or down the
        Provisioned Concurrency based on your traffic profile, thus optimizing costs.
    </p><p>
        The following are the prerequisites to autoscale Provisioned Concurrency on serverless
        endpoints:
    </p><div class="itemizedlist">
         
         
         
    <ul class="itemizedlist"><li class="listitem"><p><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-register">Register a model</a></p></li><li class="listitem"><p><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-define">Define a scaling policy</a></p></li><li class="listitem"><p><a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-apply">Apply a scaling policy</a></p></li></ul></div><p>
        Before you can use autoscaling, you must have already deployed a model to a serverless
        endpoint with Provisioned Concurrency. Deployed models are referred to as <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_ProductionVariant.html">production
        variants</a>. See <a href="serverless-endpoints-create.html#serverless-endpoints-create-config">Create an endpoint configuration</a> and <a href="serverless-endpoints-create.html#serverless-endpoints-create-endpoint">Create an endpoint</a> for more information about deploying
        a model to a serverless endpoint with Provisioned Concurrency. To specify the metrics and
        target values for a scaling policy, you must configure a scaling policy. For more
        information on how to define a scaling policy, see <a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-define">Define a scaling policy</a>. After registering your model and
        defining a scaling policy, apply the scaling policy to the registered model. For information
        on how to apply the scaling policy, see <a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-apply">Apply a scaling policy</a>.
    </p><p>
        For details on other prerequisites and components used with autoscaling, see the <a href="endpoint-auto-scaling-prerequisites.html">Prerequisites</a> section in the <a href="endpoint-auto-scaling.html">SageMaker autoscaling documentation</a>.
    </p>
        <h2 id="serverless-endpoints-autoscale-register">Register a model</h2>
        <p>
            To add autoscaling to a serverless endpoint with Provisioned Concurrency, you first must
            register your model (production variant) using AWS CLI or Application Auto Scaling API.
        </p>
        
         
            <h3 id="serverless-endpoints-autoscale-register-cli">Register a model (AWS CLI)</h3>
            <p>
                To register your model, use the <code class="code">register-scalable-target</code> AWS CLI command
                with the following parameters:
            </p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>
                        <code class="code">--service-namespace</code> – Set this value to
                        <code class="code">sagemaker</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--resource-id</code> – The resource identifier for the model
                        (specifically the production variant). For this parameter, the resource type
                        is <code class="code">endpoint</code> and the unique identifier is the name of the
                        production variant. For example
                        <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--scalable-dimension</code> – Set this value to
                        <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--min-capacity</code> – The minimum number of Provisioned
                        Concurrency for the model. Set <code class="code">--min-capacity</code> to at least 1. It
                        must be equal to or less than the value specified for
                        <code class="code">--max-capacity</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--max-capacity</code> – The maximum number of Provisioned
                        Concurrency that should be enabled through Application Auto Scaling. Set
                        <code class="code">--max-capacity</code> to a minimum of 1. It must be greater than or
                        equal to the value specified for <code class="code">--min-capacity</code>.
                    </p>
                </li></ul></div>
            <p>
                The following example shows how to register a model named <code class="code">MyVariant</code>
                that is dynamically scaled to have 1 to 10 Provisioned Concurrency value:
            </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws application-autoscaling register-scalable-target \
    --service-namespace sagemaker \
    --scalable-dimension sagemaker:variant:DesiredProvisionedConcurrency \
    --resource-id endpoint/MyEndpoint/variant/MyVariant \
    --min-capacity 1 \
    --max-capacity 10
            </code></pre>
         
        
         
            <h3 id="serverless-endpoints-autoscale-register-api">Register a model (Application Auto Scaling API)</h3>
            <p>
                To register your model, use the <code class="code">RegisterScalableTarget</code> Application Auto Scaling API
                action with the following parameters:
            </p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>
                        <code class="code">ServiceNamespace</code> – Set this value to
                        <code class="code">sagemaker</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">ResourceId</code> – The resource identifier for the model
                        (specifically the production variant). For this parameter, the resource type
                        is <code class="code">endpoint</code> and the unique identifier is the name of the
                        production variant. For example
                        <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">ScalableDimension</code> – Set this value to
                        <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">MinCapacity</code> – The minimum number of Provisioned
                        Concurrency for the model. Set <code class="code">MinCapacity</code> to at least 1. It
                        must be equal to or less than the value specified for
                        <code class="code">MaxCapacity</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">MaxCapacity</code> – The maximum number of Provisioned
                        Concurrency that should be enabled through Application Auto Scaling. Set
                        <code class="code">MaxCapacity</code> to a minimum of 1. It must be greater than or
                        equal to the value specified for <code class="code">MinCapacity</code>.
                    </p>
                </li></ul></div>
            <p>
                The following example shows how to register a model named <code class="code">MyVariant</code>
                that is dynamically scaled to have 1 to 10 Provisioned Concurrency value:
            </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST / HTTP/1.1
Host: autoscaling.us-east-2.amazonaws.com
Accept-Encoding: identity
X-Amz-Target: AnyScaleFrontendService.RegisterScalableTarget
X-Amz-Date: 20160506T182145Z
User-Agent: aws-cli/1.10.23 Python/2.7.11 Darwin/15.4.0 botocore/1.4.8
Content-Type: application/x-amz-json-1.1
Authorization: AUTHPARAMS

<span>{</span>
    "ServiceNamespace": "sagemaker",
    "ResourceId": "endpoint/MyEndPoint/variant/MyVariant",
    "ScalableDimension": "sagemaker:variant:DesiredProvisionedConcurrency",
    "MinCapacity": 1,
    "MaxCapacity": 10
}
            </code></pre>
         
     
        <h2 id="serverless-endpoints-autoscale-define">Define a scaling policy</h2>
        <p>
            To specify the metrics and target values for a scaling policy, you can configure a
            target-tracking scaling policy. Define the scaling policy as a JSON block in a text
            file. You can then use that text file when invoking the AWS CLI or the Application Auto Scaling API. To
            quickly define a target-tracking scaling policy for a serverless endpoint, use the
            <code class="code">SageMakerVariantProvisionedConcurrencyUtilization</code> predefined metric.
        </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "TargetValue": 0.5,
    "PredefinedMetricSpecification": 
    <span>{</span>
        "PredefinedMetricType": "SageMakerVariantProvisionedConcurrencyUtilization"
    },
    "ScaleOutCooldown": 1,
    "ScaleInCooldown": 1
}
        </code></pre>
     
        <h2 id="serverless-endpoints-autoscale-apply">Apply a scaling policy</h2>
        <p>
            After registering your model, you can apply a scaling policy to your serverless endpoint
            with Provisioned Concurrency. See <a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-apply-target">Apply a target-tracking scaling policy</a> to apply a target-tracking
            scaling policy that you have defined. If the traffic flow to your serverless endpoint
            has a predictable routine then instead of applying a target-tracking scaling policy you
            might want to schedule scaling actions at specific times. For more information on
            scheduling scaling actions, see <a href="serverless-endpoints-autoscale.html#serverless-endpoints-autoscale-apply-scheduled">Scheduled scaling</a>.
        </p>
        
         
            <h3 id="serverless-endpoints-autoscale-apply-target">Apply a target-tracking scaling policy</h3>
            <p>
                You can use the AWS Management Console, AWS CLI or the Application Auto Scaling API to apply a target-tracking scaling policy
                to your serverless endpoint with Provisioned Concurrency.
            </p>
            
             
                <h4 id="serverless-endpoints-autoscale-apply-target-cli">Apply a target-tracking scaling policy (AWS CLI)</h4>
                <p>
                    To apply a scaling policy to your model, use the <code class="code">put-scaling-policy</code>
                    AWS CLI; command with the following parameters:
                </p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>
                            <code class="code">--policy-name</code> – The name of the scaling policy.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--policy-type</code> – Set this value to
                            <code class="code">TargetTrackingScaling</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--resource-id</code> – The resource identifier for the
                            variant. For this parameter, the resource type is <code class="code">endpoint</code>
                            and the unique identifier is the name of the variant. For example
                            <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--service-namespace</code> – Set this value to
                            <code class="code">sagemaker</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--scalable-dimension</code> – Set this value to
                            <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--target-tracking-scaling-policy-configuration</code> – The
                            target-tracking scaling policy configuration to use for the model.
                        </p>
                    </li></ul></div>
                <p>
                    The following example shows how to apply a target-tracking scaling policy named
                    <code class="code">MyScalingPolicy</code> to a model named <code class="code">MyVariant</code>. The policy
                    configuration is saved in a file named <code class="code">scaling-policy.json</code>.
                </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws application-autoscaling put-scaling-policy \
    --policy-name MyScalingPolicy \
    --policy-type TargetTrackingScaling \
    --service-namespace sagemaker \
    --scalable-dimension sagemaker:variant:DesiredProvisionedConcurrency \
    --resource-id endpoint/MyEndpoint/variant/MyVariant \
    --target-tracking-scaling-policy-configuration file://[file-localtion]/scaling-policy.json
                </code></pre>
             
            
             
                <h4 id="serverless-endpoints-autoscale-apply-target-api">Apply a target-tracking scaling policy (Application Auto Scaling API)</h4>
                <p>
                    To apply a scaling policy to your model, use the <code class="code">PutScalingPolicy</code>
                    Application Auto Scaling API action with the following parameters:
                </p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>
                            <code class="code">PolicyName</code> – The name of the scaling policy.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">PolicyType</code> – Set this value to
                            <code class="code">TargetTrackingScaling</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">ResourceId</code> – The resource identifier for the
                            variant. For this parameter, the resource type is <code class="code">endpoint</code>
                            and the unique identifier is the name of the variant. For example
                            <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">ServiceNamespace</code> – Set this value to
                            <code class="code">sagemaker</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">ScalableDimension</code> – Set this value to
                            <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">TargetTrackingScalingPolicyConfiguration</code> – The
                            target-tracking scaling policy configuration to use for the model.
                        </p>
                    </li></ul></div>
                <p>
                    The following example shows how to apply a target-tracking scaling policy named
                    <code class="code">MyScalingPolicy</code> to a model named <code class="code">MyVariant</code>. The policy
                    configuration is saved in a file named <code class="code">scaling-policy.json</code>.
                </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST / HTTP/1.1
Host: autoscaling.us-east-2.amazonaws.com
Accept-Encoding: identity
X-Amz-Target: AnyScaleFrontendService.PutScalingPolicy
X-Amz-Date: 20160506T182145Z
User-Agent: aws-cli/1.10.23 Python/2.7.11 Darwin/15.4.0 botocore/1.4.8
Content-Type: application/x-amz-json-1.1
Authorization: AUTHPARAMS

<span>{</span>
    "PolicyName": "MyScalingPolicy",
    "ServiceNamespace": "sagemaker",
    "ResourceId": "endpoint/MyEndpoint/variant/MyVariant",
    "ScalableDimension": "sagemaker:variant:DesiredProvisionedConcurrency",
    "PolicyType": "TargetTrackingScaling",
    "TargetTrackingScalingPolicyConfiguration": 
    <span>{</span>
        "TargetValue": 0.5,
        "PredefinedMetricSpecification": 
        <span>{</span>
            "PredefinedMetricType": "SageMakerVariantProvisionedConcurrencyUtilization"
        }
    }
}
                </code></pre>
             
            
             
                <h4 id="serverless-endpoints-autoscale-apply-target-console">Apply a target-tracking scaling policy (AWS Management Console)</h4>
                <p>
                    To apply a target-tracking scaling policy with the AWS Management Console:
                </p>
                <div class="procedure"><ol><li>
                        <p>
                            Sign in to the <a href="https://console.aws.amazon.com/sagemaker/" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker
                            console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. 
                        </p>
                    </li><li>
                        <p>
                            In the navigation panel, choose <b>Inference</b>.
                        </p>
                    </li><li>
                        <p>
                            Choose <b>Endpoints</b> to view a list of all of your endpoints.
                        </p>
                    </li><li>
                        <p>
                            Choose the endpoint to which you want to apply the scaling policy. A page with 
                            the settings of the endpoint will appear, with the models (production variant) 
                            listed under <b>Endpoint runtime settings section</b>.
                        </p>
                    </li><li>
                        <p>
                            Select the production variant to which you want to apply the scaling policy, 
                            and choose <b>Configure auto scaling</b>. The 
                            <b>Configure variant automatic scaling</b> dialog box appears.
                        </p>
                        <div class="mediaobject">
                             
                                <img src="../../../images/sagemaker/latest/dg/images/serverless-endpoints-variant-autoscaling.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Screenshot of the configure variant automatic scaling dialog box in the console.&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                    </li><li>
                        <p>
                            Enter the minimum and maximum Provisioned Concurrency values in the 
                            <b>Minimum provisioned concurrency</b> and 
                            <b>Maximum provisioned concurrency</b> fields, respectively, in 
                            the <b>Variant automatic scaling</b> section. Minimum Provisioned
                            Concurrency must be less than or equal to maximum Provisioned Concurrency. 
                        </p>
                    </li><li>
                        <p>
                            Enter the target value in the <b>Target value</b> field for the
                            target metric, <code class="code">SageMakerVariantProvisionedConcurrencyUtilization</code>.
                        </p>
                    </li><li>
                        <p>
                            (Optional) Enter scale in cool down and scale out cool down values (in seconds) 
                            in <b>Scale in cool down</b> and <b>Scale out cool down</b>
                            fields respectively.
                        </p>
                    </li><li>
                        <p>
                            (Optional) Select <b>Disable scale in</b> if you don’t want auto scaling
                            to delete instance when traffic decreases.
                        </p>
                    </li><li>
                        <p>
                            Select <b>Save</b>.
                        </p>
                    </li></ol></div>
             
         
         
            <h3 id="serverless-endpoints-autoscale-apply-scheduled">Scheduled scaling</h3>
            <p>
                If the traffic to your serverless endpoint with Provisioned Concurrency follows a
                routine pattern you might want to schedule scaling actions at specific times, to
                scale in or scale out Provisioned Concurrency. You can use the AWS CLI or the Application Auto Scaling
                to schedule scaling actions.
            </p>
            
             
                <h4 id="serverless-endpoints-autoscale-apply-scheduled-cli">Scheduled scaling (AWS CLI)</h4>
                <p>
                    To apply a scaling policy to your model, use the
                    <code class="code">put-scheduled-action</code> AWS CLI; command with the following parameters:
                </p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>
                            <code class="code">--schedule-action-name</code> – The name of the scaling
                            action.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--schedule</code> – A cron expression that specifies the
                            start and end times of the scaling action with a recurring schedule.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--resource-id</code> – The resource identifier for the
                            variant. For this parameter, the resource type is <code class="code">endpoint</code>
                            and the unique identifier is the name of the variant. For example
                            <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--service-namespace</code> – Set this value to
                            <code class="code">sagemaker</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--scalable-dimension</code> – Set this value to
                            <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">--scalable-target-action</code> – The target of the scaling
                            action.
                        </p>
                    </li></ul></div>
                <p>
                    The following example shows how to add a scaling action named
                    <code class="code">MyScalingAction</code> to a model named <code class="code">MyVariant</code> on a
                    recurring schedule. On the specified schedule (every day at 12:15 PM UTC), if
                    the current Provisioned Concurrency is below the value specified for
                    <code class="code">MinCapacity</code>. Application Auto Scaling scales out the Provisioned Concurrency to the
                    value specified by <code class="code">MinCapacity</code>.
                </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws application-autoscaling put-scheduled-action \
    --scheduled-action-name 'MyScalingAction' \
    --schedule 'cron(15 12 * * ? *)' \
    --service-namespace sagemaker \
    --resource-id endpoint/MyEndpoint/variant/MyVariant \
    --scalable-dimension sagemaker:variant:DesiredProvisionedConcurrency \
    --scalable-target-action 'MinCapacity=10'
                </code></pre>
             
            
             
                <h4 id="serverless-endpoints-autoscale-apply-scheduled-api">Scheduled scaling (Application Auto Scaling API)</h4>
                <p>
                    To apply a scaling policy to your model, use the <code class="code">PutScheduledAction</code>
                    Application Auto Scaling API action with the following parameters:
                </p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>
                            <code class="code">ScheduleActionName</code> – The name of the scaling action.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">Schedule</code> – A cron expression that specifies the
                            start and end times of the scaling action with a recurring schedule.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">ResourceId</code> – The resource identifier for the
                            variant. For this parameter, the resource type is <code class="code">endpoint</code>
                            and the unique identifier is the name of the variant. For example
                            <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">ServiceNamespace</code> – Set this value to
                            <code class="code">sagemaker</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">ScalableDimension</code> – Set this value to
                            <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                        </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">ScalableTargetAction</code> – The target of the scaling
                            action.
                        </p>
                    </li></ul></div>
                <p>
                    The following example shows how to add a scaling action named
                    <code class="code">MyScalingAction</code> to a model named <code class="code">MyVariant</code> on a
                    recurring schedule. On the specified schedule (every day at 12:15 PM UTC), if
                    the current Provisioned Concurrency is below the value specified for
                    <code class="code">MinCapacity</code>. Application Auto Scaling scales out the Provisioned Concurrency to the
                    value specified by <code class="code">MinCapacity</code>.
                </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST / HTTP/1.1
Host: autoscaling.us-east-2.amazonaws.com
Accept-Encoding: identity
X-Amz-Target: AnyScaleFrontendService.PutScheduledAction
X-Amz-Date: 20160506T182145Z
User-Agent: aws-cli/1.10.23 Python/2.7.11 Darwin/15.4.0 botocore/1.4.8
Content-Type: application/x-amz-json-1.1
Authorization: AUTHPARAMS

<span>{</span>
    "ScheduledActionName": "MyScalingAction",
    "Schedule": "cron(15 12 * * ? *)",
    "ServiceNamespace": "sagemaker",
    "ResourceId": "endpoint/MyEndpoint/variant/MyVariant",
    "ScalableDimension": "sagemaker:variant:DesiredProvisionedConcurrency",
    "ScalableTargetAction": "MinCapacity=10"
        }
    }
}
               </code></pre>
             
         
     
        <h2 id="serverless-endpoints-autoscale-delete">Delete a scaling policy</h2>
        <p>
            You can delete a scaling policy with the AWS Management Console, the AWS CLI, or the Application Auto Scaling API. For
            more information on deleting a scaling policy with the AWS Management Console, see <a href="endpoint-auto-scaling-delete.html">Delete a scaling policy</a> in
            the <a href="endpoint-auto-scaling.html">SageMaker autoscaling documentation</a>.
        </p>
        
         
            <h3 id="serverless-endpoints-autoscale-delete-cli">Delete a scaling policy (AWS CLI)</h3>
            <p>
                To apply a scaling policy to your model, use the <code class="code">delete-scaling-policy</code>
                AWS CLI; command with the following parameters:
            </p>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>
                        <code class="code">--policy-name</code> – The name of the scaling policy.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--resource-id</code> – The resource identifier for the
                        variant. For this parameter, the resource type is <code class="code">endpoint</code> and
                        the unique identifier is the name of the variant. For example
                        <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--service-namespace</code> – Set this value to
                        <code class="code">sagemaker</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--scalable-dimension</code> – Set this value to
                        <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                    </p>
                </li></ul></div>
            <p>
                The following example deletes scaling policy named <code class="code">MyScalingPolicy</code> from
                a model named <code class="code">MyVariant</code>.
            </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws application-autoscaling delete-scaling-policy \
    --policy-name MyScalingPolicy \
    --service-namespace sagemaker \
    --scalable-dimension sagemaker:variant:DesiredProvisionedConcurrency \
    --resource-id endpoint/MyEndpoint/variant/MyVariant
            </code></pre>
         
        
         
            <h3 id="serverless-endpoints-autoscale-delete-api">Delete a scaling policy (Application Auto Scaling API)</h3>
            <p>
                To delete a scaling policy to your model, use the <code class="code">DeleteScalingPolicy</code>
                Application Auto Scaling API action with the following parameters:
            </p>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>
                        <code class="code">PolicyName</code> – The name of the scaling policy.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">ResourceId</code> – The resource identifier for the
                        variant. For this parameter, the resource type is <code class="code">endpoint</code> and
                        the unique identifier is the name of the variant. For example
                        <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">ServiceNamespace</code> – Set this value to
                        <code class="code">sagemaker</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">ScalableDimension</code> – Set this value to
                        <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                    </p>
                </li></ul></div>
            <p>
                The following example uses the Application Auto Scaling API to delete a scaling policy named
                <code class="code">MyScalingPolicy</code> from a model named <code class="code">MyVariant</code>.
            </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST / HTTP/1.1
Host: autoscaling.us-east-2.amazonaws.com
Accept-Encoding: identity
X-Amz-Target: AnyScaleFrontendService.DeleteScalingPolicy
X-Amz-Date: 20160506T182145Z
User-Agent: aws-cli/1.10.23 Python/2.7.11 Darwin/15.4.0 botocore/1.4.8
Content-Type: application/x-amz-json-1.1
Authorization: AUTHPARAMS

<span>{</span>
    "PolicyName": "MyScalingPolicy",
    "ServiceNamespace": "sagemaker",
    "ResourceId": "endpoint/MyEndpoint/variant/MyVariant",
    "ScalableDimension": "sagemaker:variant:DesiredProvisionedConcurrency",
}
            </code></pre>
         
     
        <h2 id="serverless-endpoints-autoscale-deregister">Deregister a model</h2>
        <p>
            You can deregister a model with the AWS Management Console, the AWS CLI, or the Application Auto Scaling API.
        </p>
        
         
            <h3 id="serverless-endpoints-autoscale-delete-cli">Deregister a model (AWS CLI)</h3>
            <p>
                To deregister a model from Application Auto Scaling, use the <code class="code">deregister-scalable-target</code>
                AWS CLI; command with the following parameters:
            </p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>
                        <code class="code">--resource-id</code> – The resource identifier for the
                        variant. For this parameter, the resource type is <code class="code">endpoint</code> and
                        the unique identifier is the name of the variant. For example
                        <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--service-namespace</code> – Set this value to
                        <code class="code">sagemaker</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">--scalable-dimension</code> – Set this value to
                        <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                    </p>
                </li></ul></div>
            <p>
                The following example deregisters a model named <code class="code">MyVariant</code> from Application Auto Scaling.
            </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws application-autoscaling deregister-scalable-target \
    --service-namespace sagemaker \
    --scalable-dimension sagemaker:variant:DesiredProvisionedConcurrency \
    --resource-id endpoint/MyEndpoint/variant/MyVariant
            </code></pre>
         
        
         
            <h3 id="serverless-endpoints-autoscale-deregister-api">Deregister a model (Application Auto Scaling API)</h3>
            <p>
                To deregister a model from Application Auto Scaling use the <code class="code">DeregisterScalableTarget</code>
                Application Auto Scaling API action with the following parameters:
            </p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>
                        <code class="code">ResourceId</code> – The resource identifier for the
                        variant. For this parameter, the resource type is <code class="code">endpoint</code> and
                        the unique identifier is the name of the variant. For example
                        <code class="code">endpoint/MyEndpoint/variant/MyVariant</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">ServiceNamespace</code> – Set this value to
                        <code class="code">sagemaker</code>.
                    </p>
                </li><li class="listitem">
                    <p>
                        <code class="code">ScalableDimension</code> – Set this value to
                        <code class="code">sagemaker:variant:DesiredProvisionedConcurrency</code>.
                    </p>
                </li></ul></div>
            <p>
                The following example uses the Application Auto Scaling API to deregister a model named
                <code class="code">MyVariant</code> from Application Auto Scaling.
            </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST / HTTP/1.1
Host: autoscaling.us-east-2.amazonaws.com
Accept-Encoding: identity
X-Amz-Target: AnyScaleFrontendService.DeregisterScalableTarget
X-Amz-Date: 20160506T182145Z
User-Agent: aws-cli/1.10.23 Python/2.7.11 Darwin/15.4.0 botocore/1.4.8
Content-Type: application/x-amz-json-1.1
Authorization: AUTHPARAMS

<span>{</span>
    "ServiceNamespace": "sagemaker",
    "ResourceId": "endpoint/MyEndpoint/variant/MyVariant",
    "ScalableDimension": "sagemaker:variant:DesiredProvisionedConcurrency",
}
            </code></pre>
         
        
         
            <h3 id="serverless-endpoints-autoscale-deregister-console">Deregister a model (AWS Management Console)</h3>
            <p>
                To deregister a model (production variant) with the AWS Management Console:
            </p>
            <div class="procedure"><ol><li>
                    <p>
                        Open the <a href="https://console.aws.amazon.com/sagemaker/" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                    </p>
                </li><li>
                    <p>
                        In the navigational panel, choose <b>Inference</b>.
                    </p>
                </li><li>
                    <p>
                        Choose <b>Endpoints</b> to view a list of your endpoints.
                    </p>
                </li><li>
                    <p>
                        Choose the serverless endpoint hosting the production variant. A page 
                        with the settings of the endpoint will appear, with the production variants 
                        listed under <b>Endpoint runtime settings</b> section.
                    </p>
                </li><li>
                    <p>
                        Select the production variant that you want to deregister, and choose
                        <b>Configure auto scaling</b>. The <b>Configure variant automatic scaling</b>
                        dialog box appears. 
                    </p>
                </li><li>
                    <p>
                        Choose <b>Deregister auto scaling</b>.
                    </p>
                </li></ol></div>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./serverless-endpoints-monitoring.html">Monitor a serverless endpoint</div><div id="next" class="next-link" accesskey="n" href="./serverless-endpoints-troubleshooting.html">Troubleshooting</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/serverless-endpoints-autoscale.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/serverless-endpoints-autoscale.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
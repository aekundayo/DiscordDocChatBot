<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Provide Dataset Metadata to Training Jobs with an Augmented Manifest File - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="augmented-manifest" /><meta name="default_state" content="augmented-manifest" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="augmented-manifest.html" /><meta name="description" content="To include metadata with your dataset in a training job, use an augmented manifest file. When using an augmented manifest file, your dataset must be stored in Amazon Simple Storage Service (Amazon S3), and you must configure your training job to use the dataset stored there. You specify the location and format of this dataset for one or more" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="augmented-manifest.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/augmented-manifest.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/augmented-manifest.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/augmented-manifest.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/augmented-manifest.html" hreflang="de" /><link rel="alternative" href="augmented-manifest.html" hreflang="en-us" /><link rel="alternative" href="augmented-manifest.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/augmented-manifest.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/augmented-manifest.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/augmented-manifest.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/augmented-manifest.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/augmented-manifest.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/augmented-manifest.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/augmented-manifest.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/augmented-manifest.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/augmented-manifest.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/augmented-manifest.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/augmented-manifest.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/augmented-manifest.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/augmented-manifest.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/augmented-manifest.html" hreflang="zh-tw" /><link rel="alternative" href="augmented-manifest.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Provide Dataset Metadata to Training Jobs with an Augmented Manifest File" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Provide Dataset Metadata to Training Jobs with an Augmented Manifest File - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#augmented-manifest" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/augmented-manifest.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/augmented-manifest.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/augmented-manifest.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Train machine learning models",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Provide Dataset Metadata to Training Jobs with an Augmented Manifest File",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-model.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#augmented-manifest" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="augmented-manifest.html#augmented-manifest-format">Augmented Manifest File format</a><a href="augmented-manifest.html#augmented-manifest-stream">Stream Augmented Manifest File Data</a><a href="augmented-manifest.html#augmented-manifest-console">Use an Augmented Manifest File
                (Console)</a><a href="augmented-manifest.html#augmented-manifest-api">Use an Augmented Manifest File
                (API)</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="augmented-manifest">Provide Dataset Metadata to Training Jobs with an
            Augmented Manifest File</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To include metadata with your dataset in a training job, use an augmented manifest file.
        When using an augmented manifest file, your dataset must be stored in Amazon Simple Storage Service (Amazon S3), and
        you must configure your training job to use the dataset stored there. You specify the
        location and format of this dataset for one or more <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_Channel.html"><code class="code">Channel</code></a>. Augmented manifests can only support Pipe input mode. See
        the section, <b>InputMode</b> in <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_Channel.html"><code class="code">Channel</code></a> to learn more about pipe input mode. </p><p>When specifying a channel's parameters, you specify a path to the file, called a
            <code class="code">S3Uri</code>. Amazon SageMaker interprets this URI based on the specified
            <code class="code">S3DataType</code> in <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_S3DataSource.html"><code class="code">S3DataSource</code></a>. The <code class="code">AugmentedManifestFile</code> option defines
        a manifest format that includes metadata with the input data. Using an augmented manifest
        file is an alternative to preprocessing when you have labeled data. For training jobs using
        labeled data, you typically need to preprocess the dataset to combine input data with
        metadata before training. If your training dataset is large, preprocessing can be time
        consuming and expensive.</p>
        <h2 id="augmented-manifest-format">Augmented Manifest File Format</h2>
        <p>An augmented manifest file must be formatted in <a href="http://jsonlines.org/" rel="noopener noreferrer" target="_blank"><span>JSON Lines</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> format. In JSON Lines format, each line in the file is a
            complete JSON object followed by a newline separator.</p>
        <p>During training, SageMaker parses each JSON line and sends some or all of its attributes on
            to the training algorithm. You specify which attribute contents to pass and the order in
            which to pass them with the <code class="code">AttributeNames</code> parameter of the <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateTrainingJob.html"><code class="code">CreateTrainingJob</code></a> API. The <code class="code">AttributeNames</code>
            parameter is an ordered list of attribute names that SageMaker looks for in the JSON object
            to use as training input.</p>
        
        <p>For example, if you list <code class="code">["line", "book"]</code> for
            <code class="code">AttributeNames</code>, the input data must include the attribute names of
                <code class="code">line</code> and <code class="code">book</code> in the specified order. For this example,
            the following augmented manifest file content is valid:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python "><span>{</span>"author": "Herman Melville", "line": "Call me Ishmael", "book": "Moby Dick"}
<span>{</span>"line": "It was love at first sight.", "author": "Joseph Heller", "book": "Catch-22"}</code></pre>
        <p>SageMaker ignores unlisted attribute names even if they precede, follow, or are in between
            listed attributes.</p>
        <p>When using augmented manifest files, observe the following guidelines:</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>The order of the attributes listed in the <code class="code">AttributeNames</code>
                    parameter determines the order of the attributes passed to the algorithm in the
                    training job.</p>
            </li><li class="listitem">
                <p>The listed <code class="code">AttributeNames</code> can be a subset of all of the
                    attributes in the JSON line. SageMaker ignores unlisted attributes in the
                    file.</p>
            </li><li class="listitem">
                <p>You can specify any type of data allowed by the JSON format in
                        <code class="code">AttributeNames</code>, including text, numerical, data arrays, or
                    objects.</p>
            </li><li class="listitem">
                <p>To include an S3 URI as an attribute name, add the suffix <code class="code">-ref</code> to
                    it.</p>
            </li></ul></div>
        <p>If an attribute name contains the suffix <code class="code">-ref</code>, the attribute's value must
            be an S3 URI to a data file that is accessible to the training job. For example, if
                <code class="code">AttributeNames</code> contains <code class="code">["image-ref", "is-a-cat"]</code>, the
            following example shows a valid augmented manifest file:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python "><span>{</span>"image-ref": "s3://mybucket/sample01/image1.jpg", "is-a-cat": 1}
<span>{</span>"image-ref": "s3://mybucket/sample02/image2.jpg", "is-a-cat": 0}</code></pre>
        <p>In case of the first JSON line of this manifest file, SageMaker retrieves the
                <code class="code">image1.jpg</code> file from <code class="code">s3://mybucket/sample01/</code> and the
            string representation of the <code class="code">is-a-cat</code> attribute <code class="code">"1"</code> for image
            classification.</p>
        <div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Tip</h6></div><div class="awsdocs-note-text"><p>To create an augmented manifest file, use Amazon SageMaker Ground Truth and create a labeling job. For
                more information about the output from a labeling job, see <a href="sms-data-output.html">Output Data</a>.</p></div></div>
     
        <h2 id="augmented-manifest-stream">Stream Augmented Manifest File Data</h2>
        <p>Augmented manifest format enables you to do training in Pipe mode using files without
            needing to create RecordIO files. You need to specify both train and validation channels
            as values for the <code class="code">InputDataConfig</code> parameter of the <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateTrainingJob.html"><code class="code">CreateTrainingJob</code></a> request. Augmented manifest files are
            supported only for channels using Pipe input mode. For each channel, the data is
            extracted from its augmented manifest file and streamed (in order) to the algorithm
            through the channel's named pipe. Pipe mode uses the first in first out (FIFO) method,
            so records are processed in the order in which they are queued. For information about
            Pipe input mode, see <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_Channel.html#SageMaker-Type-Channel-InputMode"><code class="code">Input Mode</code></a>.</p>
        <p>Attribute names with a <code class="code">"-ref"</code> suffix point to preformatted binary data.
            In some cases, the algorithm knows how to parse the data. In other cases, you might need
            to wrap the data so that records are delimited for the algorithm. If the algorithm is
            compatible with <a href="https://mxnet.apache.org/api/architecture/note_data_loading#data-format" rel="noopener noreferrer" target="_blank"><span>RecordIO-formatted data</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, specifying <code class="code">RecordIO</code> for
                <code class="code">RecordWrapperType</code> solves this issue. If the algorithm is not compatible
            with <code class="code">RecordIO</code> format, specify <code class="code">None</code> for
                <code class="code">RecordWrapperType</code> and make sure that your data is parsed correctly for
            your algorithm.</p>
        <p>Using the <code class="code">["image-ref", "is-a-cat"]</code> example, if you use RecordIO
            wrapping, the following stream of data is sent to the queue:</p>
        <p><code class="code">recordio_formatted(s3://mybucket/foo/image1.jpg)recordio_formatted("1")recordio_formatted(s3://mybucket/bar/image2.jpg)recordio_formatted("0")</code></p>
        <p>Images that are not wrapped with RecordIO format, are streamed with the corresponding
                <code class="code">is-a-cat</code> attribute value as one record. This can cause a problem
            because the algorithm might not delimit the images and attributes correctly. For more
            information about using augmented manifest files for image classification, see <a href="image-classification.html#IC-augmented-manifest-training">Train with Augmented Manifest Image Format</a>.</p>
        <p>With augmented manifest files and Pipe mode in general, size limits of the EBS volume
            do not apply. This includes settings that otherwise must be within the EBS volume size
            limit such as <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_S3DataSource.html#SageMaker-Type-S3DataSource-S3DataDistributionType                 "><code class="code">S3DataDistributionType </code></a>. For more information about Pipe mode
            and how to use it, see <a href="your-algorithms-training-algo.html#your-algorithms-training-algo-running-container-inputdataconfig" rel="noopener noreferrer" target="_blank">Using Your Own Training Algorithms - Input Data
            Configuration</a>.</p>
        
     
        <h2 id="augmented-manifest-console">Use an Augmented Manifest File
                (Console)</h2>
        
        <p>To complete this procedure, you need:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>The URL of the S3 bucket where you've stored the augmented manifest
                    file.</p>
            </li><li class="listitem">
                <p>To store the data that is listed in the augmented manifest file in an S3
                    bucket.</p>
            </li><li class="listitem">
                <p>The URL of the S3 bucket where you want to store the output of the job.</p>
            </li></ul></div>
        <div class="procedure"><h6>To use an augmented manifest file in a training job (console)</h6><ol><li><p>Open the Amazon SageMaker console at <a href="https://console.aws.amazon.com/sagemaker/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/sagemaker/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                <p>In the navigation pane, choose <b>Training</b>, then choose
                        <b>Training jobs</b>. </p>
            </li><li>
                <p>Choose <b>Create training job</b>.</p>
            </li><li>
                <p>Provide a name for the training job. The name must be unique within an AWS
                    Region in an AWS account. It can have 1 to 63 characters. Valid characters:
                    a-z, A-Z, 0-9, and . : + = @ _ % - (hyphen).</p>
            </li><li>
                <p>Choose the algorithm that you want to use. For information about supported
                    built-in algorithms, see <a href="algos.html">Use Amazon SageMaker Built-in Algorithms or Pre-trained Models</a>. If you
                    want to use a custom algorithm, make sure that it is compatible with Pipe
                    mode.</p>
            </li><li>
                <p>(Optional) For <b>Resource configuration</b>, either accept the
                    default values or, to reduce computation time, increase the resource
                    consumption.</p>
                <ol><li>
                        <p>(Optional) For <b>Instance type</b>, choose the ML
                            compute instance type that you want to use. In most cases,
                                <b>ml.m4.xlarge</b> is sufficient. </p>
                    </li><li>
                        <p>For <b>Instance count</b>, use the default,
                                <code class="code">1</code>.</p>
                    </li><li>
                        <p>(Optional) For <b>Additional volume per instance
                                (GB)</b>, choose the size of the ML storage volume that you
                            want to provision. In most cases, you can use the default,
                                <code class="code">1</code>. If you are using a large dataset, use a larger
                            size.</p>
                    </li></ol>
            </li><li>
                <p>Provide information about the input data for the training dataset.</p>
                <ol><li>
                        <p>For <b>Channel name</b>, either accept the default
                                (<code class="userinput">train</code>) or enter a more meaningful name, such
                            as <code class="userinput">training-augmented-manifest-file</code>.</p>
                    </li><li>
                        <p>For <b>InputMode</b>, choose
                            <b>Pipe</b>.</p>
                    </li><li>
                        <p>For <b>S3 data distribution type</b>, choose
                                <b>FullyReplicated</b>. When training incrementally,
                            fully replicating causes each ML compute instance to use a complete copy
                            of the expanded dataset. For neural-based algorithms, such as <a href="ntm.html">Neural Topic Model (NTM) Algorithm</a>, choose
                                <code class="code">ShardedByS3Key</code>.</p>
                    </li><li>
                        <p>If the data specified in the augmented manifest file is uncompressed,
                            set the <b>Compression type</b> to
                                <b>None</b>. If the data is compressed using gzip, set
                            it to <b>Gzip</b>.</p>
                    </li><li>
                        <p>(Optional) For <b>Content type</b>, specify the
                            appropriate MIME type. Content type is the multipurpose internet mail
                            extension (MIME) type of the data.</p>
                    </li><li>
                        <p>For <b>Record wrapper</b>, if the dataset specified in
                            the augmented manifest file is saved in RecordIO format, choose
                                <b>RecordIO</b>. If your dataset is not saved as a
                            RecordIO-formatted file, choose <b>None</b>.</p>
                    </li><li>
                        <p>For <b>S3 data type</b>, choose
                                <b>AugmentedManifestFile</b>.</p>
                    </li><li>
                        <p>For <b>S3 location</b>, provide the path to the bucket
                            where you stored the augmented manifest file.</p>
                    </li><li>
                        <p>For <b>AugmentedManifestFile attribute names</b>,
                            specify the name of an attribute that you want to use. The attribute
                            name must be present within the augmented manifest file, and is
                            case-sensitive.</p>
                    </li><li>
                        <p>(Optional) To add more attribute names, choose <b>Add
                                row</b> and specify another attribute name for each
                            attribute.</p>
                    </li><li>
                        <p>(Optional) To adjust the order of attribute names, choose the up or
                            down buttons next to the names. When using an augmented manifest file,
                            the order of the specified attribute names is important.</p>
                    </li><li>
                        <p>Choose <b>Done</b>.</p>
                    </li></ol>
            </li><li>
                <p>For <b>Output data configuration</b>, provide the following
                    information:</p>
                <ol><li>
                        <p>For <b>S3 location</b>, type the path to the S3 bucket
                            where you want to store the output data.</p>
                    </li><li>
                        <p>(Optional) You can use your AWS Key Management Service (AWS KMS) encryption key to
                            encrypt the output data at rest. For <b>Encryption
                            key</b>, provide the key ID or its Amazon Resource Number (ARN).
                            For more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingKMSEncryption.html">KMS-Managed Encryption Keys</a>.</p>
                    </li></ol>
            </li><li>
                <p>(Optional) For <b>Tags</b>, add one or more tags to the training
                    job. A <em>tag</em> is metadata that you can define and assign to
                    AWS resources. In this case, you can use tags to help you manage your training
                    jobs. A tag consists of a key and a value, which you define. For example, you
                    might want to create a tag with <code class="userinput">Project</code> as a key and a
                    value that refers to a project that is related to the training job, such as
                        <code class="userinput">Home value forecasts</code>.</p>
            </li><li>
                <p>Choose <b>Create training job</b>. SageMaker creates and runs the
                    training job.</p>
            </li></ol></div>
        <p>After the training job has finished, SageMaker stores the model artifacts in the bucket
            whose path you provided for <b>S3 output path</b> in the <b>Output
                data configuration</b> field. To deploy the model to get predictions, see
                <a href="ex1-model-deployment.html">Step 5: Deploy the Model to Amazon EC2</a>.</p>
     
        <h2 id="augmented-manifest-api">Use an Augmented Manifest File
                (API)</h2>
        <p>The following shows how to train a model with an augmented manifest
            file
            using the SageMaker high-level Python library:</p>
        
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import sagemaker

# Create a model object set to using "Pipe" mode.
model = sagemaker.estimator.Estimator(
    <code class="replaceable">training_image</code>,
    role,
    instance_count=1,
    instance_type='ml.p3.2xlarge',
    volume_size = 50,
    max_run = 360000,
    input_mode = 'Pipe',
    output_path=<code class="replaceable">s3_output_location</code>,
    sagemaker_session=<code class="replaceable">session</code>
)

# Create a train data channel with S3_data_type as 'AugmentedManifestFile' and attribute names.
train_data = sagemaker.inputs.TrainingInput(
    <code class="replaceable">your_augmented_manifest_file</code>,
    distribution='FullyReplicated',
    content_type='application/x-recordio',
    s3_data_type='AugmentedManifestFile',
    attribute_names=[<code class="replaceable">'source-ref'</code>, <code class="replaceable">'annotations'</code>],
    input_mode='Pipe',
    record_wrapping='RecordIO'
)

data_channels = <span>{</span>'train': train_data}

# Train a model.
model.fit(inputs=data_channels, logs=True)</code></pre>
        <p>After the training job has finished, SageMaker stores the model artifacts in the bucket
            whose path you provided for <b>S3 output path</b> in the <b>Output
                data configuration</b> field. To deploy the model to get predictions, see
                <a href="ex1-model-deployment.html">Step 5: Deploy the Model to Amazon EC2</a>.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./model-train-storage.html">Use Training Storage Paths</div><div id="next" class="next-link" accesskey="n" href="./model-checkpoints.html">Use Checkpoints</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/augmented-manifest.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/augmented-manifest.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
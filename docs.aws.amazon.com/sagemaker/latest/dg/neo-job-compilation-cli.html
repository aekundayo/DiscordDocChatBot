<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Compile a Model (AWS Command Line Interface) - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="neo-job-compilation-cli" /><meta name="default_state" content="neo-job-compilation-cli" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="neo-job-compilation-cli.html" /><meta name="description" content="How to manage compilation jobs with the CLI." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="neo-job-compilation-cli.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="de" /><link rel="alternative" href="neo-job-compilation-cli.html" hreflang="en-us" /><link rel="alternative" href="neo-job-compilation-cli.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/neo-job-compilation-cli.html" hreflang="zh-tw" /><link rel="alternative" href="neo-job-compilation-cli.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Compile a Model (AWS Command Line Interface)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Compile a Model (AWS Command Line Interface) - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#neo-job-compilation-cli" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/neo-job-compilation-cli.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/neo-job-compilation-cli.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/neo-job-compilation-cli.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,inference,deploy model,endpoint,prediction,ML application,serverless machine learning,multi model deployment,inference pipelines,ML model" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Deploy models for inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deploy-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Optimize model performance using Neo",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/neo.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Use Neo to Compile a Model",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/neo-job-compilation.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Compile a Model (AWS Command Line Interface)",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/neo-job-compilation.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#neo-job-compilation-cli" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="neo-job-compilation-cli">Compile a Model (AWS Command Line Interface)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>This section shows how to manage Amazon SageMaker Neo compilation jobs for machine learning
            models using AWS Command Line Interface (CLI). You can create, describe, stop, and list the compilation
            jobs. </p><div class="procedure"><ol><li><p>Create a Compilation Job</p>
                <p>With the <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateCompilationJob.html">CreateCompilationJob</a> API operation, you can specify the data input
                    format, the S3 bucket in which to store your model, the S3 bucket to which to
                    write the compiled model, and the target hardware device or platform.</p>
                <p>The following table demonstrates how to configure <code class="code">CreateCompilationJob</code> 
                    API based on whether your target is a device or a platform.</p>
                <awsdocs-tabs><dl style="display: none">
                    <dt>Device Example</dt><dd tab-id="device-example">
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "CompilationJobName": "<code class="userinput">neo-compilation-job-demo</code>",
    "RoleArn": "<code class="userinput">arn:aws:iam::<code class="replaceable">&lt;your-account&gt;</code>:role/service-role/AmazonSageMaker-ExecutionRole-yyyymmddThhmmss</code>",
    "InputConfig": <span>{</span>
        "S3Uri": "<code class="userinput">s3://<code class="replaceable">&lt;your-bucket&gt;</code>/sagemaker/neo-compilation-job-demo-data/train</code>",
        "DataInputConfig":  "<code class="userinput"><span>{</span>'data': [1,3,1024,1024]}</code>",
        "Framework": "<code class="userinput">MXNET</code>"
    },
    "OutputConfig": <span>{</span>
        "S3OutputLocation": "<code class="userinput">s3://<code class="replaceable">&lt;your-bucket&gt;</code>/sagemaker/neo-compilation-job-demo-data/compile</code>",
        # A target device specification example for a ml_c5 instance family
        "TargetDevice": "<code class="userinput">ml_c5</code>"
    },
    "StoppingCondition": <span>{</span>
        "MaxRuntimeInSeconds": <code class="userinput">300</code>
    }
}</code></pre>
                            <p>You can optionally specify the framework version you used
                            with the <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_InputConfig.html#sagemaker-Type-InputConfig-FrameworkVersion"><code class="code">FrameworkVersion</code></a> field if you used the PyTorch framework to train 
                                your model and your target device is a <code class="code">ml_* </code>target.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "CompilationJobName": "neo-compilation-job-demo",
    "RoleArn": "arn:aws:iam::<code class="replaceable">&lt;your-account&gt;</code>:role/service-role/AmazonSageMaker-ExecutionRole-yyyymmddThhmmss",
    "InputConfig": <span>{</span>
        "S3Uri": "s3://<code class="replaceable">&lt;your-bucket&gt;</code>/sagemaker/neo-compilation-job-demo-data/train",
        "DataInputConfig":  "<span>{</span>'data': [1,3,1024,1024]}",
        "Framework": "PYTORCH",
        "FrameworkVersion": "1.6"
    },
    "OutputConfig": <span>{</span>
        "S3OutputLocation": "s3://<code class="replaceable">&lt;your-bucket&gt;</code>/sagemaker/neo-compilation-job-demo-data/compile",
        # A target device specification example for a ml_c5 instance family
        "TargetDevice": "ml_c5",
        # When compiling for ml_* instances using PyTorch framework, use the "CompilerOptions" field in 
        # OutputConfig to provide the correct data type ("dtype") of the modelâ€™s input. Default assumed is "float32"
        "CompilerOptions": "<span>{</span>'dtype': 'long'}"
    },
    "StoppingCondition": <span>{</span>
        "MaxRuntimeInSeconds": 300
    }
}</code></pre>
                            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Notes:</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>If you saved your model by using
                                            PyTorch version 2.0 or later, the
                                                <code class="code">DataInputConfig</code> field is optional. SageMaker
                                            Neo gets the input configuration from the model
                                            definition file that you create with PyTorch. For more
                                            information about how to create the definition file, see
                                            the <a href="neo-compilation-preparing-model.html#how-to-save-pytorch">PyTorch</a> section under
                                                <em>Saving Models for SageMaker
                                                Neo</em>.</p>
                                    </li><li class="listitem">
                                        <p>This API field is only supported for PyTorch.</p>
                                    </li></ul></div></div></div>
                        </dd>
                    <dt>Platform Example</dt><dd tab-id="platform-example">
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "CompilationJobName": "<code class="userinput">neo-test-compilation-job</code>",
    "RoleArn": "<code class="userinput">arn:aws:iam::<code class="replaceable">&lt;your-account&gt;:</code>role/service-role/AmazonSageMaker-ExecutionRole-yyyymmddThhmmss</code>",
    "InputConfig": <span>{</span>
        "S3Uri": "<code class="userinput">s3://<code class="replaceable">&lt;your-bucket&gt;</code>/sagemaker/neo-compilation-job-demo-data/train</code>",
        "DataInputConfig":  "<code class="userinput"><span>{</span>'data': [1,3,1024,1024]}</code>",
        "Framework": "<code class="userinput">MXNET</code>"
    },
    "OutputConfig": <span>{</span>
        "S3OutputLocation": "<code class="userinput">s3://<code class="replaceable">&lt;your-bucket&gt;</code>/sagemaker/neo-compilation-job-demo-data/compile</code>",
        # A target platform configuration example for a p3.2xlarge instance
        "TargetPlatform": <span>{</span>
            "Os": "<code class="userinput">LINUX</code>",
            "Arch": "<code class="userinput">X86_64</code>",
            "Accelerator": "<code class="userinput">NVIDIA</code>"
        },
        "CompilerOptions": "<span>{</span><code class="userinput">'cuda-ver': '10.0', 'trt-ver': '6.0.1', 'gpu-code': 'sm_70'</code>}"
    },
    "StoppingCondition": <span>{</span>
        "MaxRuntimeInSeconds": <code class="userinput">300</code>
    }
}</code></pre>
                        </dd>
                </dl></awsdocs-tabs>

                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For the <code class="code">OutputConfig</code> API operation, 
                    the <code class="code">TargetDevice</code> and <code class="code">TargetPlatform</code> API operations are
                    mutually exclusive. You have to choose one of the two options.</p></div></div>
                <p>To find the JSON string examples of <code class="code">DataInputConfig</code> depending on frameworks,
                    see <a href="neo-troubleshooting-compilation.html#neo-troubleshooting-errors-preventing">What input data shapes Neo expects</a>.</p>
                <p>For more information about setting up the configurations, see the <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_InputConfig.html">InputConfig</a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_OutputConfig.html">OutputConfig</a>, and <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_TargetPlatform.html">TargetPlatform</a> API operations in the SageMaker API
                    reference.</p></li><li><p>After you configure the JSON file, run the following command to create the compilation job:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws sagemaker create-compilation-job \
--cli-input-json file://job.json \
--region us-west-2 

# You should get CompilationJobArn</code></pre></li><li><p>Describe the compilation job by running the following command:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws sagemaker describe-compilation-job \
--compilation-job-name $JOB_NM \
--region us-west-2</code></pre></li><li><p>Stop the compilation job by running the following command:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws sagemaker stop-compilation-job \
--compilation-job-name $JOB_NM \
--region us-west-2

# There is no output for compilation-job operation</code></pre></li><li><p>List the compilation job by running the following command:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws sagemaker list-compilation-jobs \
--region us-west-2</code></pre></li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./neo-compilation-preparing-model.html">Prepare Model for Compilation</div><div id="next" class="next-link" accesskey="n" href="./neo-job-compilation-console.html">Compile Models: Console</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/neo-job-compilation-cli.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/neo-job-compilation-cli.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Use Amazon SageMaker geospatial capabilities in Your Amazon Virtual Private Cloud - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="geospatial-notebooks-and-internet-access-vpc-requirements" /><meta name="default_state" content="geospatial-notebooks-and-internet-access-vpc-requirements" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="geospatial-notebooks-and-internet-access-vpc-requirements.html" /><meta name="description" content="Use this page to get started using Amazon SageMaker geospatial capabilities in an Amazon Virtual Private Cloud." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="geospatial-notebooks-and-internet-access-vpc-requirements.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="de" /><link rel="alternative" href="geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="en-us" /><link rel="alternative" href="geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="zh-tw" /><link rel="alternative" href="geospatial-notebooks-and-internet-access-vpc-requirements.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Use Amazon SageMaker geospatial capabilities in Your Amazon Virtual Private Cloud" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Use Amazon SageMaker geospatial capabilities in Your Amazon Virtual Private Cloud - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#geospatial-notebooks-and-internet-access-vpc-requirements" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,Geospatial analysis,Location-based analysis,Geospatial models,Geospatial inference" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Use machine learning environments offered by SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/machine-learning-environments.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon SageMaker geospatial capabilities",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/geospatial.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "SageMaker geospatial Security and Permissions",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/geospatial-security-general.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Use Amazon SageMaker geospatial capabilities in Your Amazon Virtual Private Cloud",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/geospatial-security-general.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#geospatial-notebooks-and-internet-access-vpc-requirements" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="geospatial-notebooks-and-internet-access-vpc-requirements.html#studio-notebooks-and-internet-access-vpc">VPC only
                    communication with the internet</a><a href="geospatial-notebooks-and-internet-access-vpc-requirements.html#studio-notebooks-and-internet-access-vpc-requirements">Requirements to use VPC only mode</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="geospatial-notebooks-and-internet-access-vpc-requirements">Use Amazon SageMaker geospatial capabilities in Your Amazon Virtual Private Cloud</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The following topic gives information on how to use SageMaker notebooks with a SageMaker geospatial image in a Amazon SageMaker Domain with VPC only mode.
            For more information on VPCs in Amazon SageMaker Studio see <a href="onboard-vpc.html">Choose an Amazon VPC</a>.</p>
            <h2 id="studio-notebooks-and-internet-access-vpc"><code class="code">VPC only</code>
                    communication with the internet</h2>
            <p>By default, SageMaker Domain uses two Amazon VPC. One of the Amazon VPC is managed by Amazon SageMaker and provides direct
                internet access. You specify the other Amazon VPC, which provides encrypted traffic between
                the Domain and your Amazon Elastic File System (Amazon EFS) volume.</p>
            <p>You can change this behavior so that SageMaker sends all traffic over your specified Amazon VPC. If <code class="code">VPC only</code>
                has been choosen as the network access mode during the SageMaker Domain creation,
                the following requirements need to be considered to still allow usage of SageMaker Studio notebooks within
                the created SageMaker Domain.</p>
         
            <h2 id="studio-notebooks-and-internet-access-vpc-requirements">Requirements to use <code class="code">VPC only</code> mode</h2>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In order to use the visualization components of SageMaker geospatial capabilities,
                the browser you use to access the SageMaker Studio UI needs to be connected to the internet.</p></div></div>
            <p>When you choose <code class="code">VpcOnly</code>, follow these steps:</p>
            <div class="procedure"><ol><li>
                    <p>You must use private subnets only. You cannot use public subnets in <code class="code">VpcOnly</code> mode.</p>
                </li><li>
                    <p>Ensure your subnets have the required number of IP addresses needed.
                        The expected number of IP addresses needed per user can vary based on
                        use case. We recommend between 2 and 4 IP addresses per user. The total
                        IP address capacity for a Studio domain is the sum of available IP
                        addresses for each subnet provided when the domain is created. Ensure
                        that your estimated IP address usage does not exceed the capacity
                        supported by the number of subnets you provide. Additionally, using
                        subnets distributed across many availability zones can aid in IP address
                        availability. For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html#vpc-sizing-ipv4">VPC and
                            subnet sizing for IPv4</a>.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can configure only subnets with a default tenancy VPC in which
                            your instance runs on shared hardware. For more information on the
                            tenancy attribute for VPCs, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/dedicated-instance.html">Dedicated Instances</a>.</p></div></div>
                </li><li>
                    <p>Set up one or more security groups with inbound and outbound rules
                        that together allow the following traffic:</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p><a href="https://docs.aws.amazon.com/efs/latest/ug/network-access.html">NFS traffic over TCP
                                on port 2049</a> between the domain and the Amazon EFS
                                volume.</p>
                        </li><li class="listitem">
                            <p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-rules-reference.html#sg-rules-other-instances">TCP traffic within the security group</a>. This is
                                required for connectivity between the JupyterServer app and the
                                KernelGateway apps. You must allow access to at least ports in
                                the range <code class="code">8192-65535</code>.</p>
                        </li></ul></div>
                </li><li>
                    <p>If you want to allow internet access, you must use a <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html#nat-gateway-working-with">NAT gateway</a> with access to the internet, for example
                        through an <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Internet_Gateway.html">internet
                            gateway</a>.</p>
                </li><li>
                    <p>If you don't want to allow internet access, <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-interface.html">create interface
                        VPC endpoints</a> (AWS PrivateLink) to allow Studio to
                        access the following services with the corresponding service names. You
                        must also associate the security groups for your VPC with these
                        endpoints.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Currently, SageMaker geospatial capabilities are only supported in the US West (Oregon) Region.</p></div></div>
                    <div class="itemizedlist">
                         
                         
                         
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>SageMaker API :
                                <code class="code">com.amazonaws.us-west-2.sagemaker.api</code>
                            </p>
                        </li><li class="listitem">
                            <p>SageMaker runtime:
                                <code class="code">com.amazonaws.us-west-2.sagemaker.runtime</code>.
                                This is required to run Studio notebooks with a SageMaker geospatial image.</p>
                        </li><li class="listitem">
                            <p>Amazon S3:
                                <code class="code">com.amazonaws.us-west-2.s3</code>.</p>
                        </li><li class="listitem">
                            <p>To use SageMaker Projects:
                                <code class="code">com.amazonaws.us-west-2.servicecatalog</code>.</p>
                        </li><li class="listitem">
                            <p>SageMaker geospatial capabilities:
                                <code class="code">com.amazonaws.us-west-2.sagemaker-geospatial</code></p>
                        </li></ul></div>
                    <p> If you use the <a href="https://sagemaker.readthedocs.io/en/stable/" rel="noopener noreferrer" target="_blank"><span>SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to run remote training jobs, you must also create the following Amazon VPC endpoints.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>AWS Security Token Service:
                                <code class="code">com.amazonaws.<code class="replaceable">region</code>.sts</code></p>
                        </li><li class="listitem">
                            <p>Amazon CloudWatch:
                                <code class="code">com.amazonaws.<code class="replaceable">region</code>.logs</code>.
                                This is required to allow SageMaker Python SDK to get the remote
                                training job status from Amazon CloudWatch.</p>
                        </li></ul></div>
                </li></ol></div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For a customer working within VPC mode, company firewalls can cause connection issues with SageMaker Studio or
                    between JupyterServer and the KernelGateway. Make the following checks if you encounter one of these issues
                    when using SageMaker Studio from behind a firewall.</p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>Check that the Studio URL is in your networks allowlist.</p></li><li class="listitem"><p>Check that the websocket connections are not blocked. Jupyter uses websocket under
                        the hood. If the KernelGateway application is InService, JupyterServer may not be able
                        to connect to the KernelGateway. You should see this problem when opening System Terminal as well.
                    </p></li></ul></div></div></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./geospatial-sec-best-practices.html">Security Best Practices for SageMaker geospatial capabilities</div><div id="next" class="next-link" accesskey="n" href="./geospatial-kms.html">Use AWS KMS Permissions for SageMaker geospatial capabilities</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/geospatial-notebooks-and-internet-access-vpc-requirements.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
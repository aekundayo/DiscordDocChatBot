<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create and Start a Human Loop - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="a2i-start-human-loop" /><meta name="default_state" content="a2i-start-human-loop" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="a2i-start-human-loop.html" /><meta name="description" content="Use this guide to learn how to create a start a human loop when using Amazon Augmented AI. A human loop is used to send human review tasks to workers." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="a2i-start-human-loop.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="de" /><link rel="alternative" href="a2i-start-human-loop.html" hreflang="en-us" /><link rel="alternative" href="a2i-start-human-loop.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/a2i-start-human-loop.html" hreflang="zh-tw" /><link rel="alternative" href="a2i-start-human-loop.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Create and Start a Human Loop" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Create and Start a Human Loop - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#a2i-start-human-loop" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/a2i-start-human-loop.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/a2i-start-human-loop.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/a2i-start-human-loop.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Label data with a human-in-the-loop",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/data-label.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using Amazon Augmented AI for Human Review",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/a2i-use-augmented-ai-a2i-human-review-loops.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Create and Start a Human Loop",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/a2i-use-augmented-ai-a2i-human-review-loops.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#a2i-start-human-loop" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="a2i-start-human-loop.html#a2i-human-loop-built-in-task-type">Create and Start a Human Loop for a
        Built-in Task Type</a><a href="a2i-start-human-loop.html#a2i-instructions-starthumanloop">Create and Start a Human Loop for a Custom
        Task Type</a><a href="a2i-start-human-loop.html#a2i-next-step-starthumanloop">Next Steps:</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="a2i-start-human-loop">Create and Start a Human Loop</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>A <em>human loop</em> starts your human review workflow and sends data review
    tasks to human workers. When you use one of the Amazon A2I built-in task types, the
    corresponding AWS service creates and starts a human loop on your behalf when the conditions
    specified in your flow definition are met. If no conditions are specified in your flow
    definition, a human loop is created for each object. When using Amazon A2I for a custom task, a
    human loop starts when your application calls <code class="code">StartHumanLoop</code>. </p><p>Use the following instructions to configure a human loop with Amazon Rekognition or Amazon Textract built-in
    task types and custom task types. </p><p><b>Prerequisites</b></p><p>To create and start a human loop, you must attach the
      <code class="code">AmazonAugmentedAIFullAccess</code> policy to the AWS Identity and Access Management (IAM) user or role that
    configures or starts the human loop. This is the identity that you use to configure the human
    loop using <code class="code">HumanLoopConfig</code> for built-in task types. For custom task types, this is
    the identity that you use to call <code class="code">StartHumanLoop</code>.</p><p>Additionally, when using a built-in task type, your user or role must have permission
    to invoke API operations of the AWS service associated with your task type. For example, if
    you are using Amazon Rekognition with Augmented AI, you must attach permissions required to call
      <code class="code">DetectModerationLabels</code>. For examples of identity-based policies you can use to
    grant these permissions, see <a href="https://docs.aws.amazon.com/rekognition/latest/dg/security_iam_id-based-policy-examples.html">Amazon Rekognition
      Identity-Based Policy Examples</a> and <a href="https://docs.aws.amazon.com/textract/latest/dg/security_iam_id-based-policy-examples.html">Amazon Textract
      Identity-Based Policy Examples</a>. You can also use the more general policy
      <code class="code">AmazonAugmentedAIIntegratedAPIAccess</code> to grant these permissions. For more
    information, see <a href="a2i-permissions-security.html#a2i-grant-general-permission">Create a User With Permissions to Invoke
        Amazon A2I, Amazon Textract, and Amazon Rekognition API Operations</a>. </p><p>To create and start a human loop, you need a flow definition ARN. To learn how to create a
    flow definition (or human review workflow), see <a href="create-human-review-console.html">Create a Human Review Workflow</a>.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Amazon A2I requires all S3 buckets that contain human loop input image data to have a CORS
      policy attached. To learn more about this change, see <a href="a2i-permissions-security.html#a2i-cors-update">CORS Permission Requirement</a>.</p></div></div>
    <h2 id="a2i-human-loop-built-in-task-type">Create and Start a Human Loop for a
        Built-in Task Type</h2>
    <p>To start a human loop using a built-in task type, use the corresponding service's API to
      provide your input data and to configure the human loop. For Amazon Textract, you use the
        <code class="code">AnalyzeDocument</code> API operation. For Amazon Rekognition, you use the
        <code class="code">DetectModerationLabels</code> API operation. You can use the AWS CLI or a
      language-specific SDK to create requests using these API operations. </p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>When you create a human loop using a built-in task type, you can use
          <code class="code">DataAttributes</code> to specify a set of <code class="code">ContentClassifiers</code> related to
        the input provided to the <code class="code">StartHumanLoop</code> operation. Use content classifiers to
        declare that your content is free of personally identifiable information or adult
        content.</p><p>To use Amazon Mechanical Turk, ensure your data is free of personally identifiable information,
        including protected health information under HIPAA. Include the
          <code class="code">FreeOfPersonallyIdentifiableInformation</code> content classifier. If you do not use
        this content classifier, SageMaker does not send your task to Mechanical Turk. If your data is free of adult
        content, also include the <code class="code">'FreeOfAdultContent'</code> classifier. If you do not use
        these content classifiers, SageMaker may restrict the Mechanical Turk workers that can view your
        task.</p></div></div>
    <p>After you start your ML job using your built-in task type's AWS service API, Amazon A2I
      monitors the inference results of that service. For example, when running a job with Amazon Rekognition,
      Amazon A2I checks the inference confidence score for each image and compares it to the
      confidence thresholds specified in your flow definition. If the conditions to start a human
      review task are satisfied, or if you didn't specify conditions in your flow definition, a
      human review task is sent to workers. </p>
     
      <h3 id="a2i-human-loop-textract">Create an Amazon Textract Human Loop</h3>
      <p>Amazon A2I integrates with Amazon Textract so that you can configure and start a human loop
        using the Amazon Textract API. To send a document file to Amazon Textract for document analysis, you
        use the Amazon Textract <a href="https://docs.aws.amazon.com/textract/latest/dg/API_AnalyzeDocument.html"><code class="code">AnalyzeDocument</code> API
          operation</a>. To add a human loop to this document analysis job, you must configure
        the parameter <code class="code">HumanLoopConfig</code>. </p>
      <p>When you configure your human loop, the flow definition you specify in
          <code class="code">FlowDefinitionArn</code> of <code class="code">HumanLoopConfig</code> must be located in the same
        AWS Region as the bucket identified in <code class="code">Bucket</code> of the
        <code class="code">Document</code>parameter.</p>
      <p>The following table shows examples of how to use this operation with the AWS CLI and
        AWS SDK for Python (Boto3).</p>
      <awsdocs-tabs><dl style="display: none">
        <dt>AWS SDK for Python (Boto3)</dt><dd tab-id="aws-sdk-for-python-(boto3)">
            <p>The following request example uses the SDK for Python (Boto3). For more information, see <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/textract.html#Textract.Client.analyze_document" rel="noopener noreferrer" target="_blank"><span>analyze_document</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>AWS SDK for Python (Boto) API Reference</em>. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">import boto3

textract = boto3.client('textract', <code class="replaceable">aws_region</code>)

response = textract.analyze_document(
            Document=<span>{</span>'S3Object': <span>{</span>'Bucket': <code class="replaceable">bucket_name</code>, 'Name': <code class="replaceable">document_name</code>}},
            FeatureTypes=["TABLES", "FORMS"],
            HumanLoopConfig=<span>{</span>
                'FlowDefinitionArn': 'arn:aws:sagemaker:<code class="replaceable">aws_region</code>:<code class="replaceable">aws_account_number</code>:flow-definition/<code class="replaceable">flow_def_name</code>',
                'HumanLoopName': '<code class="replaceable">human_loop_name</code>',
                'DataAttributes': <span>{</span>'ContentClassifiers': ['FreeOfPersonallyIdentifiableInformation','FreeOfAdultContent']}
            }
          )
</code></pre>
          </dd>
        <dt>AWS CLI</dt><dd tab-id="aws-cli">
            <p>The following request example uses the AWS CLI. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/reference/textract/analyze-document.html">analyze-document</a> in the <em><a href="https://docs.aws.amazon.com/cli/latest/reference/">AWS CLI Command Reference</a></em>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="prompt" copy="false">$</code> aws textract analyze-document \
     --document '<span>{</span>"S3Object":<span>{</span>"Bucket":"<code class="replaceable">bucket_name</code>","Name":"<code class="replaceable">document_name</code>"}}' \
     --human-loop-config HumanLoopName="<code class="replaceable">human_loop_name</code>",FlowDefinitionArn="arn:aws:sagemaker:<code class="replaceable">aws-region</code>:<code class="replaceable">aws_account_number</code>:flow-definition/<code class="replaceable">flow_def_name</code>",DataAttributes='<span>{</span>ContentClassifiers=["FreeOfPersonallyIdentifiableInformation", "FreeOfAdultContent"]}' \
     --feature-types '["TABLES", "FORMS"]'</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">
<code class="prompt" copy="false">$</code> aws textract analyze-document \
     --document '<span>{</span>"S3Object":<span>{</span>"Bucket":"<code class="replaceable">bucket_name</code>","Name":"<code class="replaceable">document_name</code>"}}' \
     --human-loop-config \
          '<span>{</span>"HumanLoopName":"<code class="replaceable">human_loop_name</code>","FlowDefinitionArn":"arn:aws:sagemaker:<code class="replaceable">aws_region</code>:<code class="replaceable">aws_account_number</code>:flow-definition/<code class="replaceable">flow_def_name</code>","DataAttributes": <span>{</span>"ContentClassifiers":["FreeOfPersonallyIdentifiableInformation","FreeOfAdultContent"]}}' \
     --feature-types '["TABLES", "FORMS"]'</code></pre>
          </dd>
      </dl></awsdocs-tabs>
      <p>After you run <code class="code">AnalyzeDocument</code> with a human loop configured, Amazon A2I
        monitors the results from <code class="code">AnalyzeDocument</code> and checks it against the flow
        definition's activation conditions. If the Amazon Textract inference confidence score for one or
        more key-value pairs meets the conditions for review, Amazon A2I starts a human review loop
        and includes the <a href="https://docs.aws.amazon.com/textract/latest/dg/API_HumanLoopActivationOutput.html"><code class="code">HumanLoopActivationOutput</code></a> object in the
          <code class="code">AnalyzeDocument</code> response.</p>
     
     
      <h3 id="a2i-human-loop-rekognition">Create an Amazon Rekognition Human Loop</h3>
      <p>Amazon A2I integrates with Amazon Rekognition so that you can configure and start a human loop using
        the Amazon Rekognition API. To send images to Amazon Rekognition for content moderation, you use the Amazon Rekognition <a href="https://docs.aws.amazon.com/rekognition/latest/dg/API_DetectModerationLabels.html"><code class="code">DetectModerationLabels</code> API operation</a>. To configure a human loop,
        set the <code class="code">HumanLoopConfig</code> parameter when you configure
          <code class="code">DetectModerationLabels</code>.</p>
      <p>When you configure your human loop, the flow definition you specify in
          <code class="code">FlowDefinitionArn</code> of <code class="code">HumanLoopConfig</code> must be located in the same
        AWS Region as the S3 bucket identified in <code class="code">Bucket</code> of the <code class="code">Image</code>
        parameter.</p>
      <p>The following table shows examples of how to use this operation with the AWS CLI and
        AWS SDK for Python (Boto3).</p>
      <awsdocs-tabs><dl style="display: none">
        <dt>AWS SDK for Python (Boto3)</dt><dd tab-id="aws-sdk-for-python-(boto3)">
            <p>The following request example uses the SDK for Python (Boto3). For more information, see
              <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/rekognition.html#Rekognition.Client.detect_moderation_labels" rel="noopener noreferrer" target="_blank"><span>detect_moderation_labels</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>AWS SDK for Python (Boto) API Reference</em>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">import boto3

rekognition = boto3.client("rekognition", <code class="replaceable">aws_region</code>)

response = rekognition.detect_moderation_labels( \
        Image=<span>{</span>'S3Object': <span>{</span>'Bucket': <code class="replaceable">bucket_name</code>, 'Name': <code class="replaceable">image_name</code>}}, \
        HumanLoopConfig=<span>{</span> \
            'HumanLoopName': '<code class="replaceable">human_loop_name</code>', \
            'FlowDefinitionArn': , "arn:aws:sagemaker:<code class="replaceable">aws_region</code>:<code class="replaceable">aws_account_number</code>:flow-definition/<code class="replaceable">flow_def_name</code>" \
            'DataAttributes': <span>{</span>'ContentClassifiers': ['FreeOfPersonallyIdentifiableInformation','FreeOfAdultContent']}
         })
</code></pre>
          </dd>
        <dt>AWS CLI</dt><dd tab-id="aws-cli">
            <p>The following request example uses the AWS CLI. For more information, see
              <a href="https://docs.aws.amazon.com/cli/latest/reference/rekognition/detect-moderation-labels.html">detect-moderation-labels</a> in the <em><a href="https://docs.aws.amazon.com/cli/latest/reference/">AWS CLI Command Reference</a></em>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="prompt" copy="false">$</code> aws rekognition detect-moderation-labels \
    --image "S3Object=<span>{</span>Bucket='<code class="replaceable">bucket_name</code>',Name='<code class="replaceable">image_name</code>'}" \
    --human-loop-config HumanLoopName="<code class="replaceable">human_loop_name</code>",FlowDefinitionArn="arn:aws:sagemaker:<code class="replaceable">aws_region</code>:<code class="replaceable">aws_account_number</code>:flow-definition/<code class="replaceable">flow_def_name</code>",DataAttributes='<span>{</span>ContentClassifiers=["FreeOfPersonallyIdentifiableInformation", "FreeOfAdultContent"]}'</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">
<code class="prompt" copy="false">$</code> aws rekognition detect-moderation-labels \
    --image "S3Object=<span>{</span>Bucket='<code class="replaceable">bucket_name</code>',Name='<code class="replaceable">image_name</code>'}" \
    --human-loop-config \
        '<span>{</span>"HumanLoopName": "<code class="replaceable">human_loop_name</code>", "FlowDefinitionArn": "arn:aws:sagemaker:<code class="replaceable">aws_region</code>:<code class="replaceable">aws_account_number</code>:flow-definition/<code class="replaceable">flow_def_name</code>", "DataAttributes": <span>{</span>"ContentClassifiers": ["FreeOfPersonallyIdentifiableInformation", "FreeOfAdultContent"]}}'</code></pre>
          </dd>
      </dl></awsdocs-tabs>
      <p>After you run <code class="code">DetectModerationLabels</code> with a human loop configured,
        Amazon A2I monitors the results from <code class="code">DetectModerationLabels</code> and checks it
        against the flow definition's activation conditions. If the Amazon Rekognition inference confidence score
        for an image meets the conditions for review, Amazon A2I starts a human review loop and
        includes the response element <code class="code">HumanLoopActivationOutput</code> in the
          <code class="code">DetectModerationLabels</code> response.</p>
     
   
    <h2 id="a2i-instructions-starthumanloop">Create and Start a Human Loop for a Custom
        Task Type</h2>
    <p>To configure a human loop for a custom human review task, use the
        <code class="code">StartHumanLoop</code> operation within your application. This section provides an
      example of a human loop request using the AWS SDK for Python (Boto3) and the AWS Command Line Interface (AWS CLI). For
      documentation on other language-specific SDKs that support <code class="code">StartHumanLoop</code>, use
      the <b>See Also</b> section of <a href="https://docs.aws.amazon.com/augmented-ai/2019-11-07/APIReference/API_StartHumanLoop.html">StartHumanLoop</a> in
      the Amazon Augmented AI Runtime API documentation. Refer to <a href="a2i-task-types-general.html">Use Cases and Examples Using Amazon A2I</a> to see examples that demonstrate how to use
      Amazon A2I with a custom task type.</p>
    <p><b>Prerequisites</b></p>
    <p>To complete this procedure, you need:</p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>Input data formatted as a string representation of a JSON-formatted file</p>
      </li><li class="listitem">
        <p>The Amazon Resource Name (ARN) of your flow definition</p>
      </li></ul></div>
    <div class="procedure"><h6>To configure the human loop</h6><ol><li>
        <p>For <code class="code">DataAttributes</code>, specify a set of <code class="code">ContentClassifiers</code>
          related to the input provided to the <code class="code">StartHumanLoop</code> operation. Use content
          classifiers to declare that your content is free of personally identifiable information or
          adult content. </p>
        <p>To use Amazon Mechanical Turk, ensure your data is free of personally identifiable information,
          including protected health information under HIPAA, and include the
            <code class="code">FreeOfPersonallyIdentifiableInformation</code> content classifier. If you do not
          use this content classifier, SageMaker does not send your task to Mechanical Turk. If your data is free of
          adult content, also include the <code class="code">'FreeOfAdultContent'</code> classifier. If you do
          not use these content classifiers, SageMaker may restrict the Mechanical Turk workers that can view your
          task.</p>
      </li><li>
        <p>For <code class="code">FlowDefinitionArn</code>, enter the Amazon Resource Name (ARN) of your flow
          definition.</p>
      </li><li>
        <p>For <code class="code">HumanLoopInput</code>, enter your input data as a string representation of a
          JSON-formatted file. Structure your input data and custom worker task template so that
          your input data is properly displayed to human workers when you start your human loop. See
          <a href="a2i-custom-templates.html#a2i-preview-your-custom-template">Preview a Worker Task
                Template</a> to learn how to preview your custom worker task template. </p>
      </li><li>
        <p>For <code class="code">HumanLoopName</code>, enter a name for the human loop. The name must be
          unique within the Region in your account and can have up to 63 characters. Valid
          characters are a-z, 0-9, and - (hyphen).</p>
      </li></ol></div>
    <div class="procedure"><h6>To start a human loop</h6><ul><li>
        <p>To start a human loop, submit a request similar to the following examples using your
          preferred language-specific SDK. </p>
      </li></ul></div>
    <awsdocs-tabs><dl style="display: none">
      <dt>AWS SDK for Python (Boto3)</dt><dd tab-id="aws-sdk-for-python-(boto3)">
          <p>The following request example uses the SDK for Python (Boto3). For more information, see <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sagemaker-a2i-runtime.html#AugmentedAIRuntime.Client.start_human_loop" rel="noopener noreferrer" target="_blank"><span>Boto 3 Augmented AI Runtime</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>AWS SDK for Python (Boto) API Reference</em>.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">import boto3

a2i_runtime_client = boto3.client('sagemaker-a2i-runtime')

response = a2i_runtime_client.start_human_loop(
    HumanLoopName='<code class="replaceable">human_loop_name</code>',
    FlowDefinitionArn='arn:aws:sagemaker:<code class="replaceable">aws-region</code>:<code class="replaceable">xyz</code>:flow-definition/<code class="replaceable">flow_def_name</code>',
    HumanLoopInput=<span>{</span>
        'InputContent': <code class="replaceable">'<span>{</span>"InputContent": <span>{</span>\"prompt\":\"What is the answer?\"}}'</code>    
    },
    DataAttributes=<span>{</span>
        'ContentClassifiers': [
            <code class="replaceable">'FreeOfPersonallyIdentifiableInformation'|'FreeOfAdultContent'</code>,
        ]
    }
)
</code></pre>
        </dd>
      <dt>AWS CLI</dt><dd tab-id="aws-cli">
          <p>The following request example uses the AWS CLI. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/reference/sagemaker-a2i-runtime/start-human-loop.html">start-human-loop</a> in the <em><a href="https://docs.aws.amazon.com/cli/latest/reference/">AWS CLI Command Reference</a></em>. </p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="prompt" copy="false">$</code> aws sagemaker-a2i-runtime start-human-loop
        --flow-definition-arn 'arn:aws:sagemaker:<code class="replaceable">aws_region</code>:<code class="replaceable">xyz</code>:flow-definition/<code class="replaceable">flow_def_name</code>' \
        --human-loop-name '<code class="replaceable">human_loop_name</code>' \
        --human-loop-input '<code class="replaceable"><span>{</span>"InputContent": "<span>{</span>\"prompt\":\"What is the answer?\"}"}</code>' \
        --data-attributes ContentClassifiers=<code class="replaceable">"FreeOfPersonallyIdentifiableInformation","FreeOfAdultContent"</code> \</code></pre>
        </dd>
    </dl></awsdocs-tabs>
    <p>When you successfully start a human loop by invoking <code class="code">StartHumanLoop</code> directly,
      the response includes a <code class="code">HumanLoopARN</code> and a
        <code class="code">HumanLoopActivationResults</code> object which is set to <code class="code">NULL</code>. You can
      use this the human loop name to monitor and manage your human loop.</p>
   
    <h2 id="a2i-next-step-starthumanloop">Next Steps:</h2>
    <p>After starting a human loop, you can manage and monitor it with the Amazon Augmented AI Runtime API
      and Amazon CloudWatch Events. To learn more, see <a href="a2i-monitor-humanloop-results.html">Monitor and Manage Your Human Loop</a>.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./a2i-delete-flow-definition.html">Delete a Human Review Workflow</div><div id="next" class="next-link" accesskey="n" href="./a2i-delete-human-loop.html">Delete a Human Loop</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/a2i-start-human-loop.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/a2i-start-human-loop.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
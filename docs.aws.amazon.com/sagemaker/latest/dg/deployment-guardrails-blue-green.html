<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Blue/Green Deployments - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="deployment-guardrails-blue-green" /><meta name="default_state" content="deployment-guardrails-blue-green" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="deployment-guardrails-blue-green.html" /><meta name="description" content="Blue/green deployments provide you with the ability to roll out an update to a new fleet (green fleet) while your old fleet (blue fleet) is still active. If there is an issue with the update, the auto-rollback functionality rolls all of your endpoint traffic back to the old fleet to protect your endpoint." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="deployment-guardrails-blue-green.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="de" /><link rel="alternative" href="deployment-guardrails-blue-green.html" hreflang="en-us" /><link rel="alternative" href="deployment-guardrails-blue-green.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/deployment-guardrails-blue-green.html" hreflang="zh-tw" /><link rel="alternative" href="deployment-guardrails-blue-green.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Blue/Green Deployments" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Blue/Green Deployments - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#deployment-guardrails-blue-green" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/deployment-guardrails-blue-green.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/deployment-guardrails-blue-green.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/deployment-guardrails-blue-green.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,inference,deploy model,endpoint,prediction,ML application,serverless machine learning,multi model deployment,inference pipelines,ML model,deployment guardrails,blue green deployments,deployments,all at once,canary,linear" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Deploy models for inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deploy-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Update models in production",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deployment-guardrails.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Blue/Green Deployments",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deployment-guardrails.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#deployment-guardrails-blue-green" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="deployment-guardrails-blue-green.html#deployment-guardrails-blue-green-traffic-modes">Traffic Shifting Modes</a><a href="deployment-guardrails-blue-green.html#deployment-guardrails-blue-green-get-started">Get Started</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="deployment-guardrails-blue-green">Blue/Green Deployments</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When you update your endpoint, Amazon SageMaker automatically uses a blue/green deployment to
  maximize the availability of your endpoints. In a blue/green deployment, SageMaker provisions a new
  fleet with the updates (the green fleet). Then, SageMaker shifts traffic from the old fleet (the blue
  fleet) to the green fleet. Once the green fleet operates smoothly for a set evaluation period
  (called the baking period), SageMaker terminates the blue fleet. With the additional capabilities in
  blue/green deployments, you can utilize traffic shifting modes and auto-rollback monitoring to
  protect your endpoint from significant production impact.</p><p>The following list describes the key features of blue/green deployments in SageMaker:</p><div class="itemizedlist">
   
   
   
 <ul class="itemizedlist"><li class="listitem">
   <p><b>Traffic shifting modes.</b> The traffic shifting modes for
    deployment guardrails let you control the volume of traffic and number of traffic-shifting steps
    between the blue fleet and the green fleet. This capability gives you the ability to
    progressively evaluate the performance of the green fleet without fully committing to a 100%
    traffic shift.</p></li><li class="listitem">
   <p><b>Baking period.</b> The baking period is a set amount of time
    to monitor the green fleet before proceeding to the next deployment stage. If any of the
    pre-specified alarms trip during any baking period, then all endpoint traffic rolls back to the
    blue fleet. The baking period helps you to build confidence in your update before making the
    traffic shift permanent.</p></li><li class="listitem">
   <p><b>Auto-rollbacks.</b> You can specify Amazon CloudWatch alarms that SageMaker
    uses to monitor the green fleet. If an issue with the updated code trips any of the alarms, SageMaker
    initiates an auto-rollback to the blue fleet in order to maintain availability thereby
    minimizing risk.</p></li></ul></div>
  
  <h2 id="deployment-guardrails-blue-green-traffic-modes">Traffic Shifting Modes</h2>
  
  <p>The various traffic shifting modes in blue/green deployments give you more granular control
   over traffic shifting between the blue fleet and the green fleet. The available traffic shifting
   modes for blue/green deployments are all at once, canary, and linear. The following table shows a
   comparison of the options.</p>
  
  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>For blue/green deployments that involve multiple stage traffic shifting or baking periods,
    you are billed for both the fleets for the duration of the update, irrespective of the traffic
    to the fleet. This is in contrast to blue/green deployments with all at once traffic shifting
    and no baking periods, where you are only billed for one fleet during the course of the
    update.</p></div></div>
  
  <div class="table-container"><div class="table-contents"><table id="w714aac25c43c15b9b7"><thead>
     <tr>
      <th>Name</th>
      <th>What is it?</th>
      <th>Pros</th>
      <th>Cons</th>
      <th>Recommendation</th>
     </tr>
    </thead>
     <tr>
      <td tabindex="-1"><p>All at once</p></td>
      <td tabindex="-1"><p>Shifts all of the traffic to the new fleet in a single step.</p></td>
      <td tabindex="-1"><p>Minimizes the overall update duration.</p></td>
      <td tabindex="-1"><p>Regressive updates affect 100% of the traffic.</p></td>
      <td tabindex="-1"><p>Use this option to minimize update time and cost.</p></td>
     </tr>
     <tr>
      <td tabindex="-1"><p>Canary</p></td>
      <td tabindex="-1"><p>Traffic shifts in two steps. The first (canary) step shifts a small portion of the traffic
        followed by the second step, which shifts the remainder of the traffic.</p></td>
      <td tabindex="-1"><p>Confines the blast radius of regressive updates to only the canary fleet.</p></td>
      <td tabindex="-1"><p>Both fleets are operational in parallel for entire deployment.</p></td>
      <td tabindex="-1"><p>Use this option to balance between minimizing the blast radius of regressive updates and
        minimizing the time that two fleets are operational.</p></td>
     </tr>
     <tr>
      <td tabindex="-1"><p>Linear</p></td>
      <td tabindex="-1"><p>A fixed portion of the traffic shifts in a pre-specified number of equally spaced
        steps.</p></td>
      <td tabindex="-1"><p>Minimizes the risk of regressive updates by shifting traffic over several steps.</p></td>
      <td tabindex="-1"><p>The update duration and cost are proportional to the number of steps.</p></td>
      <td tabindex="-1"><p>Use this option to minimize risk by spreading out deployment across multiple steps.</p></td>
     </tr>
    </table></div></div>
  
  <h2 id="deployment-guardrails-blue-green-get-started">Get Started</h2>
  <p>Once you specify your desired deployment configuration, SageMaker handles provisioning new
   instances, terminating old instances, and shifting traffic for you. You can create and manage your
   deployment through the existing <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_UpdateEndpoint.html">UpdateEndpoint</a> and <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateEndpoint.html">CreateEndpoint</a> SageMaker API and AWS Command Line Interface commands. Note that if your endpoint
   uses any of the features listed in the <a href="deployment-guardrails-exclusions.html">Exclusions</a> page, you cannot use deployment guardrails. See the
   individual deployment pages for more details on how to set up your deployment:</p>
  <div class="itemizedlist">
    
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p><a href="deployment-guardrails-blue-green-all-at-once.html">
     Blue/Green Update with All At Once Traffic Shifting</a></p>
   </li><li class="listitem">
    <p><a href="deployment-guardrails-blue-green-canary.html">
     Blue/Green Update with Canary Traffic Shifting</a></p>
   </li><li class="listitem">
    <p><a href="deployment-guardrails-blue-green-linear.html">
     Blue/Green Update with Linear Traffic Shifting</a></p>
   </li></ul></div>
  <p>To follow guided examples that show how to use deployment guardrails, see our example <a href="https://github.com/aws/amazon-sagemaker-examples/tree/master/sagemaker-inference-deployment-guardrails" rel="noopener noreferrer" target="_blank"><span>Jupyter notebooks</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> for the canary and linear traffic shifting modes.</p>
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./deployment-guardrails-configuration.html">Auto-Rollback Configuration and
            Monitoring</div><div id="next" class="next-link" accesskey="n" href="./deployment-guardrails-blue-green-all-at-once.html">All At Once Traffic Shifting</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/deployment-guardrails-blue-green.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/deployment-guardrails-blue-green.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
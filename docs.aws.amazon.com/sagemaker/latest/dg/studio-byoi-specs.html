<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Custom SageMaker image specifications - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="studio-byoi-specs" /><meta name="default_state" content="studio-byoi-specs" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="studio-byoi-specs.html" /><meta name="description" content="Describes specifications for bringing your own image to Amazon SageMaker." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="studio-byoi-specs.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="de" /><link rel="alternative" href="studio-byoi-specs.html" hreflang="en-us" /><link rel="alternative" href="studio-byoi-specs.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/studio-byoi-specs.html" hreflang="zh-tw" /><link rel="alternative" href="studio-byoi-specs.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Custom SageMaker image specifications" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Custom SageMaker image specifications - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#studio-byoi-specs" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-byoi-specs.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-byoi-specs.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-byoi-specs.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Use machine learning environments offered by SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/machine-learning-environments.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon SageMaker Studio",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Customize Amazon SageMaker Studio",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-customize.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Bring your own SageMaker image",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-byoi.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Custom SageMaker image specifications",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-byoi.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#studio-byoi-specs" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="studio-byoi-specs.html#studio-byoi-specs-sample">Sample Dockerfile</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="studio-byoi-specs">Custom SageMaker image specifications</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The following specifications apply to the container image that is represented by a SageMaker
      image version.</p><div class="variablelist">
       
       
       
       
       
       
       
       
       
       
    <dl>
        <dt><b><span class="term">Running the image</span></b></dt>
        <dd>
          <p><code class="code">ENTRYPOINT</code> and <code class="code">CMD</code> instructions are overridden to enable
            the image to run as a KernelGateway app.</p>
          <p>Port 8888 in the image is reserved for running the KernelGateway web server.</p>
        </dd>
      
        <dt><b><span class="term">Stopping the image</span></b></dt>
        <dd>
          <p>The <code class="code">DeleteApp</code> API issues the equivalent of a <code class="code">docker stop</code>
            command. Other processes in the container won’t get the SIGKILL/SIGTERM signals.</p>
        </dd>
      
        <dt><b><span class="term">Kernel discovery</span></b></dt>
        <dd>
          <p>SageMaker recognizes kernels as defined by Jupyter
            <a href="https://jupyter-client.readthedocs.io/en/latest/kernels.html#kernelspecs" rel="noopener noreferrer" target="_blank"><span>kernel specs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
          <p>You can specify a list of kernels to display before running the image. If not specified,
            python3 is displayed. Use the <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DescribeAppImageConfig.html">DescribeAppImageConfig</a> API to view the list of kernels.</p>
          <p>Conda environments are recognized as kernel specs by default. </p>
        </dd>
      
        <dt><b><span class="term">File system</span></b></dt>
        <dd>
          <p>The <code>/opt/.sagemakerinternal</code> and <code>/opt/ml</code>
            directories are reserved. Any data in these directories might not be visible at runtime.</p>
        </dd>
      
        <dt><b><span class="term">User data</span></b></dt>
        <dd>
          <p>Each user in a domain gets a user directory on a shared Amazon Elastic File System volume in the
            image. The location of the current user's directory on the Amazon EFS volume is configurable.
            By default, the location of the directory is
            <code>/home/sagemaker-user</code>.</p>
          <p>SageMaker configures POSIX UID/GID mappings between the image and the host. This defaults
            to mapping the root user's UID/GID (0/0) to the UID/GID on the host.</p>
          <p>You can specify these values using the
            <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateAppImageConfig.html">CreateAppImageConfig</a>
            API.</p>
        </dd>
      
        <dt><b><span class="term">GID/UID limits</span></b></dt>
        <dd>
          <p>Amazon SageMaker Studio only supports the following <code class="code">DefaultUID</code> and
              <code class="code">DefaultGID</code> combinations: </p>
          <div class="itemizedlist">
             
             
          <ul class="itemizedlist"><li class="listitem">
              <p> DefaultUID: 1000 and DefaultGID: 100, which corresponds to a non-priveleged
                user.</p>
            </li><li class="listitem">
              <p> DefaultUID: 0 and DefaultGID: 0, which corresponds to root access.</p>
            </li></ul></div>
        </dd>
      
        <dt><b><span class="term">Metadata</span></b></dt>
        <dd>
          <p>A metadata file is located at <code>/opt/ml/metadata/resource-metadata.json</code>. No
            additional environment variables are added to the variables defined in the image. For more
            information, see <a href="notebooks-run-and-manage-metadata.html#notebooks-run-and-manage-metadata-app">Get App Metadata</a>.</p>
        </dd>
      
        <dt><b><span class="term">GPU</span></b></dt>
        <dd>
          <p>On a GPU instance, the image is run with the <code class="code">--gpus</code> option. Only the
            CUDA toolkit should be included in the image not the NVIDIA drivers. For more information, see
            <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/user-guide.html" rel="noopener noreferrer" target="_blank"><span>NVIDIA User Guide</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
        </dd>
      
        <dt><b><span class="term">Metrics and logging</span></b></dt>
        <dd>
          <p>Logs from the KernelGateway process are sent to Amazon CloudWatch in the customer’s account.
            The name of the log group is <code class="code">/aws/sagemaker/studio</code>. The name of the log
            stream is <code class="code">$domainID/$userProfileName/KernelGateway/$appName</code>.</p>
        </dd>
      
        <dt><b><span class="term">Image size</span></b></dt>
        <dd>
          <p>Limited to 25 GB. To view the size of your image, run <code class="code">docker image
            ls</code>.</p>
          <p></p>
        </dd>
      </dl></div>
      <h2 id="studio-byoi-specs-sample">Sample Dockerfile</h2>
      <p>The following sample Dockerfile creates an image based Amazon Linux 2, installs third party
        packages and the <code class="code">python3</code> kernel, and sets the scope to the non-privileged user.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">FROM public.ecr.aws/amazonlinux/amazonlinux:2

ARG NB_USER="sagemaker-user"
ARG NB_UID="1000"
ARG NB_GID="100"

RUN \
    yum install --assumeyes python3 shadow-utils &amp;&amp; \
    useradd --create-home --shell /bin/bash --gid "$<span>{</span>NB_GID}" --uid $<span>{</span>NB_UID} $<span>{</span>NB_USER} &amp;&amp; \
    yum clean all &amp;&amp; \
    python3 -m pip install ipykernel &amp;&amp; \
    python3 -m ipykernel install

USER $<span>{</span>NB_UID}</code></pre>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./studio-byoi.html">Bring your own image</div><div id="next" class="next-link" accesskey="n" href="./studio-byoi-prereq.html">Prerequisites</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-byoi-specs.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/studio-byoi-specs.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
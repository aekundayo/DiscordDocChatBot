<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SageMaker Roles - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="sagemaker-roles" /><meta name="default_state" content="sagemaker-roles" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="sagemaker-roles.html" /><meta name="description" content="Amazon SageMaker performs operations on your behalf using other AWS services. You must grant SageMaker permissions to use these services and the resources they act upon. You grant SageMaker these permissions using an AWS Identity and Access Management (IAM) execution role. For more information on IAM roles, see" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="sagemaker-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/sagemaker-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/sagemaker-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/sagemaker-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/sagemaker-roles.html" hreflang="de" /><link rel="alternative" href="sagemaker-roles.html" hreflang="en-us" /><link rel="alternative" href="sagemaker-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/sagemaker-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/sagemaker-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/sagemaker-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/sagemaker-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/sagemaker-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/sagemaker-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/sagemaker-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/sagemaker-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/sagemaker-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/sagemaker-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/sagemaker-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/sagemaker-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/sagemaker-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/sagemaker-roles.html" hreflang="zh-tw" /><link rel="alternative" href="sagemaker-roles.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="SageMaker Roles" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>SageMaker Roles - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#sagemaker-roles" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/sagemaker-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/sagemaker-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/sagemaker-roles.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Configure security in Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and Access Management for Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/security-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "SageMaker Roles",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/security-iam.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#sagemaker-roles" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="sagemaker-roles.html#sagemaker-roles-create-execution-role">Create execution
                    role</a><a href="sagemaker-roles.html#sagemaker-roles-get-execution-role">Get execution role</a><a href="sagemaker-roles.html#sagemaker-roles-pass-role">Passing Roles</a><a href="sagemaker-roles.html#sagemaker-roles-autopilot-perms">CreateAutoMLJob API: Execution
                    Role Permissions</a><a href="sagemaker-roles.html#sagemaker-roles-createdomain-perms">CreateDomain API: Execution
                    Role Permissions</a><a href="sagemaker-roles.html#sagemaker-roles-createimage-perms">CreateImage and UpdateImage
                    APIs: Execution Role Permissions</a><a href="sagemaker-roles.html#sagemaker-roles-createnotebookinstance-perms">CreateNotebookInstance API: Execution Role Permissions</a><a href="sagemaker-roles.html#sagemaker-roles-createhyperparametertiningjob-perms">CreateHyperParameterTuningJob API: Execution Role Permissions</a><a href="sagemaker-roles.html#sagemaker-roles-createprocessingjob-perms">CreateProcessingJob API:
                    Execution Role Permissions</a><a href="sagemaker-roles.html#sagemaker-roles-createtrainingjob-perms">CreateTrainingJob API:
                    Execution Role Permissions</a><a href="sagemaker-roles.html#sagemaker-roles-createmodel-perms">CreateModel API: Execution Role
                    Permissions</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="sagemaker-roles">SageMaker Roles</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon SageMaker performs operations on your behalf using other AWS services. You must grant
            SageMaker permissions to use these services and the resources they act upon. You grant SageMaker
            these permissions using an AWS Identity and Access Management (IAM) execution role. For more information on
            IAM roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html">IAM roles</a>.</p><p>To create and use an execution role, you can use the following procedures.</p>
            <h2 id="sagemaker-roles-create-execution-role">Create execution
                    role</h2>
            <p>Use the following procedure to create an execution role with the IAM managed
                policy, <code class="code">AmazonSageMakerFullAccess</code>, attached. If your use case requires
                more granular permissions, use other sections on this page to create an execution
                role that meets your business needs. You can create an execution role using the SageMaker
                console or the AWS CLI.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>The IAM managed policy, <code class="code">AmazonSageMakerFullAccess</code>, used in the
                    following procedure only grants the execution role permission to perform certain
                    Amazon S3 actions on buckets or objects with <code class="code">SageMaker</code>,
                        <code class="code">Sagemaker</code>, <code class="code">sagemaker</code>, or <code class="code">aws-glue</code> in
                    the name. To learn how to add an additional policy to an execution role to grant
                    it access to other Amazon S3 buckets and objects, see <a href="sagemaker-roles.html#sagemaker-roles-get-execution-role-s3">Add Additional Amazon S3
                        Permissions to a SageMaker Execution Role</a>.</p></div></div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can create an execution role directly when you create a SageMaker domain or a
                    notebook instance.</p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>For information on how to create a SageMaker domain, see <a href="onboard-sso-users.html">Onboard to Amazon SageMaker Domain using IAM Identity Center</a>.</p>
                    </li><li class="listitem">
                        <p>For information on how to create a notebook instance, see <a href="gs-setup-working-env.html">Step 1: Create an Amazon SageMaker Notebook Instance</a>.</p>
                    </li></ul></div></div></div>
            <p><b>To create a new execution role from the SageMaker
                    console</b></p>
            <div class="procedure"><ol><li><p>Open the IAM console at
         <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                    <p>Choose <b>Roles</b> and then choose <b>Create
                            role</b>.</p>
                </li><li>
                    <p>Keep <b>AWS service</b> as the <b>Trusted entity
                            type</b> and then use the down arrow to find
                            <b>SageMaker</b> in <b>Use cases for other AWS
                            services</b>.</p>
                </li><li>
                    <p>Choose <b>SageMaker – Execution</b> and then choose
                            <b>Next</b>.</p>
                </li><li>
                    <p>The IAM managed policy, <code class="code">AmazonSageMakerFullAccess</code>, is
                        automatically attached to the role. To see the permissions included in this
                        policy, choose the plus (<b>+</b>) sign next to the policy
                        name. Choose <b>Next</b>.</p>
                </li><li>
                    <p>Enter a <b>Role name</b> and a
                            <b>Description</b>.</p>
                </li><li>
                    <p>(Optional) Add additional permissions and tags to the role.</p>
                </li><li>
                    <p>Choose <b>Create role</b>.</p>
                </li><li>
                    <p>On the <b>Roles</b> section of the IAM console, find the
                        role you just created. If needed, use the text box to search for the role
                        using the role name.</p>
                </li><li>
                    <p>On the role summary page, make note of the ARN.</p>
                </li></ol></div>
            <p><b>To create a new execution role from the AWS CLI</b></p>
            <p>Before you create an execution role using the AWS CLI, make sure to update and
                configure it by following the instructions in <a href="gs-set-up.html#gs-cli-prereq">AWS CLI Prerequisites</a>, then continue with the instructions in <a href="onboard-sso-users.html#onboard-sso-users-cli">Onboard from the AWS CLI</a>.</p>
            <p>Once you have created an execution role, you can associate it with a SageMaker domain,
                a user profile, or with a Jupyter notebook instance.</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>To learn about how to associate an execution role with an existing SageMaker
                        domain, see <a href="domain-view-edit.html#domain-edit-domains">Edit Domain settings</a>.</p>
                </li><li class="listitem">
                    <p>To learn about how to associate an execution role with an existing user
                        profile, see <a href="domain-user-profile-add-remove.html">Add and Remove User Profiles</a>.</p>
                </li><li class="listitem">
                    <p>To learn about how to associate an execution role with an existing
                        notebook instance, see <a href="nbi-update.html">Update a Notebook Instance</a>.</p>
                </li></ul></div>
            <p>You can also pass the ARN of an execution role to your API call. For example,
                using <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, you can pass the ARN of your execution role to an
                estimator. In the code sample that follows, we create an estimator using the XGBoost
                algorithm container and pass the ARN of the execution role as a parameter. For the
                full example on GitHub, see <a href="https://github.com/aws/amazon-sagemaker-examples/blob/89c54681b7e0f83ce137b34b879388cf5960af93/introduction_to_applying_machine_learning/xgboost_customer_churn/xgboost_customer_churn.ipynb" rel="noopener noreferrer" target="_blank"><span>Customer Churn Prediction with XGBoost</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="py ">import sagemaker, boto3
from sagemaker import image_uris

sess = sagemaker.Session()
region = sess.boto_region_name
bucket = sess.default_bucket()
prefix = "sagemaker/DEMO-xgboost-churn"
container = sagemaker.image_uris.retrieve("xgboost", region, "1.7-1")

xgb = sagemaker.estimator.Estimator(
    container,
    <code class="replaceable">execution-role-ARN</code>,
    instance_count=1,
    instance_type="ml.m4.xlarge",
    output_path="s3://<span>{</span>}/<span>{</span>}/output".format(bucket, prefix),
    sagemaker_session=sess,
)

...
</code></pre>

             
                <h3 id="sagemaker-roles-get-execution-role-s3">Add Additional Amazon S3
                        Permissions to a SageMaker Execution Role</h3>
                <p>When you use a SageMaker feature with resources in Amazon S3, such as input data, the
                    execution role you specify in your request (for example
                        <code class="code">CreateTrainingJob</code>) is used to access these resources.</p>
                <p>If you attach the IAM managed policy,
                    <code class="code">AmazonSageMakerFullAccess</code>, to an execution role, that role has
                    permission to perform certain Amazon S3 actions on buckets or objects with
                        <code class="code">SageMaker</code>, <code class="code">Sagemaker</code>, <code class="code">sagemaker</code>, or
                        <code class="code">aws-glue</code> in the name. It also has permission to perform the
                    following actions on any Amazon S3 resource:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"s3:CreateBucket", 
"s3:GetBucketLocation",
"s3:ListBucket",
"s3:ListAllMyBuckets",
"s3:GetBucketCors",
"s3:PutBucketCors"</code></pre>
                <p>To give an execution role permissions to access one or more specific buckets
                    in Amazon S3, you can attach a policy similar to the following to the role. This
                    policy grants an IAM role permission to perform all actions that
                        <code class="code">AmazonSageMakerFullAccess</code> allows but restricts this access to
                    the buckets <code class="replaceable">DOC-EXAMPLE-BUCKET1</code> and <code class="replaceable">DOC-EXAMPLE-BUCKET2</code>. Refer to the security
                    documentation for the specific SageMaker feature you are using to learn more about
                    the Amazon S3 permissions required for that feature.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObject",
                "s3:AbortMultipartUpload"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code>/*</code>",
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET2</code>/*</code>"
            ]
        }, 
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:CreateBucket",
                "s3:GetBucketLocation",
                "s3:ListBucket",
                "s3:ListAllMyBuckets",
                "s3:GetBucketCors",
                "s3:PutBucketCors"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetBucketAcl",
                "s3:PutObjectAcl"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>",
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET2</code></code>"
            ]
        }
    ]
}</code></pre>
             
         
            <h2 id="sagemaker-roles-get-execution-role">Get execution role</h2>
            <p>You can use the SageMaker console or the AWS CLI to retrieve the ARN of the execution
                role attached to a SageMaker domain, a user profile, or a notebook instance.</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>To find the ARN of the IAM execution role attached to a SageMaker domain, see
                            <a href="domain-view-edit.html">View and Edit Domains</a>.</p>
                </li><li class="listitem">
                    <p>To find the ARN of the IAM execution role attached to a user profile,
                        see <a href="domain-user-profile-view-describe.html">View User Profiles and User Profile
      Details</a>.</p>
                </li><li class="listitem">
                    <p>To find the ARN of the IAM execution role attached to a notebook
                        instance:</p>

                    <div class="procedure"><ol><li><p>Open the IAM console at
         <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                            <p>On the left navigation pane, choose <b>Notebook</b>
                                then <b>Notebook instances</b>.</p>
                        </li><li>
                            <p>From the list of notebooks, select the notebook that you want to
                                view.</p>
                        </li><li>
                            <p>The ARN is in the <b>Permissions and encryption</b>
                                section.</p>
                        </li></ol></div>
                </li></ul></div>

            <p>Alternatively, <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> users can retrieve the ARN of the execution
                role attached to their user profile or a notebook instance by running the following
                code:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import sagemaker
sagemaker_session = sagemaker.Session()
role = sagemaker.get_execution_role()</code></pre>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The execution role is available only when running a notebook within SageMaker. If
                    you run <code class="code">get_execution_role</code> in a notebook not on SageMaker, expect a
                    "region" error. </p></div></div>

         
            <h2 id="sagemaker-roles-pass-role">Passing Roles</h2>
            <p>Actions like passing a role between services are a common function within SageMaker.
                You can find more details on <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/list_amazonsagemaker.html#amazonsagemaker-actions-as-permissions">Actions, Resources, and Condition Keys for SageMaker</a> in the
                    <em>IAM User Guide</em>.</p>
            <p>You pass the role (<code class="code">iam:PassRole</code>) when making these API calls: <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateAutoMLJob.html"><code class="code">CreateAutoMLJob</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateCompilationJob.html"><code class="code">CreateCompilationJob</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateDomain.html"><code class="code">CreateDomain</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateFeatureGroup.html"><code class="code">CreateFeatureGroup</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateFlowDefinition.html"><code class="code">CreateFlowDefiniton</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateHyperParameterTuningJob.html"><code class="code">CreateHyperParameterTuningJob</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateImage.html"><code class="code">CreateImage</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateLabelingJob.html"><code class="code">CreateLabelingJob</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateModel.html"><code class="code">CreateModel</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateMonitoringSchedule.html"><code class="code">CreateMonitoringSchedule</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateNotebookInstance.html"><code class="code">CreateNotebookInstance</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateProcessingJob.html"><code class="code">CreateProcessingJob</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateTrainingJob.html"><code class="code">CreateTrainingJob</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateUserProfile.html"><code class="code">CreateUserProfile</code></a>, <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_RenderUiTemplate.html"><code class="code">RenderUiTemplate</code></a>, and <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_UpdateImage.html"><code class="code">UpdateImage</code></a>.</p>
            <p>You attach the following trust policy to the IAM role which grants SageMaker principal
                permissions to assume the role, and is the same for all of the execution roles: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "Service": "sagemaker.amazonaws.com"
            },
            "Action": "sts:AssumeRole"
        }
    ]
}</code></pre>
            <p>The permissions that you need to grant to the role vary depending on the API that
                you call. The following sections explain these permissions.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Instead of managing permissions by crafting a permission policy, you can use
                    the AWS-managed <code class="code">AmazonSageMakerFullAccess</code> permission policy. The
                    permissions in this policy are fairly broad, to allow for any actions you might
                    want to perform in SageMaker. For a listing of the policy including information about
                    the reasons for adding many of the permissions, see <a href="security-iam-awsmanpol.html#security-iam-awsmanpol-AmazonSageMakerFullAccess">AWS managed policy: AmazonSageMakerFullAccess</a>. If you
                    prefer to create custom policies and manage permissions to scope the permissions
                    only to the actions you need to perform with the execution role, see the
                    following topics.</p></div></div>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you're running into issues, see <a href="security_iam_troubleshoot.html">Troubleshooting Amazon SageMaker
                Identity and Access</a>.</p></div></div>
            <p>For more information about IAM roles, see <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html">IAM
                    Roles</a> in the <em>IAM User Guide</em>.</p>
        <div class="highlights"><h6>Topics</h6><ul><li><a href="sagemaker-roles.html#sagemaker-roles-autopilot-perms">CreateAutoMLJob API: Execution
                    Role Permissions</a></li><li><a href="sagemaker-roles.html#sagemaker-roles-createdomain-perms">CreateDomain API: Execution
                    Role Permissions</a></li><li><a href="sagemaker-roles.html#sagemaker-roles-createimage-perms">CreateImage and UpdateImage
                    APIs: Execution Role Permissions</a></li><li><a href="sagemaker-roles.html#sagemaker-roles-createnotebookinstance-perms">CreateNotebookInstance API: Execution Role Permissions</a></li><li><a href="sagemaker-roles.html#sagemaker-roles-createhyperparametertiningjob-perms">CreateHyperParameterTuningJob API: Execution Role Permissions</a></li><li><a href="sagemaker-roles.html#sagemaker-roles-createprocessingjob-perms">CreateProcessingJob API:
                    Execution Role Permissions</a></li><li><a href="sagemaker-roles.html#sagemaker-roles-createtrainingjob-perms">CreateTrainingJob API:
                    Execution Role Permissions</a></li><li><a href="sagemaker-roles.html#sagemaker-roles-createmodel-perms">CreateModel API: Execution Role
                    Permissions</a></li><li><a href="sagemaker-geospatial-roles.html">SageMaker geospatial capabilities roles</a></li></ul></div>
            <h2 id="sagemaker-roles-autopilot-perms">CreateAutoMLJob API: Execution
                    Role Permissions</h2>
            <p>For an execution role that you can pass in a <code class="code">CreateAutoMLJob</code> API
                request, you can attach the following minimum permission policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:PassRole"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "iam:PassedToService": "sagemaker.amazonaws.com"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "sagemaker:DescribeEndpointConfig",
                "sagemaker:DescribeModel",
                "sagemaker:InvokeEndpoint",
                "sagemaker:ListTags",
                "sagemaker:DescribeEndpoint",
                "sagemaker:CreateModel",
                "sagemaker:CreateEndpointConfig",
                "sagemaker:CreateEndpoint",
                "sagemaker:DeleteModel",
                "sagemaker:DeleteEndpointConfig",
                "sagemaker:DeleteEndpoint",
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "s3:GetObject",
                "s3:PutObject",
                "s3:ListBucket",
                "ecr:GetAuthorizationToken",
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
            <p>If you specify a private VPC for your AutoML job, add the following
                permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "ec2:CreateNetworkInterface",
        "ec2:CreateNetworkInterfacePermission",
        "ec2:DeleteNetworkInterface",
        "ec2:DeleteNetworkInterfacePermission",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeVpcs",
        "ec2:DescribeDhcpOptions",
        "ec2:DescribeSubnets",
        "ec2:DescribeSecurityGroups"
    ]
}</code></pre>
            <p>If your input is encrypted using server-side encryption with an AWS KMS–managed
                key (SSE-KMS), add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "kms:Decrypt"
    ]
}</code></pre>
            <p>If you specify a KMS key in the output configuration of your AutoML job, add the
                following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:Encrypt"
    ]
}</code></pre>
            <p>If you specify a volume KMS key in the resource configuration of your AutoML job,
                add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:CreateGrant"
    ]
}</code></pre>
         
            <h2 id="sagemaker-roles-createdomain-perms">CreateDomain API: Execution
                    Role Permissions</h2>
            <p>The execution role for domains with IAM Identity Center and the user/execution role for IAM
                domains need the following permissions when you pass an AWS KMS customer managed key as the
                    <code class="code">KmsKeyId</code> in the <code class="code">CreateDomain</code> API request. The
                permissions are enforced during the <code class="code">CreateApp</code> API call.</p>
            <p>For an execution role that you can pass in the <code class="code">CreateDomain</code> API
                request, you can attach the following permission policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:CreateGrant",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account-id</code>:key/<code class="replaceable">kms-key-id</code>"
        }
    ]
}</code></pre>
            <p>Alternatively, if the permissions are specified in a KMS policy, you can attach
                the following policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "Allow use of the key",
            "Effect": "Allow",
            "Principal": <span>{</span>
                "AWS": [
                    "arn:aws:iam::<code class="replaceable">account-id</code>:role/<code class="replaceable">ExecutionRole</code>"
                ]
            },
            "Action": [
                "kms:CreateGrant",
                "kms:DescribeKey"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
         
            <h2 id="sagemaker-roles-createimage-perms">CreateImage and UpdateImage
                    APIs: Execution Role Permissions</h2>
            <p>For an execution role that you can pass in a <code class="code">CreateImage</code> or
                    <code class="code">UpdateImage</code> API request, you can attach the following permission
                policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecr:BatchGetImage",
                "ecr:GetDownloadUrlForLayer"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:PassRole"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "iam:PassedToService": "sagemaker.amazonaws.com"
                }
            }
        }
    ]
}</code></pre>
         
            <h2 id="sagemaker-roles-createnotebookinstance-perms">CreateNotebookInstance API: Execution Role Permissions</h2>
            <p>The permissions that you grant to the execution role for calling the
                    <code class="code">CreateNotebookInstance</code> API depend on what you plan to do with the
                notebook instance. If you plan to use it to invoke SageMaker APIs and pass the same role
                when calling the <code class="code">CreateTrainingJob</code> and <code class="code">CreateModel</code> APIs,
                attach the following permissions policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "sagemaker:*",
                "ecr:GetAuthorizationToken",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage",
                "ecr:BatchCheckLayerAvailability",
                "ecr:SetRepositoryPolicy",
                "ecr:CompleteLayerUpload",
                "ecr:BatchDeleteImage",
                "ecr:UploadLayerPart",
                "ecr:DeleteRepositoryPolicy",
                "ecr:InitiateLayerUpload",
                "ecr:DeleteRepository",
                "ecr:PutImage",
                "ecr:CreateRepository",
                "cloudwatch:PutMetricData",
                "cloudwatch:GetMetricData",
                "cloudwatch:GetMetricStatistics",
                "cloudwatch:ListMetrics",
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:DescribeLogStreams",
                "logs:PutLogEvents",
                "logs:GetLogEvents",
                "s3:CreateBucket",
                "s3:ListBucket",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObject",
                "robomaker:CreateSimulationApplication",
                "robomaker:DescribeSimulationApplication",
                "robomaker:DeleteSimulationApplication",
                "robomaker:CreateSimulationJob",
                "robomaker:DescribeSimulationJob",
                "robomaker:CancelSimulationJob",
                "ec2:CreateVpcEndpoint",
                "ec2:DescribeRouteTables",
                "elasticfilesystem:DescribeMountTargets"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "codecommit:GitPull",
                "codecommit:GitPush"
            ],
            "Resource": [
                "arn:aws:codecommit:*:*:*sagemaker*",
                "arn:aws:codecommit:*:*:*SageMaker*",
                "arn:aws:codecommit:*:*:*Sagemaker*"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:PassRole"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "iam:PassedToService": "sagemaker.amazonaws.com"
                }
            }
        }
    ]
}</code></pre>
            <p>To tighten the permissions, limit them to specific Amazon S3 and Amazon ECR resources, by
                restricting <code class="code">"Resource": "*"</code>, as follows:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "sagemaker:*",
                "ecr:GetAuthorizationToken",
                "cloudwatch:PutMetricData",
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:DescribeLogStreams",
                "logs:PutLogEvents",
                "logs:GetLogEvents"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:PassRole"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "iam:PassedToService": "sagemaker.amazonaws.com"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::inputbucket"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>/<code class="replaceable">object1</code>",
                "arn:aws:s3:::<code class="replaceable">outputbucket</code>/<code class="replaceable">path</code>",
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>/<code class="replaceable">object2</code>",
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>/<code class="replaceable">object3</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": [
                "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo1</code>",
                "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo2</code>",
                "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo3</code>"
            ]
        }
    ]
}</code></pre>
            <p>If you plan to access other resources, such as Amazon DynamoDB or Amazon Relational Database Service, add the
                relevant permissions to this policy.</p>
            <p>In the preceding policy, you scope the policy as follows:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Scope the <code class="code">s3:ListBucket</code> permission to the specific bucket
                        that you specify as
                            <code class="code">InputDataConfig.DataSource.S3DataSource.S3Uri</code> in a
                            <code class="code">CreateTrainingJob</code> request.</p>
                </li><li class="listitem">
                    <p>Scope <code class="code">s3:GetObject </code>, <code class="code">s3:PutObject</code>, and
                            <code class="code">s3:DeleteObject</code> permissions as follows:</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>Scope to the following values that you specify in a
                                    <code class="code">CreateTrainingJob</code> request:</p>
                            <p><code class="code">InputDataConfig.DataSource.S3DataSource.S3Uri</code></p>
                            <p><code class="code">OutputDataConfig.S3OutputPath</code></p>
                        </li><li class="listitem">
                            <p>Scope to the following values that you specify in a
                                    <code class="code">CreateModel</code> request:</p>
                            <p><code class="code">PrimaryContainer.ModelDataUrl</code></p>
                            <p><code class="code">SuplementalContainers.ModelDataUrl</code></p>
                        </li></ul></div>
                </li><li class="listitem">
                    <p>Scope <code class="code">ecr</code> permissions as follows:</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>Scope to the <code class="code">AlgorithmSpecification.TrainingImage</code>
                                value that you specify in a <code class="code">CreateTrainingJob</code>
                                request.</p>
                        </li><li class="listitem">
                            <p>Scope to the <code class="code">PrimaryContainer.Image</code> value that you
                                specify in a <code class="code">CreateModel</code> request:</p>
                        </li></ul></div>
                </li></ul></div>
            <p>The <code class="code">cloudwatch</code> and <code class="code">logs</code> actions are applicable for "*"
                resources. For more information, see <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/iam-access-control-overview-cw.html#CloudWatch_ARN_Format">CloudWatch Resources and Operations</a> in the Amazon CloudWatch User Guide.</p>
            <p></p>
            
            
         
            <h2 id="sagemaker-roles-createhyperparametertiningjob-perms">CreateHyperParameterTuningJob API: Execution Role Permissions</h2>
            <p>For an execution role that you can pass in a
                    <code class="code">CreateHyperParameterTuningJob</code> API request, you can attach the
                following permission policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "s3:GetObject",
                "s3:PutObject",
                "s3:ListBucket",
                "ecr:GetAuthorizationToken",
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
            <p>Instead of the specifying <code class="code">"Resource": "*"</code>, you could scope these
                permissions to specific Amazon S3, Amazon ECR, and Amazon CloudWatch Logs resources:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "ecr:GetAuthorizationToken"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>/<code class="replaceable">object</code>",
                "arn:aws:s3:::<code class="replaceable">outputbucket</code>/<code class="replaceable">path</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo</code>"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams"
            ],
            "Resource": "arn:aws:logs:*:*:log-group:/aws/sagemaker/TrainingJobs*"
        }
    ]
}
</code></pre>
            <p>If the training container associated with the hyperparameter tuning job needs to
                access other data sources, such as DynamoDB or Amazon RDS resources, add relevant
                permissions to this policy.</p>
            <p>In the preceding policy, you scope the policy as follows:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Scope the <code class="code">s3:ListBucket</code> permission to a specific bucket that
                        you specify as the
                            <code class="code">InputDataConfig.DataSource.S3DataSource.S3Uri</code> in a
                            <code class="code">CreateTrainingJob</code> request.</p>
                </li><li class="listitem">
                    <p>Scope the <code class="code">s3:GetObject </code>and <code class="code">s3:PutObject</code>
                        permissions to the following objects that you specify in the input and
                        output data configuration in a <code class="code">CreateHyperParameterTuningJob</code>
                        request:</p>
                    <p><code class="code">InputDataConfig.DataSource.S3DataSource.S3Uri</code></p>
                    <p><code class="code">OutputDataConfig.S3OutputPath</code></p>
                </li><li class="listitem">
                    <p>Scope Amazon ECR permissions to the registry path
                            (<code class="code">AlgorithmSpecification.TrainingImage</code>) that you specify in
                        a <code class="code">CreateHyperParameterTuningJob</code> request.</p>
                </li><li class="listitem">
                    <p>Scope Amazon CloudWatch Logs permissions to log group of SageMaker training jobs.</p>
                </li></ul></div>
            <p>The <code class="code">cloudwatch</code> actions are applicable for "*" resources. For more
                information, see <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/iam-access-control-overview-cw.html#CloudWatch_ARN_Format">CloudWatch Resources and Operations</a> in the Amazon CloudWatch User Guide.</p>
            <p>If you specify a private VPC for your hyperparameter tuning job, add the following
                permissions:</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "ec2:CreateNetworkInterface",
        "ec2:CreateNetworkInterfacePermission",
        "ec2:DeleteNetworkInterface",
        "ec2:DeleteNetworkInterfacePermission",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeVpcs",
        "ec2:DescribeDhcpOptions",
        "ec2:DescribeSubnets",
        "ec2:DescribeSecurityGroups"
    ]
}</code></pre>
            <p>If your input is encrypted using server-side encryption with an AWS KMS–managed
                key (SSE-KMS), add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "kms:Decrypt"
    ]
}</code></pre>
            <p>If you specify a KMS key in the output configuration of your hyperparameter tuning
                job, add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:Encrypt"
    ]
}</code></pre>
            <p>If you specify a volume KMS key in the resource configuration of your
                hyperparameter tuning job, add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:CreateGrant"
    ]
}</code></pre>
         
            <h2 id="sagemaker-roles-createprocessingjob-perms">CreateProcessingJob API:
                    Execution Role Permissions</h2>
            <p>For an execution role that you can pass in a <code class="code">CreateProcessingJob</code> API
                request, you can attach the following permission policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "s3:GetObject",
                "s3:PutObject",
                "s3:ListBucket",
                "ecr:GetAuthorizationToken",
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
            <p>Instead of the specifying <code class="code">"Resource": "*"</code>, you could scope these
                permissions to specific Amazon S3 and Amazon ECR resources:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "ecr:GetAuthorizationToken"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>/<code class="replaceable">object</code>",
                "arn:aws:s3:::<code class="replaceable">outputbucket</code>/<code class="replaceable">path</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo</code>"
        }
    ]
}</code></pre>
            <p>If <code class="code">CreateProcessingJob.AppSpecification.ImageUri</code> needs to access
                other data sources, such as DynamoDB or Amazon RDS resources, add relevant permissions to
                this policy.</p>
            <p>In the preceding policy, you scope the policy as follows:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Scope the <code class="code">s3:ListBucket</code> permission to a specific bucket that
                        you specify as the <code class="code">ProcessingInputs</code> in a
                            <code class="code">CreateProcessingJob</code> request.</p>
                </li><li class="listitem">
                    <p>Scope the <code class="code">s3:GetObject </code>and <code class="code">s3:PutObject</code>
                        permissions to the objects that will be downloaded or uploaded in the
                            <code class="code">ProcessingInputs</code> and <code class="code">ProcessingOutputConfig</code> in
                        a <code class="code">CreateProcessingJob</code> request.</p>
                    
                </li><li class="listitem">
                    <p>Scope Amazon ECR permissions to the registry path
                            (<code class="code">AppSpecification.ImageUri</code>) that you specify in a
                            <code class="code">CreateProcessingJob</code> request.</p>
                </li></ul></div>
            <p>The <code class="code">cloudwatch</code> and <code class="code">logs</code> actions are applicable for "*"
                resources. For more information, see <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/iam-access-control-overview-cw.html#CloudWatch_ARN_Format">CloudWatch Resources and Operations</a> in the Amazon CloudWatch User Guide.</p>
            <p>If you specify a private VPC for your processing job, add the following
                permissions. Don't scope in the policy with any conditions or resource filters.
                Otherwise, the validation checks that occur during the creation of the processing
                job fail.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "ec2:CreateNetworkInterface",
        "ec2:CreateNetworkInterfacePermission",
        "ec2:DeleteNetworkInterface",
        "ec2:DeleteNetworkInterfacePermission",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeVpcs",
        "ec2:DescribeDhcpOptions",
        "ec2:DescribeSubnets",
        "ec2:DescribeSecurityGroups"
    ]
}</code></pre>
            <p>If your input is encrypted using server-side encryption with an AWS KMS–managed
                key (SSE-KMS), add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "kms:Decrypt"
    ]
}</code></pre>
            <p>If you specify a KMS key in the output configuration of your processing job, add
                the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:Encrypt"
    ]
}</code></pre>
            <p>If you specify a volume KMS key in the resource configuration of your processing
                job, add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:CreateGrant"
    ]
}</code></pre>
         
            <h2 id="sagemaker-roles-createtrainingjob-perms">CreateTrainingJob API:
                    Execution Role Permissions</h2>
            <p>For an execution role that you can pass in a <code class="code">CreateTrainingJob</code> API
                request, you can attach the following permission policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "s3:GetObject",
                "s3:PutObject",
                "s3:ListBucket",
                "ecr:GetAuthorizationToken",
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
            <p>Instead of the specifying <code class="code">"Resource": "*"</code>, you could scope these
                permissions to specific Amazon S3 and Amazon ECR resources:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "ecr:GetAuthorizationToken"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>/<code class="replaceable">object</code>",
                "arn:aws:s3:::<code class="replaceable">outputbucket</code>/<code class="replaceable">path</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo</code>"
        }
    ]
}
</code></pre>
            <p>If <code class="code">CreateTrainingJob.AlgorithSpecifications.TrainingImage</code> needs to
                access other data sources, such as DynamoDB or Amazon RDS resources, add relevant
                permissions to this policy.</p>
            <p>In the preceding policy, you scope the policy as follows:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Scope the <code class="code">s3:ListBucket</code> permission to a specific bucket that
                        you specify as the
                            <code class="code">InputDataConfig.DataSource.S3DataSource.S3Uri</code> in a
                            <code class="code">CreateTrainingJob</code> request.</p>
                </li><li class="listitem">
                    <p>Scope the <code class="code">s3:GetObject </code>and <code class="code">s3:PutObject</code>
                        permissions to the following objects that you specify in the input and
                        output data configuration in a <code class="code">CreateTrainingJob</code>
                        request:</p>
                    <p><code class="code">InputDataConfig.DataSource.S3DataSource.S3Uri</code></p>
                    <p><code class="code">OutputDataConfig.S3OutputPath</code></p>
                </li><li class="listitem">
                    <p>Scope Amazon ECR permissions to the registry path
                            (<code class="code">AlgorithmSpecification.TrainingImage</code>) that you specify in
                        a <code class="code">CreateTrainingJob</code> request.</p>
                </li></ul></div>
            <p>The <code class="code">cloudwatch</code> and <code class="code">logs</code> actions are applicable for "*"
                resources. For more information, see <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/iam-access-control-overview-cw.html#CloudWatch_ARN_Format">CloudWatch Resources and Operations</a> in the Amazon CloudWatch User Guide.</p>
            <p>If you specify a private VPC for your training job, add the following
                permissions:</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
      "ec2:CreateNetworkInterface",
      "ec2:CreateNetworkInterfacePermission",
      "ec2:DeleteNetworkInterface",
      "ec2:DeleteNetworkInterfacePermission",
      "ec2:DescribeNetworkInterfaces",
      "ec2:DescribeVpcs",
      "ec2:DescribeDhcpOptions",
      "ec2:DescribeSubnets",
      "ec2:DescribeSecurityGroups"
    ]
}</code></pre>
            <p>If your input is encrypted using server-side encryption with an AWS KMS–managed
                key (SSE-KMS), add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "kms:Decrypt"
    ]
}</code></pre>
            <p>If you specify a KMS key in the output configuration of your training job, add the
                following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:Encrypt"
    ]
}</code></pre>
            <p>If you specify a volume KMS key in the resource configuration of your training
                job, add the following permissions:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
    "kms:CreateGrant"
    ]
}</code></pre>
         
            <h2 id="sagemaker-roles-createmodel-perms">CreateModel API: Execution Role
                    Permissions</h2>
            <p>For an execution role that you can pass in a <code class="code">CreateModel</code> API request,
                you can attach the following permission policy to the role:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "s3:GetObject",
                "s3:ListBucket",
                "ecr:GetAuthorizationToken",
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
            <p>Instead of the specifying <code class="code">"Resource": "*"</code>, you can scope these
                permissions to specific Amazon S3 and Amazon ECR resources:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "cloudwatch:PutMetricData",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:DescribeLogStreams",
                "ecr:GetAuthorizationToken"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">inputbucket</code>/<code class="replaceable">object</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
            ],
            "Resource": [
                "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo</code>",
                "arn:aws:ecr:<code class="replaceable">region</code>::repository/<code class="replaceable">my-repo</code>"
             ]
        }
    ]
}
</code></pre>
            <p>If <code class="code">CreateModel.PrimaryContainer.Image</code> need to access other data
                sources, such as Amazon DynamoDB or Amazon RDS resources, add relevant permissions
                to this policy.</p>
            <p>In the preceding policy, you scope the policy as follows:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Scope S3 permissions to objects that you specify in the
                            <code class="code">PrimaryContainer.ModelDataUrl</code> in a <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateModel.html"><code class="code">CreateModel</code></a> request.</p>
                </li><li class="listitem">
                    <p>Scope Amazon ECR permissions to a specific registry path that you specify as
                        the <code class="code">PrimaryContainer.Image</code> and
                            <code class="code">SecondaryContainer.Image</code> in a <code class="code">CreateModel</code>
                        request.</p>
                </li></ul></div>
            <p>The <code class="code">cloudwatch</code> and <code class="code">logs</code> actions are applicable for "*"
                resources. For more information, see <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/iam-access-control-overview-cw.html#CloudWatch_ARN_Format">CloudWatch Resources and Operations</a> in the Amazon CloudWatch User Guide.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you plan to use the <a href="deployment-guardrails.html">SageMaker deployment
                        guardrails feature</a> for model deployment in production, ensure that
                    your execution role has permission to perform the
                        <code class="code">cloudwatch:DescribeAlarms</code> action on your auto-rollback
                    alarms.</p></div></div>
            <p>If you specify a private VPC for your model, add the following permissions:</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": [
        "ec2:CreateNetworkInterface",
        "ec2:CreateNetworkInterfacePermission",
        "ec2:DeleteNetworkInterface",
        "ec2:DeleteNetworkInterfacePermission",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeVpcs",
        "ec2:DescribeDhcpOptions",
        "ec2:DescribeSubnets",
        "ec2:DescribeSecurityGroups"
    ]
}</code></pre>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./security-confused-deputy-prevention.html">Cross-Service Confused Deputy Prevention</div><div id="next" class="next-link" accesskey="n" href="./sagemaker-geospatial-roles.html">SageMaker geospatial capabilities roles</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/sagemaker-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/sagemaker-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
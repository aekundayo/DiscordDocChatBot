<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Set up connections to data sources with OAuth - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="canvas-setting-up-oauth" /><meta name="default_state" content="canvas-setting-up-oauth" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="canvas-setting-up-oauth.html" /><meta name="description" content="Connect to your data stored in Snowflake and Salesforce Data Cloud using OAuth so that you don't have to share passwords." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="canvas-setting-up-oauth.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="de" /><link rel="alternative" href="canvas-setting-up-oauth.html" hreflang="en-us" /><link rel="alternative" href="canvas-setting-up-oauth.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/canvas-setting-up-oauth.html" hreflang="zh-tw" /><link rel="alternative" href="canvas-setting-up-oauth.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Set up connections to data sources with OAuth" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Set up connections to data sources with OAuth - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#canvas-setting-up-oauth" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-setting-up-oauth.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-setting-up-oauth.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-setting-up-oauth.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Use machine learning environments offered by SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/machine-learning-environments.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon SageMaker Canvas",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/canvas.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Setting Up and Managing Amazon SageMaker Canvas (for IT Administrators)",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/canvas-setting-up.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Set up connections to data sources with OAuth",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/canvas-setting-up.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#canvas-setting-up-oauth" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="canvas-setting-up-oauth.html#canvas-setting-up-oauth-salesforce">Set up OAuth for Salesforce Data Cloud</a><a href="canvas-setting-up-oauth.html#canvas-setting-up-oauth-snowflake">Set up OAuth for Snowflake</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="canvas-setting-up-oauth">Set up connections to data sources with OAuth</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The following section describes the steps you must take to set up OAuth connections to
        data sources from SageMaker Canvas. <a href="https://oauth.net/2/" rel="noopener noreferrer" target="_blank"><span>OAuth</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> is a common authentication platform for granting access to
        resources without sharing passwords. With OAuth, you can quickly connect to your data from
        Canvas and import it for building models. Canvas currently supports OAuth for Snowflake and
        Salesforce Data Cloud.
    </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can only establish one OAuth connection for each data source.</p></div></div>
        <h2 id="canvas-setting-up-oauth-salesforce">Set up OAuth for Salesforce Data Cloud</h2>
        <p>To set up OAuth for Salesforce Data Cloud, follow these general steps:</p>
        <div class="procedure"><ol><li><p>Sign in to Salesforce Data Cloud.</p></li><li>
                <p>In Salesforce Data Cloud, create a new app connection and do the following:</p>
                <ol><li><p>Enable OAuth settings.</p></li><li><p>When prompted for a callback URL (or the URL of the resource accessing your data),
                        specify the URL for your Canvas application. The Canvas application URL follows this format:
                        <code class="code">https://<code class="replaceable">&lt;domain-id&gt;</code>.studio.<code class="replaceable">&lt;region&gt;</code>.sagemaker.aws/canvas/default</code></p></li><li><p>Copy the consumer key and secret.</p></li><li><p>Copy your authorization URL and token URL.</p></li></ol>
            </li></ol></div>
        <p>For more detailed instructions about performing the preceding tasks in Salesforce Data Cloud, see
            <a href="data-wrangler-import.html#data-wrangler-import-salesforce-data-cloud">Import data from Salesforce Data Cloud</a>
                in the Data Wrangler documentation for importing data from Salesforce Data Cloud.</p>
        <p>After enabling access from Salesforce Data Cloud and getting your connection information, you
            must create an <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html">AWS Secrets Manager</a> secret to store the information and add it to your
            Amazon SageMaker Domain or user profile. Note that you can add a secret to both a Domain and
            user profile, but Canvas looks for secrets in the user profile first.</p>
        <p>To add a secret to your Domain or user profile, do the following:</p>
        <div class="procedure"><ol><li>
                            <p>Go to the <a href="https://console.aws.amazon.com/sagemaker" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                    </li><li>
                            <p>Choose <b>Domains</b> in the navigation pane.</p>
                    </li><li>
                            <p>From the list of <b>Domains</b>, choose your Domain.</p>
                        <ol><li>
                                <p>If adding your secret to your Domain, do the following:</p>
                                <ol><li>
                                        <p>Choose the Domain.</p>
                                    </li><li>
                                        <p>On the <b>Domain settings</b> page, choose the <b>Domain settings</b>
                                            tab.</p>
                                    </li><li>
                                        <p>Choose <b>Edit</b>.</p>
                                    </li></ol>
                            </li><li>
                                <p>If adding the secret to your user profile, do the
                                    following:</p>
                                <ol><li>
                                        <p>Choose the user’s Domain.</p>
                                    </li><li>
                                        <p>On the <b>Domain settings</b> page, choose the user
                                            profile.</p>
                                    </li><li>
                                        <p>On the <b>User Details</b> page,
                                            choose <b>Edit</b>.</p>
                                    </li></ol>
                            </li></ol>
                    </li><li>
                            <p>In the navigation pane, choose <b>Canvas settings</b>.</p>
                    </li><li>
                            <p>For <b>OAuth settings</b>, choose
                                    <b>Add OAuth configuration</b>.</p>
                    </li><li>
                            <p>For <b>Data source</b>, select <b>Salesforce Data Cloud</b>.</p>
                    </li><li>
                            <p>For <b>Secret Setup</b>, select
                                    <b>Create a new secret</b>.
                                Alternatively, if you already created an AWS Secrets Manager secret
                                with your credentials, enter the ARN for the secret. If creating a
                                new secret, do the following:</p>
                        <ol><li>
                                <p>For <b>Identity Provider</b>, select
                                    <b>SALESFORCE</b>.</p>
                            </li><li>
                                <p>For <b>Client ID</b>, <b>Client Secret</b>, <b>Authorization URL</b>, and <b>Token URL</b>, enter all of the information you
                                    gathered from Salesforce Data Cloud in the previous procedure.</p>
                            </li></ol>
                    </li><li>
                            <p>Save your Domain or user profile settings.</p>
                    </li></ol></div>
        <p>You should now be able to create a connection to your data in Salesforce Data Cloud from Canvas.</p>
     
        <h2 id="canvas-setting-up-oauth-snowflake">Set up OAuth for Snowflake</h2>
        <p>To set up authentication for Snowflake, Canvas supports identity providers that you can use instead of having users directly enter their credentials into Canvas.</p>
        <p>The following are links to the Snowflake documentation for the identity providers that Canvas supports:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.snowflake.com/en/user-guide/oauth-azure.html" rel="noopener noreferrer" target="_blank"><span>Azure AD</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p></li><li class="listitem"><p><a href="https://docs.snowflake.com/en/user-guide/oauth-okta.html" rel="noopener noreferrer" target="_blank"><span>Okta</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p></li><li class="listitem"><p><a href="https://docs.snowflake.com/en/user-guide/oauth-pingfed.html" rel="noopener noreferrer" target="_blank"><span>Ping Federate</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p></li></ul></div>
        <p>The following process describes the general steps you must take. For more detailed instructions about performing these steps,
            you can refer to the <a href="data-wrangler-import.html#data-wrangler-snowflake-oauth-setup">Setting up Snowflake OAuth Access</a>
            section in the Data Wrangler documentation for importing data from Snowflake.</p>
        <p>To set up OAuth for Snowflake, do the following:</p>
        <div class="procedure"><ol><li><p>Register Canvas as an application with the identity provider. This requires specifying a redirect URL to Canvas, which should follow this format:
                <code class="code">https://<code class="replaceable">&lt;domain-id&gt;</code>.studio.<code class="replaceable">&lt;region&gt;</code>.sagemaker.aws/canvas/default</code></p></li><li><p>Within the identity provider, create a server or API that sends OAuth tokens to Canvas so that Canvas can access Snowflake.
                When setting up the server, use the authorization code and refresh token grant types, specify the access token lifetime, and
                set a refresh token policy. Additionally, within the External OAuth Security Integration for Snowflake, enable <code class="code">external_oauth_any_role_mode</code>.</p></li><li><p>Get the following information from the identity provider: token URL, authorization URL,
                client ID, client secret. For Azure AD, also retrieve the OAuth scope credentials.</p></li><li>
                <p>Store the information retrieved in the previous step in an AWS Secrets Manager secret.</p>
                <ol><li>
                        <p>For Okta and Ping Federate, the secret should look like the following format:</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>"token_url":"https://identityprovider.com/oauth2/example-portion-of-URL-path/v2/token",
"client_id":"example-client-id", "client_secret":"example-client-secret", "identity_provider":"OKTA"|"PING_FEDERATE",
"authorization_url":"https://identityprovider.com/oauth2/example-portion-of-URL-path/v2/authorize"}</code></pre>
                    </li><li><p>For Azure AD, the secret should also include the OAuth scope credentials as the <code class="code">datasource_oauth_scope</code> field.</p></li></ol>
            </li></ol></div>
        
        <p>After configuring the identity provider and the secret, you
            must create an <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html">AWS Secrets Manager</a> secret to store the information and add it to your
            Amazon SageMaker Domain or user profile. Note that you can add a secret to both a Domain and
            user profile, but Canvas looks for secrets in the user profile first.</p>
        <p>To add a secret to your Domain or user profile, do the following:</p>
        <div class="procedure"><ol><li>
                <p>Go to the <a href="https://console.aws.amazon.com/sagemaker" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            </li><li>
                <p>Choose <b>Domains</b> in the navigation pane.</p>
            </li><li>
                <p>From the list of <b>Domains</b>, choose your Domain.</p>
                <ol><li>
                        <p>If adding your secret to your Domain, do the following:</p>
                        <ol><li>
                                <p>Choose the Domain.</p>
                            </li><li>
                                <p>On the <b>Domain settings</b> page, choose the <b>Domain settings</b>
                                    tab.</p>
                            </li><li>
                                <p>Choose <b>Edit</b>.</p>
                            </li></ol>
                    </li><li>
                        <p>If adding the secret to your user profile, do the
                            following:</p>
                        <ol><li>
                                <p>Choose the user’s Domain.</p>
                            </li><li>
                                <p>On the <b>Domain settings</b> page, choose the user
                                    profile.</p>
                            </li><li>
                                <p>On the <b>User Details</b> page,
                                    choose <b>Edit</b>.</p>
                            </li></ol>
                    </li></ol>
            </li><li>
                <p>In the navigation pane, choose <b>Canvas settings</b>.</p>
            </li><li>
                <p>For <b>OAuth settings</b>, choose
                    <b>Add OAuth configuration</b>.</p>
            </li><li>
                <p>For <b>Data source</b>, select <b>Snowflake</b>.</p>
            </li><li>
                <p>For <b>Secret Setup</b>, select
                    <b>Create a new secret</b>.
                    Alternatively, if you already created an AWS Secrets Manager secret
                    with your credentials, enter the ARN for the secret. If creating a
                    new secret, do the following:</p>
                <ol><li>
                        <p>For <b>Identity Provider</b>, select
                            <b>SNOWFLAKE</b>.</p>
                    </li><li>
                        <p>For <b>Client ID</b>, <b>Client Secret</b>, <b>Authorization URL</b>, and <b>Token URL</b>, enter all of the information you
                            gathered from the identity provider in the previous procedure.</p>
                    </li></ol>
            </li><li>
                <p>Save your Domain or user profile settings.</p>
            </li></ol></div>
        <p>You should now be able to create a connection to your data in Snowflake from Canvas.</p>
        
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./canvas-vpc.html">Configure Amazon SageMaker Canvas in a VPC without internet access</div><div id="next" class="next-link" accesskey="n" href="./canvas-ready-to-use-models.html">Use Ready-to-use models</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-setting-up-oauth.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-setting-up-oauth.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Attach EI to a Notebook Instance - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="ei-notebook-instance" /><meta name="default_state" content="ei-notebook-instance" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="ei-notebook-instance.html" /><meta name="description" content="To test and evaluate inference performance using EI, you can attach EI to a notebook instance when you create or update a notebook instance. You can then use EI in local mode to host a model at an endpoint hosted on the notebook instance. You should test various sizes of notebook instances and EI accelerators to evaluate the configuration that works best for your use case." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="ei-notebook-instance.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="de" /><link rel="alternative" href="ei-notebook-instance.html" hreflang="en-us" /><link rel="alternative" href="ei-notebook-instance.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/ei-notebook-instance.html" hreflang="zh-tw" /><link rel="alternative" href="ei-notebook-instance.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Attach EI to a Notebook Instance" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Attach EI to a Notebook Instance - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#ei-notebook-instance" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ei-notebook-instance.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ei-notebook-instance.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ei-notebook-instance.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,inference,deploy model,endpoint,prediction,ML application,serverless machine learning,multi model deployment,inference pipelines,ML model" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Deploy models for inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deploy-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Use Amazon SageMaker Elastic Inference (EI)",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/ei.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Attach EI to a Notebook Instance",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/ei.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#ei-notebook-instance" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="ei-notebook-instance.html#ei-notebook-instance-console">Setting up to use Elastic Inference </a><a href="ei-notebook-instance.html#ei-notebook-instance-local">Using EI in Local Mode in SageMaker</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="ei-notebook-instance">Attach EI to a Notebook Instance</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To test and evaluate inference performance using EI, you can attach EI to a notebook
            instance when you create or update a notebook instance. You can then use EI in local
            mode to host a model at an endpoint hosted on the notebook instance. You should test
            various sizes of notebook instances and EI accelerators to evaluate the configuration
            that works best for your use case.</p>
            <h2 id="ei-notebook-instance-console">Set Up to Use EI </h2>
            <p>To use EI locally in a notebook instance, create a notebook instance with an EI
                instance.</p>
            <div class="procedure"><h6>To create a notebook instance with an EI instance</h6><ol><li>
                    <p>Open the Amazon SageMaker console at <a href="https://console.aws.amazon.com/sagemaker/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/sagemaker/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                </li><li>
                    <p>In the navigation pane, choose <b>Notebook
                        instances</b>.</p>
                </li><li>
                    <p>Choose <b>Create notebook instance</b>.</p>
                </li><li>
                    <p>For <b>Notebook instance name</b>, provide a unique name for
                        your notebook instance.</p>
                </li><li>
                    <p>For <b>notebook instance type</b>, choose a CPU instance
                        such as ml.t2.medium.</p>
                </li><li>
                    <p>For <b>Elastic Inference (EI)</b>, choose an instance from
                        the list, such as <b>ml.eia2.medium</b>.</p>
                </li><li>
                    <p>For <b>IAM role</b>, choose an IAM role that has the
                        required permissions to use SageMaker and EI.</p>
                </li><li>
                    <p>(Optional) For <b>VPC - Optional</b>, if you want the
                        notebook instance to use a VPC, choose one from the available list.
                        Otherwise, leave it as <b>No VPC</b>. If you use a VPC follow
                        the instructions at <a href="ei-setup.html#ei-setup-custom-vpc">Use a Custom VPC to Connect to EI</a>.</p>
                </li><li>
                    <p>(Optional) For <b>Lifecycle configuration - optional</b>,
                        either leave it as <b>No configuration</b> or choose a
                        lifecycle configuration. For more information, see <a href="notebook-lifecycle-config.html">Customize a Notebook Instance Using a
                Lifecycle Configuration Script</a>.</p>
                </li><li>
                    <p>(Optional) For <b>Encryption key - optional</b>, Optional)
                        If you want SageMaker to use an AWS Key Management Service (AWS KMS) key to encrypt data in the ML
                        storage volume attached to the notebook instance, specify the key.</p>
                </li><li>
                    <p>(Optional) For <b>Volume Size In GB - optional</b>, leave
                        the default value of 5.</p>
                </li><li>
                    <p>(Optional) For <b>Tags</b>, add tags to the notebook
                        instance. A tag is a label you assign to help manage your notebook
                        instances. A tag consists of a key and a value, both of which you
                        define.</p>
                </li><li>
                    <p>Choose <b>Create Notebook Instance</b>.</p>
                </li></ol></div>
            <p>After you create your notebook instance with EI attached, you can create a Jupyter
                notebook and set up an EI endpoint that is hosted locally on the notebook
                instance.</p>
        <div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="ei-notebook-instance.html#ei-notebook-instance-local">Use EI in Local Mode in SageMaker</a></li></ul></div>
            <h2 id="ei-notebook-instance-local">Use EI in Local Mode in SageMaker</h2>
            <p>To use EI locally in an endpoint hosted on a notebook instance, use local mode
                with the <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> versions of either the TensorFlow, MXNet, or PyTorch
                estimators or models. For more information about local mode support in the SageMaker
                Python SDK, see <a href="https://github.com/aws/sagemaker-python-sdk#sagemaker-python-sdk-overview" rel="noopener noreferrer" target="_blank"><span>https://github.com/aws/sagemaker-python-sdk#sagemaker-python-sdk-overview</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            <div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="ei-notebook-instance.html#ei-notebook-instance-local-tensorflow">Use EI in Local Mode
                        with SageMaker TensorFlow Estimators and Models</a></li><li><a href="ei-notebook-instance.html#ei-notebook-instance-local-mxnet">Use EI in Local Mode with
                        SageMaker Apache MXNet Estimators and Models</a></li><li><a href="ei-notebook-instance.html#ei-notebook-instance-local-pytorch">Use EI in Local Mode with
                        SageMaker PyTorch Estimators and Models</a></li></ul></div>
             
                <h3 id="ei-notebook-instance-local-tensorflow">Use EI in Local Mode
                        with SageMaker TensorFlow Estimators and Models</h3>
                <p>To use EI with TensorFlow in local mode, specify <code class="code">local</code> for
                        <code class="code">instance_type</code> and <code class="code">local_sagemaker_notebook</code> for
                        <code class="code">accelerator_type</code> when you call the <code class="code">deploy</code> method
                    of an estimator or a model object. For more information about <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                    TensorFlow estimators and models, see <a href="https://sagemaker.readthedocs.io/en/stable/frameworks/tensorflow/index.html" rel="noopener noreferrer" target="_blank"><span>https://sagemaker.readthedocs.io/en/stable/frameworks/tensorflow/index.html</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                <p>The following code shows how to use local mode with an estimator object. To
                    call the <code class="code">deploy</code> method, you must have previously either:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Trained the model by calling the <code class="code">fit</code> method of an
                            estimator.</p>
                    </li><li class="listitem">
                        <p>Pass a model artifact when you initialize the model object.</p>
                    </li></ul></div>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python "># Deploys the model to a local endpoint
tf_predictor = tf_model.deploy(initial_instance_count=1,
                               instance_type='local',
                               accelerator_type='local_sagemaker_notebook')</code></pre>

             
             
                <h3 id="ei-notebook-instance-local-mxnet">Use EI in Local Mode with
                        SageMaker Apache MXNet Estimators and Models</h3>
                <p>To use EI with MXNet in local mode, specify <code class="code">local</code> for
                        <code class="code">instance_type</code> and <code class="code">local_sagemaker_notebook</code> for
                        <code class="code">accelerator_type</code> when you call the <code class="code">deploy</code> method
                    of an estimator or a model object. For more information about <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                    MXNet estimators and models, see <a href="https://sagemaker.readthedocs.io/en/stable/frameworks/mxnet/index.html" rel="noopener noreferrer" target="_blank"><span>https://sagemaker.readthedocs.io/en/stable/frameworks/mxnet/index.html</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
                <p>The following code shows how to use local mode with an estimator object. You
                    must have previously called the <code class="code">fit</code> method of the estimator to
                    train the model.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python "># Deploys the model to a local endpoint
mxnet_predictor = mxnet_estimator.deploy(initial_instance_count=1,
                                         instance_type='local',
                                         accelerator_type='local_sagemaker_notebook')</code></pre>
                <p>For a complete example of using EI in local mode with MXNet, see the sample
                    notebook at <a href="https://sagemaker-examples.readthedocs.io/en/latest/sagemaker-python-sdk/mxnet_mnist/mxnet_mnist_elastic_inference_local.html" rel="noopener noreferrer" target="_blank"><span>https://sagemaker-examples.readthedocs.io/en/latest/sagemaker-python-sdk/mxnet_mnist/mxnet_mnist_elastic_inference_local.html
                    </span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
             
             
                <h3 id="ei-notebook-instance-local-pytorch">Use EI in Local Mode with
                        SageMaker PyTorch Estimators and Models</h3>
                <p>To use EI with PyTorch in local mode, when you call the <code class="code">deploy</code>
                    method of an estimator or a model object, specify <code class="code">local</code> for
                        <code class="code">instance_type</code> and <code class="code">local_sagemaker_notebook</code> for
                        <code class="code">accelerator_type</code>. For more information about <a href="https://sagemaker.readthedocs.io" rel="noopener noreferrer" target="_blank"><span>Amazon SageMaker Python SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                    PyTorch estimators and models, see <a href="https://sagemaker.readthedocs.io/en/stable/frameworks/pytorch/index.html" rel="noopener noreferrer" target="_blank"><span>SageMaker PyTorch Estimators and Models </span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
                <p>The following code shows how to use local mode with an estimator object. You
                    must have previously called the <code class="code">fit</code> method of the estimator to
                    train the model.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python "># Deploys the model to a local endpoint
pytorch_predictor = pytorch_estimator.deploy(initial_instance_count=1,
                                             instance_type='local',
                                             accelerator_type='local_sagemaker_notebook')</code></pre>
             
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./ei-setup.html">Set Up to Use EI</div><div id="next" class="next-link" accesskey="n" href="./ei-endpoints.html">Endpoints with Elastic Inference</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ei-notebook-instance.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/ei-notebook-instance.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
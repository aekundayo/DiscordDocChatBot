<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Get compiled recommendations with Neo - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="inference-recommender-neo-compilation" /><meta name="default_state" content="inference-recommender-neo-compilation" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="inference-recommender-neo-compilation.html" /><meta name="description" content="Describes how to get endpoint recommendations that include Neo compilation, which can help optimize your model." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="inference-recommender-neo-compilation.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="de" /><link rel="alternative" href="inference-recommender-neo-compilation.html" hreflang="en-us" /><link rel="alternative" href="inference-recommender-neo-compilation.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/inference-recommender-neo-compilation.html" hreflang="zh-tw" /><link rel="alternative" href="inference-recommender-neo-compilation.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Get compiled recommendations with Neo" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Get compiled recommendations with Neo - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#inference-recommender-neo-compilation" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/inference-recommender-neo-compilation.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/inference-recommender-neo-compilation.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/inference-recommender-neo-compilation.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,inference,deploy model,endpoint,prediction,ML application,serverless machine learning,multi model deployment,inference pipelines,ML model,Inference Recommender optimize,Inference Recommender Neo,Inference Recommender compilation,Inference Recommender compile model" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Deploy models for inference",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/deploy-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon SageMaker Inference Recommender",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/inference-recommender.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Recommendation jobs",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/inference-recommender-recommendation-jobs.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Get compiled recommendations with Neo",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/inference-recommender-recommendation-jobs.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#inference-recommender-neo-compilation" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="inference-recommender-neo-compilation.html#inference-recommender-neo-compilation-get-started">Get started</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="inference-recommender-neo-compilation">Get compiled recommendations with Neo</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>In Inference Recommender, you can compile your model with Neo and get endpoint recommendations
                for your compiled model. <a href="neo.html">SageMaker Neo</a> is a service that can
                optimize your model for a target hardware platform (that is, a specific instance
                type or environment). Optimizing a model with Neo might improve the performance of
                your hosted model.</p><p>For Neo-supported frameworks and containers, Inference Recommender automatically suggests Neo-optimized recommendations.
                To be eligible for Neo compilation, your input must meet the following prerequisites:</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p>You are using a SageMaker owned <a href="https://docs.aws.amazon.com/deep-learning-containers/latest/devguide/what-is-dlc.html">DLC </a> or XGBoost container.</p></li><li class="listitem"><p>You are using a framework version supported by Neo. For the framework versions supported by Neo,
                    see <a href="neo-supported-cloud.html#neo-supported-cloud-instances">Cloud Instances</a> in the SageMaker Neo documentation.</p></li><li class="listitem">
                    <p>Neo requires that you provide a correct input data shape for your model. You can specify this data shape
                    as the <code class="code"><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_ModelInput.html#sagemaker-Type-ModelInput-DataInputConfig">DataInputConfig</a></code>
                    in the <code class="code"><a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateModelPackage.html#sagemaker-CreateModelPackage-request-InferenceSpecification">InferenceSpecification</a></code>
                    when you create a model package. For information about the correct data shapes for each framework, see
                    <a href="neo-compilation-preparing-model.html">Prepare Model for Compilation</a> in the SageMaker Neo documentation.</p>
                    <p>The following example shows how to specify the
                            <code class="code">DataInputConfig</code> field in the
                            <code class="code">InferenceSpecification</code>, where
                            <code class="code">data_input_configuration</code> is a variable that contains the
                        data shape in dictionary format (for example,
                            <code class="code"><span>{</span>'input':[1,1024,1024,3]}</code>).</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"InferenceSpecification": <span>{</span>
        "Containers": [
            <span>{</span>
                "Image": dlc_uri,
                "Framework": framework.upper(),
                "FrameworkVersion": framework_version,
                "NearestModelName": model_name,
                "ModelInput": <span>{</span>"DataInputConfig": data_input_configuration},
            }
        ],
        "SupportedContentTypes": input_mime_types,  # required, must be non-null
        "SupportedResponseMIMETypes": [],
        "SupportedRealtimeInferenceInstanceTypes": supported_realtime_inference_types,  # optional
    }</code></pre>
                </li></ul></div><p>If these conditions are met in your request, then Inference Recommender runs scenarios for both
                compiled and uncompiled versions of your model, giving you multiple recommendation
                combinations to choose from. You can compare the configurations for compiled and
                uncompiled versions of the same inference recommendation and determine which one
                best suits your use case. The recommendations are ranked by cost per
                inference.</p><p>To get the Neo compilation recommendations, you don’t have to do any additional configuration besides making sure that your input
                meets the above requirements. Inference Recommender automatically runs Neo compilation on your model if your input meets the requirements,
                and you’ll receive a response that includes Neo recommendations.</p><p>If you run into errors during your Neo compilation, see <a href="neo-troubleshooting-compilation.html">Troubleshoot Neo Compilation Errors</a>.</p><p>The following table is an example of a response you might get from an Inference Recommender job that includes recommendations for compiled models.
                If the <code class="code">InferenceSpecificationName</code> field is <code class="code">None</code>, then the recommendation is an uncompiled model.
                The last row, where the value for the <code class="code">InferenceSpecificationName</code> field is <code class="code">neo-00011122-2333-4445-5566-677788899900</code>,
                is for a model compiled with Neo. The value in the field is the name of the Neo job used to compile and optimize your model.</p><div class="table-container"><div class="table-contents"><table id="w714aac25c31c23c29c17"><thead>
                        <tr>
                            <th>EndpointName</th>
                            <th>InstanceType</th>
                            <th>InitialInstanceCount</th>
                            <th>EnvironmentParameters</th>
                            <th>CostPerHour</th>
                            <th>CostPerInference</th>
                            <th>MaxInvocations</th>
                            <th>ModelLatency</th>
                            <th>InferenceSpecificationName</th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1"><p>sm-epc-example-000111222</p></td>
                            <td tabindex="-1"><p>ml.c5.9xlarge</p></td>
                            <td tabindex="-1"><p>1</p></td>
                            <td tabindex="-1"><p>[]</p></td>
                            <td tabindex="-1"><p>1.836</p></td>
                            <td tabindex="-1"><p>9.15E-07</p></td>
                            <td tabindex="-1"><p>33456</p></td>
                            <td tabindex="-1"><p>7</p></td>
                            <td tabindex="-1"><p>None</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1"><p>sm-epc-example-111222333</p></td>
                            <td tabindex="-1"><p>ml.c5.2xlarge</p></td>
                            <td tabindex="-1"><p>1</p></td>
                            <td tabindex="-1"><p>[]</p></td>
                            <td tabindex="-1"><p>0.408</p></td>
                            <td tabindex="-1"><p>2.11E-07</p></td>
                            <td tabindex="-1"><p>32211</p></td>
                            <td tabindex="-1"><p>21</p></td>
                            <td tabindex="-1"><p>None</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1"><p>sm-epc-example-222333444</p></td>
                            <td tabindex="-1"><p>ml.c5.xlarge</p></td>
                            <td tabindex="-1"><p>1</p></td>
                            <td tabindex="-1"><p>[]</p></td>
                            <td tabindex="-1"><p>0.204</p></td>
                            <td tabindex="-1"><p>1.86E-07</p></td>
                            <td tabindex="-1"><p>18276</p></td>
                            <td tabindex="-1"><p>92</p></td>
                            <td tabindex="-1"><p>None</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1"><p>sm-epc-example-333444555</p></td>
                            <td tabindex="-1"><p>ml.c5.xlarge</p></td>
                            <td tabindex="-1"><p>1</p></td>
                            <td tabindex="-1"><p>[]</p></td>
                            <td tabindex="-1"><p>0.204</p></td>
                            <td tabindex="-1"><p>1.60E-07</p></td>
                            <td tabindex="-1"><p>21286</p></td>
                            <td tabindex="-1"><p>42</p></td>
                            <td tabindex="-1"><p>neo-00011122-2333-4445-5566-677788899900</p></td>
                        </tr>
                    </table></div></div>
                <h2 id="inference-recommender-neo-compilation-get-started">Get started</h2>
                <p>The general steps for creating an Inference Recommender job that includes Neo-optimized recommendations are as follows:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>Prepare your ML model for compilation. For more information, see <a href="neo-compilation-preparing-model.html">Prepare Model for Compilation</a> in the Neo documentation.</p></li><li class="listitem"><p>Package your model in a model archive (<code class="code">.tar.gz</code> file).</p></li><li class="listitem"><p>Create a sample payload archive.</p></li><li class="listitem"><p>Register your model in Model Registry.</p></li><li class="listitem"><p>Create an Inference Recommender job.</p></li><li class="listitem"><p>View the results of the Inference Recommender job and choose a configuration.</p></li><li class="listitem"><p>Debug compilation failures, if any. For more information, see <a href="neo-troubleshooting-compilation.html">Troubleshoot Neo Compilation Errors</a>.</p></li></ul></div>
                <p>For an example that demonstrates the previous workflow and how to get Neo-optimized recommendations using XGBoost,
                    see the following <a href="https://github.com/aws/amazon-sagemaker-examples/blob/main/sagemaker-inference-recommender/xgboost/xgboost-inference-recommender.ipynb" rel="noopener noreferrer" target="_blank"><span>example notebook</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                    For an example that show how to get Neo-optimized recommendations using TensorFlow,
                    see the following <a href="https://github.com/aws/amazon-sagemaker-examples/blob/main/sagemaker-inference-recommender/inference-recommender.ipynb" rel="noopener noreferrer" target="_blank"><span>example notebook</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./inference-recommender-existing-endpoint.html">Get an inference
                    recommendation for an existing endpoint</div><div id="next" class="next-link" accesskey="n" href="./inference-recommender-interpret-results.html">Interpret recommendation results</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/inference-recommender-neo-compilation.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/inference-recommender-neo-compilation.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Build Your Own Processing Container (Advanced Scenario) - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="build-your-own-processing-container" /><meta name="default_state" content="build-your-own-processing-container" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="build-your-own-processing-container.html" /><meta name="description" content="Build your own processing container for Amazon SageMaker Processing from scratch." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="build-your-own-processing-container.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="de" /><link rel="alternative" href="build-your-own-processing-container.html" hreflang="en-us" /><link rel="alternative" href="build-your-own-processing-container.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/build-your-own-processing-container.html" hreflang="zh-tw" /><link rel="alternative" href="build-your-own-processing-container.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Build Your Own Processing Container (Advanced Scenario)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Build Your Own Processing Container (Advanced Scenario) - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#build-your-own-processing-container" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/build-your-own-processing-container.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/build-your-own-processing-container.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/build-your-own-processing-container.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Process data",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/processing-job.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Use Your Own Processing Code",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/use-your-own-processing-code.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Build Your Own Processing Container (Advanced Scenario)",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/use-your-own-processing-code.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#build-your-own-processing-container" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="build-your-own-processing-container.html#byoc-run-image">How Amazon SageMaker Processing Runs Your Processing Container
                    Image</a><a href="build-your-own-processing-container.html#byoc-input-and-output">How Amazon SageMaker Processing Configures Input and Output For
                    Your Processing Container</a><a href="build-your-own-processing-container.html#byoc-logs-and-metrics">How Amazon SageMaker Processing Provides Logs and Metrics for Your
                    Processing Container</a><a href="build-your-own-processing-container.html#byoc-config">How Amazon SageMaker Processing Configures Your Processing Container</a><a href="build-your-own-processing-container.html#byoc-metadata">Save and Access Metadata Information About Your
                    Processing Job</a><a href="build-your-own-processing-container.html#byoc-run">Run Your Processing Container Using the SageMaker Python
                    SDK</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="build-your-own-processing-container">Build Your Own Processing
                Container (Advanced Scenario)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can provide Amazon SageMaker Processing with a Docker image that has your own code and dependencies to
            run your data processing, feature engineering, and model evaluation workloads. </p><p>The following example of a Dockerfile builds a container with the Python libraries
            scikit-learn and pandas, which you can run as a processing job. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">FROM python:3.7-slim-buster

# Install scikit-learn and pandas
RUN pip3 install pandas==0.25.3 scikit-learn==0.21.3

# Add a Python script and configure Docker to run it
ADD processing_script.py /
ENTRYPOINT ["python3", "/processing_script.py"]</code></pre><p>For an example of a processing script, see <a href="https://github.com/aws/amazon-sagemaker-examples/blob/main/sagemaker_processing/basic_sagemaker_data_processing/basic_sagemaker_processing.ipynb" rel="noopener noreferrer" target="_blank"><span>Get started with SageMaker Processing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><p>Build and push this Docker image to an Amazon Elastic Container Registry (Amazon ECR) repository and ensure that
            your SageMaker IAM role can pull the image from Amazon ECR. Then you can run this image on
            Amazon SageMaker Processing.</p>
            <h2 id="byoc-run-image">How Amazon SageMaker Processing Runs Your Processing Container
                    Image</h2>
            <p>Amazon SageMaker Processing runs your processing container image in a similar way as the following
                command, where <code class="code">AppSpecification.ImageUri</code> is the Amazon ECR image URI that
                you specify in a <code class="code">CreateProcessingJob</code> operation. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">docker run [AppSpecification.ImageUri]</code></pre>
            <p>This command runs the <code class="code">ENTRYPOINT</code> command configured in your Docker
                image. </p>
            <p>You can also override the entrypoint command in the image or give command-line
                arguments to your entrypoint command using the
                    <code class="code">AppSpecification.ContainerEntrypoint</code> and
                    <code class="code">AppSpecification.ContainerArgument</code> parameters in your
                    <code class="code">CreateProcessingJob</code> request. Specifying these parameters configures
                Amazon SageMaker Processing to run the container similar to the way that the following command does. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> docker run --entry-point [AppSpecification.ContainerEntrypoint] [AppSpecification.ImageUri] [AppSpecification.ContainerArguments]</code></pre>
            <p>For example, if you specify the <code class="code">ContainerEntrypoint</code> to be
                    <code class="code">[python3, -v, /processing_script.py]</code> in your
                    <code class="code">CreateProcessingJob </code>request, and <code class="code">ContainerArguments</code> to
                be <code class="code">[data-format, csv]</code>, Amazon SageMaker Processing runs your container with the following
                command. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> python3 -v /processing_script.py data-format csv </code></pre>
            <p> When building your processing container, consider the following details: </p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Amazon SageMaker Processing decides whether the job completes or fails depending on the exit
                        code of the command run. A processing job completes if all of the processing
                        containers exit successfully with an exit code of 0, and fails if any of the
                        containers exits with a non-zero exit code.</p>
                </li><li class="listitem">
                    <p> Amazon SageMaker Processing lets you override the processing container's entrypoint and set
                        command-line arguments just like you can with the Docker API. Docker images
                        can also configure the entrypoint and command-line arguments using the
                            <code class="code">ENTRYPOINT</code> and CMD instructions. The way
                            <code class="code">CreateProcessingJob</code>'s <code class="code">ContainerEntrypoint</code> and
                            <code class="code">ContainerArgument</code> parameters configure a Docker image's
                        entrypoint and arguments mirrors how Docker overrides the entrypoint and
                        arguments through the Docker API:</p>
                    <div class="itemizedlist">
                         
                         
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>If neither <code class="code">ContainerEntrypoint</code> nor
                                    <code class="code">ContainerArguments</code> are provided, Processing uses the
                                default <code class="code">ENTRYPOINT</code> or CMD in the image.</p>
                        </li><li class="listitem">
                            <p>If <code class="code">ContainerEntrypoint</code> is provided, but not
                                    <code class="code">ContainerArguments</code>, Processing runs the image with the
                                given entrypoint, and ignores the <code class="code">ENTRYPOINT</code> and CMD in
                                the image.</p>
                        </li><li class="listitem">
                            <p>If <code class="code">ContainerArguments</code> is provided, but not
                                    <code class="code">ContainerEntrypoint</code>, Processing runs the image with the
                                default <code class="code">ENTRYPOINT</code> in the image and with the provided
                                arguments.</p>
                        </li><li class="listitem">
                            <p>If both <code class="code">ContainerEntrypoint</code> and
                                    <code class="code">ContainerArguments</code> are provided, Processing runs the
                                image with the given entrypoint and arguments, and ignores the
                                    <code class="code">ENTRYPOINT</code> and CMD in the image.</p>
                        </li></ul></div>
                </li><li class="listitem">
                    <p>You must use the exec form of the <code class="code">ENTRYPOINT</code> instruction in
                        your Dockerfile (<code class="code">ENTRYPOINT</code>
                        <code class="code">["executable", "param1", "param2"])</code> instead of the shell form
                            (<code class="code">ENTRYPOINT</code><code class="code"> command param1 param2</code>). This lets
                        your processing container receive <code class="code">SIGINT</code> and
                            <code class="code">SIGKILL</code> signals, which Processing uses to stop processing jobs
                        with the <code class="code">StopProcessingJob</code> API.</p>
                </li><li class="listitem">
                    <p><code class="code">/opt/ml</code> and all its subdirectories are reserved by SageMaker. When
                        building your Processing Docker image, don't place any data required by your
                        processing container in these directories.</p>
                </li><li class="listitem">
                    <p>If you plan to use GPU devices, make sure that your containers are
                        nvidia-docker compatible. Include only the CUDA toolkit in containers. Don't
                        bundle NVIDIA drivers with the image. For more information about
                        nvidia-docker, see <a href="https://github.com/NVIDIA/nvidia-docker" rel="noopener noreferrer" target="_blank"><span>NVIDIA/nvidia-docker</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                </li></ul></div>
         
            <h2 id="byoc-input-and-output">How Amazon SageMaker Processing Configures Input and Output For
                    Your Processing Container</h2>
            <p>When you create a processing job using the <code class="code">CreateProcessingJob</code>
                operation, you can specify multiple <code class="code">ProcessingInput</code> and
                    <code class="code">ProcessingOutput</code>. values. </p>
            <p>You use the <code class="code">ProcessingInput</code> parameter to specify an Amazon Simple Storage Service (Amazon S3)
                URI to download data from, and a path in your processing container to download the
                data to. The <code class="code">ProcessingOutput</code> parameter configures a path in your
                processing container from which to upload data, and where in Amazon S3 to upload that
                data to. For both <code class="code">ProcessingInput</code> and <code class="code">ProcessingOutput</code>,
                the path in the processing container must begin with <code class="code">/opt/ml/processing/
                </code>.</p>
            <p>For example, you might create a processing job with one
                    <code class="code">ProcessingInput</code> parameter that downloads data from
                    <code class="code">s3://your-data-bucket/path/to/input/csv/data</code> into
                    <code class="code">/opt/ml/processing/csv</code> in your processing container, and a
                    <code class="code">ProcessingOutput</code> parameter that uploads data from
                    <code class="code">/opt/ml/processing/processed_csv</code> to
                    <code class="code">s3://your-data-bucket/path/to/output/csv/data</code>. Your processing job
                would read the input data, and write output data to
                    <code class="code">/opt/ml/processing/processed_csv</code>. Then it uploads the data written
                to this path to the specified Amazon S3 output location. </p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Symbolic links (symlinks) can not be used to upload output data to Amazon S3.
                    Symlinks are not followed when uploading output data. </p></div></div>
         
            <h2 id="byoc-logs-and-metrics">How Amazon SageMaker Processing Provides Logs and Metrics for Your
                    Processing Container</h2>
            <p>When your processing container writes to <code>stdout</code> or
                    <code>stderr</code>, Amazon SageMaker Processing saves the output from each processing
                container and puts it in Amazon CloudWatch logs. For information about logging, see <a href="logging-cloudwatch.html">Log Amazon SageMaker Events with Amazon CloudWatch</a>.</p>
            <p>Amazon SageMaker Processing also provides CloudWatch metrics for each instance running your processing
                container. For information about metrics, see <a href="monitoring-cloudwatch.html">Monitor Amazon SageMaker with Amazon CloudWatch</a>. </p>
         
            <h2 id="byoc-config">How Amazon SageMaker Processing Configures Your Processing Container</h2>
            <p>Amazon SageMaker Processing provides configuration information to your processing container through
                environment variables and two JSON
                    files—<code class="code">/opt/ml/config/processingjobconfig.json</code> and
                    <code class="code">/opt/ml/config/resourceconfig.json</code>— at predefined locations
                in the container. </p>
            <p>When a processing job starts, it uses the environment variables that you specified
                with the <code class="code">Environment</code> map in the <code class="code">CreateProcessingJob</code>
                request. The <code class="code">/opt/ml/config/processingjobconfig.json</code> file contains
                information about the hostnames of your processing containers, and is also specified
                in the <code class="code">CreateProcessingJob</code> request. </p>
            <p>The following example shows the format of the
                    <code class="code">/opt/ml/config/processingjobconfig.json</code> file.</p>


            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "ProcessingJobArn": "&lt;processing_job_arn&gt;",
    "ProcessingJobName": "&lt;processing_job_name&gt;",
    "AppSpecification": <span>{</span>
        "ImageUri": "&lt;image_uri&gt;",
        "ContainerEntrypoint": null,
        "ContainerArguments": null
    },
    "Environment": <span>{</span>
        "KEY": "VALUE"
    },
    "ProcessingInputs": [
        <span>{</span>
            "InputName": "input-1",
            "S3Input": <span>{</span>
                "LocalPath": "/opt/ml/processing/input/dataset",
                "S3Uri": "&lt;s3_uri&gt;",
                "S3DataDistributionType": "FullyReplicated",
                "S3DataType": "S3Prefix",
                "S3InputMode": "File",
                "S3CompressionType": "None",
                "S3DownloadMode": "StartOfJob"
            }
        }
    ],
    "ProcessingOutputConfig": <span>{</span>
        "Outputs": [
            <span>{</span>
                "OutputName": "output-1",
                "S3Output": <span>{</span>
                    "LocalPath": "/opt/ml/processing/output/dataset",
                    "S3Uri": "&lt;s3_uri&gt;",
                    "S3UploadMode": "EndOfJob"
                }
            }
        ],
        "KmsKeyId": null
    },
    "ProcessingResources": <span>{</span>
        "ClusterConfig": <span>{</span>
            "InstanceCount": 1,
            "InstanceType": "ml.m5.xlarge",
            "VolumeSizeInGB": 30,
            "VolumeKmsKeyId": null
        }
    },
    "RoleArn": "&lt;IAM role&gt;",
    "StoppingCondition": <span>{</span>
        "MaxRuntimeInSeconds": 86400
    }
}</code></pre>
            <p>The <code class="code">/opt/ml/config/resourceconfig.json</code> file contains information
                about the hostnames of your processing containers. Use the following
                hostnames
                when creating or running distributed processing code.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "current_host": "algo-1",
  "hosts": ["algo-1","algo-2","algo-3"]
}</code></pre>
            <p>Don't use the information about hostnames contained in
                    <code class="code">/etc/hostname</code>
                or <code class="code">/etc/hosts</code> because it might be inaccurate.</p>
            <p>Hostname information might not be immediately available to the processing
                container. We recommend adding a retry policy on hostname resolution operations as
                nodes become available in the cluster.</p>
         
            <h2 id="byoc-metadata">Save and Access Metadata Information About Your
                    Processing Job</h2>
            <p>To save metadata from the processing container after exiting it, containers can
                write UTF-8 encoded text to the <code>/opt/ml/output/message</code> file.
                After the processing job enters any terminal status ("<code class="code">Completed</code>",
                    "<code class="code">Stopped</code>", or "<code class="code">Failed</code>"), the
                "<code class="code">ExitMessage</code>" field in <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DescribeProcessingJob.html"><code class="code">DescribeProcessingJob</code></a> contains the first 1 KB of this
                file. Access that initial part of file with a call to <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DescribeProcessingJob.html"><code class="code">DescribeProcessingJob</code></a>, which returns it through the
                    <code class="code">ExitMessage</code> parameter. For failed processing jobs, you can use this
                field to communicate information about why the processing container failed.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Don't write sensitive data to the <code>/opt/ml/output/message</code>
                    file. </p></div></div>
            <p>If the data in this file isn't UTF-8 encoded, the job fails and returns a
                    <code class="code">ClientError</code>. If multiple containers exit with an
                    <code class="code">ExitMessage,</code> the content of the <code class="code">ExitMessage</code> from each
                processing container is concatenated, then truncated to 1 KB.</p>
         
            <h2 id="byoc-run">Run Your Processing Container Using the SageMaker Python
                    SDK</h2>
            <p>You can use the SageMaker Python SDK to run your own processing image by using the
                    <code class="code">Processor</code> class. The following example shows how to run your own
                processing container with one input from Amazon Simple Storage Service (Amazon S3) and one output to
                Amazon S3.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">from sagemaker.processing import Processor, ProcessingInput, ProcessingOutput

processor = Processor(image_uri='&lt;your_ecr_image_uri&gt;',
                     role=role,
                     instance_count=1,
                     instance_type="ml.m5.xlarge")

processor.run(inputs=[ProcessingInput(
                        source='&lt;s3_uri or local path&gt;',
                        destination='/opt/ml/processing/input_data')],
                    outputs=[ProcessingOutput(
                        source='/opt/ml/processing/processed_data',
                        destination='&lt;s3_uri&gt;')],
                    )</code></pre>
            <p>Instead of building your processing code into your processing image, you can
                provide a <code class="code">ScriptProcessor</code> with your image and the command that you want
                to run, along with the code that you want to run inside that container. For an
                example, see <a href="processing-container-run-scripts.html">Run Scripts with Your Own Processing
                Container</a>.</p>
            <p>You can also use the scikit-learn image that Amazon SageMaker Processing provides through
                    <code class="code">SKLearnProcessor</code> to run scikit-learn scripts. For an example, see
                    <a href="use-scikit-learn-processing-container.html">Data Processing with scikit-learn</a>. </p>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./processing-container-run-scripts.html">Run Scripts with a Processing Container </div><div id="next" class="next-link" accesskey="n" href="./feature-store.html">Create, store, and share features</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/build-your-own-processing-container.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/build-your-own-processing-container.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
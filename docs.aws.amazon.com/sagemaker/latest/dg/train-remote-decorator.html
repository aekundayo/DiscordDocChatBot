<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Run your local code as a SageMaker training job - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="train-remote-decorator" /><meta name="default_state" content="train-remote-decorator" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="train-remote-decorator.html" /><meta name="description" content="Learn how to run your local Python code as an Amazon SageMaker training job by annotating your training code with the @remote decorator." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="train-remote-decorator.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/train-remote-decorator.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/train-remote-decorator.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/train-remote-decorator.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/train-remote-decorator.html" hreflang="de" /><link rel="alternative" href="train-remote-decorator.html" hreflang="en-us" /><link rel="alternative" href="train-remote-decorator.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/train-remote-decorator.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/train-remote-decorator.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/train-remote-decorator.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/train-remote-decorator.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/train-remote-decorator.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/train-remote-decorator.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/train-remote-decorator.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/train-remote-decorator.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/train-remote-decorator.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/train-remote-decorator.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/train-remote-decorator.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/train-remote-decorator.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/train-remote-decorator.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/train-remote-decorator.html" hreflang="zh-tw" /><link rel="alternative" href="train-remote-decorator.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Run your local code as a SageMaker training job" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Run your local code as a SageMaker training job - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#train-remote-decorator" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/train-remote-decorator.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/train-remote-decorator.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/train-remote-decorator.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,decorator" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Train machine learning models",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-model.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Run your local code as a SageMaker training job",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/train-model.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#train-remote-decorator" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="train-remote-decorator.html#train-remote-decorator-env">Set up your environment</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="train-remote-decorator">Run your local code as a SageMaker training job</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can run your local machine learning (ML) Python code as a large single-node Amazon SageMaker
        training job or as multiple parallel jobs. You can do this by annotating your code with an
        @remote decorator, as shown in the following code example. <a href="distributed-training.html">Distributed training</a> (across
        multiple instances) are not supported with remote functions.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">@remote(**settings)
def divide(x, y):
    return x / y</code></pre><p>The SageMaker Python SDK will automatically translate your existing workspace environment and
        any associated data processing code and datasets into a SageMaker training job that runs on the
        SageMaker training platform. You can also activate a persistent cache feature, which will further
        reduce job start latency by caching previously downloaded dependency packages. This
        reduction in job latency is greater than the reduction in latency from using SageMaker managed
        warm pools alone. For more information, see <a href="train-warm-pools.html#train-warm-pools-persistent-cache">Using persistent cache</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Distributed training jobs are not supported by remote functions.</p></div></div><p>The following sections show how to annotate your local ML code with an @remote decorator
        and tailor your experience for your use case. This includes customizing your environment and
        integrating with SageMaker Experiments.</p><div class="highlights"><h6>Topics</h6><ul><li><a href="train-remote-decorator.html#train-remote-decorator-env">Set up your environment</a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-invocation.html">Invoking a function</a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-config.html">Configuration file</a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-customize.html">Customize your runtime
                environment</a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-container.html">Container image compatibility</a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-experiments.html">Logging parameters and metrics with
                Amazon SageMaker Experiments </a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-modular.html">Using modular code with the @remote
                decorator</a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-private.html">Private repository for runtime
                dependencies</a></li><li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-examples.html">Example notebooks</a></li></ul></div>
        <h2 id="train-remote-decorator-env">Set up your environment</h2>
        <p>Choose one of the following three options to set up your environment.</p>
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="Run your code from Amazon SageMaker&#xA;                        Studio" id="train-remote-decorator-env-studio" expanded="false"><p>You can annotate and run your local ML code from SageMaker Studio by creating a
                    SageMaker Notebook and attaching any image available on SageMaker Studio image. The
                    following instructions help you create a SageMaker Notebook, install the SageMaker Python
                    SDK, and annotate your code with the decorator.</p><div class="orderedlist">
                     
                     
                     
                <ol><li>
                        <p>Create a SageMaker Notebook and attach an image in SageMaker Studio as
                            follows:</p>
                        <div class="orderedlist">
                             
                             
                             
                             
                             
                             
                             
                        <ol><li>
                                <p>Follow the instructions in <a href="studio-launch.html">Launch Amazon SageMaker
                                        Studio</a> in the <em>Amazon SageMaker Developer
                                        Guide</em>.</p>
                            </li><li>
                                <p>Select <b>Studio</b> from the left navigation
                                    pane. This opens a new window.</p>
                            </li><li>
                                <p>In the <b>Get Started</b> dialog box, select a
                                    user profile from the down arrow. This opens a new
                                    window.</p>
                            </li><li>
                                <p>Select <b>Open Studio</b>.</p>
                            </li><li>
                                <p>Select <b>Open Launcher</b> from the main
                                    working area. This opens a new page.</p>
                            </li><li>
                                <p>Select <b>Create notebook</b> from the main
                                    working area.</p>
                            </li><li>
                                <p>Select <b>Base Python 3.0</b> from the down
                                    arrow next to <b>Image</b> in the <b>Change
                                        environment</b> dialog box. </p>

                                <p>The @remote decorator automatically detects the image attached
                                    to the SageMaker Studio notebook and uses it to run the SageMaker
                                    training job. If <code class="code">image_uri</code> is specified either as
                                    an argument in the decorator or in the configuration file, then
                                    the value specified in <code class="code">image_uri</code> will be used
                                    instead of the detected image.</p>
                                <p>For more information about how to create a notebook in SageMaker
                                    Studio, see the <b>Create a Notebook from
                                        the File Menu</b> section in <a href="notebooks-create-open.html#notebooks-create-file-menu">Create or Open an Amazon SageMaker Studio
                                    Notebook</a>.</p>
                                <p>For a list of available images, see <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/train-remote-decorator-container.html">Supported Docker images</a>.</p>
                            </li></ol></div>
                    </li><li>
                        <p>Install the SageMaker Python SDK.</p>
                        <p>To annotate your code with the @remote function inside a SageMaker
                            Studio Notebook, you must have the SageMaker Python SDK installed.
                            Install the SageMaker Python SDK, as shown in the following code
                            example.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">!pip install sagemaker</code></pre>
                    </li><li>
                        <p>Use @remote decorator to run functions in a SageMaker training job.</p>
                        <p>To run your local ML code, first create a dependencies file to
                            instruct SageMaker where to locate your local code. To do so, follow these
                            steps:</p>
                        <div class="orderedlist">
                             
                             
                             
                             
                        <ol><li>
                                <p>From the SageMaker Studio Launcher main working area, in
                                        <b>Utilities and files</b>, choose
                                        <b>Text file</b>. This opens a new tab with a
                                    text file called <code class="code">untitled.txt.</code>
                                </p>
                                <p>For more information about the SageMaker Studio user interface
                                    (UI), see <a href="studio-ui.html">Amazon SageMaker Studio UI
                                    Overview</a>.</p>
                            </li><li>
                                <p>Rename <code class="code">untitled.txt </code>to
                                        <code class="code">requirements.txt</code>.</p>
                            </li><li>
                                <p>Add all the dependencies required for the code along with the
                                    SageMaker library to <code class="code">requirements.txt</code>. </p>
                                <p>A minimal code example for <code class="code">requirements.txt</code> for
                                    the example <code class="code">divide</code> function is provided in the
                                    following section, as follows.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">sagemaker</code></pre>
                            </li><li>
                                <p>Run your code with the remote decorator by passing the
                                    dependencies file, as follows.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">from sagemaker.remote_function import remote

@remote(instance_type="ml.m5.xlarge", dependencies='./requirements.txt')
def divide(x, y):
    return x / y

divide(2, 3.0)</code></pre>
                                <p>For additional code examples, see the sample notebook <a href="https://github.com/aws/amazon-sagemaker-examples/blob/main/sagemaker-remote-function/quick_start/quick_start.ipynb" rel="noopener noreferrer" target="_blank"><span>quick_start.ipynb</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                                <p>If you’re already running a SageMaker Studio notebook, and you
                                    install the Python SDK as instructed in <b>2.
                                        Install the SageMaker Python SDK</b>, you must restart
                                    your kernel. For more information, see <a href="notebooks-menu.html">Use the SageMaker
                                        Studio Notebook Toolbar</a> in the
                                        <em>Amazon SageMaker Developer Guide</em>.</p>
                            </li></ol></div>
                    </li></ol></div></awsui-expandable-section><awsui-expandable-section variant="container" header="Run your code from an&#xA;                        Amazon SageMaker notebook" id="train-remote-decorator-env-notebook" expanded="false"><p>You can annotate your local ML code from a SageMaker notebook instance. The
                    following instructions show how to create a notebook instance with a custom
                    kernel, install the SageMaker Python SDK, and annotate your code with the
                    decorator.</p><div class="orderedlist">
                     
                     
                     
                     
                <ol><li>
                        <p>Create a notebook instance with a custom <code class="code">conda</code>
                            kernel.</p>
                        <p>You can annotate your local ML code with an @remote decorator to use
                            inside of a SageMaker training job. First you must create and customize a
                            SageMaker notebook instance to use a kernel with Python version 3.7 or
                            higher, up to 3.10.x. To do so, follow these steps:</p>
                        <div class="orderedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ol><li>
                                <p>Open the SageMaker console at <a href="https://console.aws.amazon.com/sagemaker/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/sagemaker/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                            </li><li>
                                <p>In the left navigation panel, choose
                                        <b>Notebook</b> to expand its options.</p>
                            </li><li>
                                <p>Choose <b>Notebook Instances</b> from the
                                    expanded options.</p>
                            </li><li>
                                <p>Choose the <b>Create Notebook Instance</b>
                                    button. This opens a new page.</p>
                            </li><li>
                                <p>For <b>Notebook instance name</b>, enter a name
                                    with a maximum of 63 characters and no spaces. Valid characters:
                                        <b>A-Z</b>, <b>a-z</b>, <b>0-9</b>, and
                                        <b>.</b><b>:</b><b>+</b><b>=</b><b>@</b><b> _</b><b>%</b><b>-</b>
                                    (hyphen).</p>
                            </li><li>
                                <p>In the <b>Notebook instance settings</b> dialog
                                    box, expand the right arrow next to <b>Additional
                                        Configuration</b>.</p>
                            </li><li>
                                <p>Under <b>Lifecycle configuration - optional</b>,
                                    expand the down arrow and select <b>Create a new
                                        lifecycle configuration</b>. This opens a new dialog
                                    box.</p>
                            </li><li>
                                <p>Under <b>Name</b>, enter a name for your
                                    configuration setting.</p>
                            </li><li>
                                <p>In the <b>Scripts</b> dialog box, in the
                                        <b>Start notebook</b> tab, replace the
                                    existing contents of the text box with the following
                                    script.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">#!/bin/bash

set -e

sudo -u ec2-user -i &lt;&lt;'EOF'
unset SUDO_UID
WORKING_DIR=/home/ec2-user/SageMaker/custom-miniconda/
source "$WORKING_DIR/miniconda/bin/activate"
for env in $WORKING_DIR/miniconda/envs/*; do
    BASENAME=$(basename "$env")
    source activate "$BASENAME"
    python -m ipykernel install --user --name "$BASENAME" --display-name "Custom ($BASENAME)"
done
EOF

echo "Restarting the Jupyter server.."
# restart command is dependent on current running Amazon Linux and JupyterLab
CURR_VERSION_AL=$(cat /etc/system-release)
CURR_VERSION_JS=$(jupyter --version)

if [[ $CURR_VERSION_JS == *$"jupyter_core     : 4.9.1"* ]] &amp;&amp; [[ $CURR_VERSION_AL == *$" release 2018"* ]]; then
 sudo initctl restart jupyter-server --no-wait
else
 sudo systemctl --no-block restart jupyter-server.service
fi</code></pre>
                            </li><li>
                                <p>In the <b>Scripts</b> dialog box, in the
                                        <b>Create notebook</b> tab, replace the
                                    existing contents of the text box with the following
                                    script.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">#!/bin/bash

set -e

sudo -u ec2-user -i &lt;&lt;'EOF'
unset SUDO_UID
# Install a separate conda installation via Miniconda
WORKING_DIR=/home/ec2-user/SageMaker/custom-miniconda
mkdir -p "$WORKING_DIR"
wget https://repo.anaconda.com/miniconda/Miniconda3-4.6.14-Linux-x86_64.sh -O "$WORKING_DIR/miniconda.sh"
bash "$WORKING_DIR/miniconda.sh" -b -u -p "$WORKING_DIR/miniconda" 
rm -rf "$WORKING_DIR/miniconda.sh"
# Create a custom conda environment
source "$WORKING_DIR/miniconda/bin/activate"
KERNEL_NAME="custom_python310"
PYTHON="3.10"
conda create --yes --name "$KERNEL_NAME" python="$PYTHON" pip
conda activate "$KERNEL_NAME"
pip install --quiet ipykernel
# Customize these lines as necessary to install the required packages
EOF</code></pre>
                            </li><li>
                                <p>Choose the <b>Create configuration</b> button on
                                    the bottom right of the window.</p>
                            </li><li>
                                <p>Choose the <b>Create notebook instance</b>
                                    button on the bottom right of the window.</p>
                            </li><li>
                                <p>Wait for the notebook instance <b>Status</b> to
                                    change from <b>Pending</b> to
                                        <b>InService</b>.</p>
                            </li></ol></div>
                    </li><li>
                        <p>Create a Jupyter notebook in the notebook instance.</p>
                        <p>The following instructions show how to create a Jupyter notebook using
                            Python 3.10 in your newly created SageMaker instance.</p>
                        <div class="orderedlist">
                             
                             
                             
                        <ol><li>
                                <p>After the notebook instance <b>Status</b> from
                                    the previous step is <b>InService</b>, do the
                                    following: </p>
                                <div class="orderedlist">
                                     
                                <ol><li>
                                        <p>Select <b>Open Jupyter</b> under
                                                <b>Actions</b> in the row containing
                                            your newly created notebook instance
                                                <b>Name</b>. This opens a new Jupyter
                                            server.</p>
                                    </li></ol></div>
                            </li><li>
                                <p>In the Jupyter server, select <b>New</b> from
                                    the top right menu. </p>
                            </li><li>
                                <p>From the down arrow, select
                                        <b>conda_custom_python310</b>. This creates a
                                    new Jupyter notebook that uses a Python 3.10 kernel. This new
                                    Jupyter notebook can now be used similarly to a local Jupyter
                                    notebook. </p>
                            </li></ol></div>
                    </li><li>
                        <p>Install the SageMaker Python SDK.</p>
                        <p>After your virtual environment is running, install the SageMaker Python SDK
                            by using the following code example.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">!pip install sagemaker</code></pre>
                    </li><li>
                        <p>Use an @remote decorator to run functions in a SageMaker training
                            job.</p>
                        <p>When you annotate your local ML code with an @remote decorator inside
                            the SageMaker notebook, SageMaker training will automatically interpret the
                            function of your code and run it as a SageMaker training job. Set up your
                            notebook by doing the following:</p>
                        <div class="orderedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                        <ol><li>
                                <p>Select the kernel name in the notebook menu from the SageMaker
                                    notebook instance that you created in step 1, <b>Create a SageMaker Notebook instance with a custom
                                        kernel</b>.</p>
                                <p>For more information, see <a href="notebooks-run-and-manage-change-image.html">Change an Image or a Kernel</a>. </p>
                            </li><li>
                                <p>From the down arrow, choose the a custom <code class="code">conda</code>
                                    kernel that uses a version of Python that is 3.7 or higher. </p>
                                <p>As an example, selecting <code class="code">conda_custom_python310</code>
                                    chooses the kernel for Python 3.10.</p>
                            </li><li>
                                <p>Choose <b>Select</b>.</p>
                            </li><li>
                                <p>Wait for the kernel’s status to show as idle, which indicates
                                    that the kernel has started.</p>
                            </li><li>
                                <p>In the Jupyter Server Home, select <b>New</b>
                                    from the top right menu.</p>
                            </li><li>
                                <p>Next to the down arrow, select <b>Text file</b>.
                                    This creates a new text file called
                                    <code class="code">untitled.txt.</code></p>
                            </li><li>
                                <p>Rename <code class="code">untitled.txt</code> to
                                        <code class="code">requirements.txt</code> and add any dependencies
                                    required for the code along with <code class="code">sagemaker</code>.</p>
                            </li><li>
                                <p>Run your code with the remote decorator by passing the
                                    dependencies file as shown below.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">from sagemaker.remote_function import remote

@remote(instance_type="<code class="replaceable">ml.m5.xlarge</code>", dependencies='./requirements.txt')
def divide(x, y):
    return x / y

divide(2, 3.0)</code></pre>
                                <p>See the sample notebook <a href="https://github.com/aws/amazon-sagemaker-examples/blob/main/sagemaker-remote-function/quick_start/quick_start.ipynb" rel="noopener noreferrer" target="_blank"><span>quick_start.ipnyb</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> for additional code
                                    examples.</p>
                            </li></ol></div>
                    </li></ol></div></awsui-expandable-section><awsui-expandable-section variant="container" header="Run your code from within your&#xA;                        local IDE" id="train-remote-decorator-env-ide" expanded="false"><p>You can annotate your local ML code with an @remote decorator inside your
                    preferred local IDE. The following steps show the necessary prerequisites, how
                    to install the Python SDK, and how to annotate your code with the @remote
                    decorator.</p><div class="orderedlist">
                     
                     
                     
                     
                <ol><li>
                        <p>Install prerequisites by setting up the AWS Command Line Interface (AWS CLI) and creating
                            a role, as follows:</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Onboard to a SageMaker domain following the instructions in the
                                        <b>AWS CLI Prerequisites</b> section
                                    of <a href="gs-set-up.html#gs-cli-prereq">Set
                                        Up Amazon SageMaker Prerequisites</a>.</p>
                            </li><li class="listitem">
                                <p>Create an IAM role following the <b>Create execution role</b> section of <a href="sagemaker-roles.html">SageMaker
                                        Roles</a>.</p>
                            </li></ul></div>
                    </li><li>
                        <p>Create a virtual environment by using either PyCharm or
                                <code class="code">conda</code> and using Python version 3.7 or higher, up to
                            3.10.x.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Set up a virtual environment using PyCharm as follows:</p>
                                <div class="orderedlist">
                                     
                                     
                                     
                                     
                                <ol><li>
                                        <p>Select <b>File</b> from the main
                                            menu.</p>
                                    </li><li>
                                        <p>Choose <b>New Project</b>.</p>
                                    </li><li>
                                        <p>Choose <b>Conda</b> from the down arrow
                                            under <b>New environment using</b>.</p>
                                    </li><li>
                                        <p>In the field for <b>Python version</b>
                                            use the down arrow to select a version of Python that is
                                            3.7 or above. You can go up to 3.10.x from the
                                            list.</p>
                                        <div class="mediaobject">
                                             
                                                <img src="../../../images/sagemaker/latest/dg/images/training-pycharm-ide.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                                Python new environment selected as Conda, with&#xA;                                                  the Python version selected at 3.10.&#xA;                                            " style="max-width:100%" />
                                             
                                             
                                        </div>
                                    </li></ol></div>
                            </li><li class="listitem">
                                <p>If you have Anaconda installed, you can set up a virtual
                                    environment using <code class="code">conda</code>, as follows:</p>
                                <div class="itemizedlist">
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>Open an Anaconda prompt terminal interface.</p>
                                    </li><li class="listitem">
                                        <p>Create and activate a new <code class="code">conda</code>
                                            environment using a Python version of 3.7 or higher, up
                                            to 3.10x. The following code example shows how to create
                                            a <code class="code">conda</code> environment using Python version
                                            3.10.</p>
                                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">conda create -n <code class="replaceable">sagemaker_jobs_quick_start</code> python=3.10 pip
conda activate <code class="replaceable">sagemaker_jobs_quick_start</code></code></pre>
                                    </li></ul></div>
                            </li></ul></div>
                    </li><li>
                        <p>Install the SageMaker Python SDK.</p>
                        <p>To package your code from your preferred IDE, you must have a virtual
                            environment set up using Python 3.7 or higher, up to 3.10x. You also
                            need a compatible container image. Install the SageMaker Python SDK using the
                            following code example.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">pip install sagemaker</code></pre>
                    </li><li>
                        <p>Wrap your code inside the @remote decorator. The SageMaker Python SDK will
                            automatically interpret the function of your code and run it as a SageMaker
                            training job. The following code examples show how to import the
                            necessary libraries, set up a SageMaker session, and annotate a function with
                            the @remote decorator.</p>
                        <p>You can run your code by either providing the dependencies needed
                            directly, or by using dependencies from the active <code class="code">conda</code>
                            environment.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>To provide the dependencies directly, do the following:</p>
                                <div class="itemizedlist">
                                     
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>Create a <code class="code">requirements.txt</code> file in the
                                            working directory that the code resides in.</p>
                                    </li><li class="listitem">
                                        <p>Add all of the dependencies required for the code
                                            along with the SageMaker library. The following section
                                            provides a minimal code example for
                                                <code class="code">requirements.txt</code> for the example
                                                <code class="code">divide</code> function.</p>
                                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">sagemaker</code></pre>
                                    </li><li class="listitem">
                                        <p>Run your code with the @remote decorator by passing
                                            the dependencies file. In the following code example,
                                            replace <code class="code">The IAM role name</code> with an
                                            AWS Identity and Access Management (IAM) role ARN that you would like SageMaker to
                                            use to run your job.</p>
                                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">import boto3
import sagemaker
from sagemaker.remote_function import remote

sm_session = sagemaker.Session(boto_session=boto3.session.Session(region_name="<code class="replaceable">us-west-2</code>"))
settings = dict(
    sagemaker_session=sm_session,
    role=<code class="replaceable">&lt;The IAM role name&gt;</code>,
    instance_type="<code class="replaceable">ml.m5.xlarge</code>",
    dependencies='./requirements.txt'
)

@remote(**settings)
def divide(x, y):
    return x / y


if __name__ == "__main__":
    print(divide(2, 3.0))</code></pre>
                                    </li></ul></div>
                            </li><li class="listitem">
                                <p>To use dependencies from the active <code class="code">conda</code>
                                    environment, use the value <code class="code">auto_capture</code> for the
                                        <code class="code">dependencies</code> parameter, as shown in the
                                    following.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">import boto3
import sagemaker
from sagemaker.remote_function import remote

sm_session = sagemaker.Session(boto_session=boto3.session.Session(region_name="<code class="replaceable">us-west-2</code>"))
settings = dict(
    sagemaker_session=sm_session,
    role=<code class="replaceable">&lt;The IAM role name&gt;</code>,
    instance_type="<code class="replaceable">ml.m5.xlarge</code>",
    dependencies="auto_capture"
)

@remote(**settings)
def divide(x, y):
    return x / y


if __name__ == "__main__":
    print(divide(2, 3.0))</code></pre>
                                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can also implement the previous code inside a Jupyter
                                        notebook. PyCharm Professional Edition supports Jupyter
                                        natively. For more guidance, see <a href="https://www.jetbrains.com/help/pycharm/jupyter-notebook-support.html" rel="noopener noreferrer" target="_blank"><span>Jupyter notebook support</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in PyCharm's
                                        documentation.</p></div></div>
                            </li></ul></div>
                    </li></ol></div></awsui-expandable-section></div>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./sagemaker-rl-tuning.html">Hyperparameter Tuning with Amazon SageMaker RL</div><div id="next" class="next-link" accesskey="n" href="./train-remote-decorator-invocation.html">Invoking a function</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/train-remote-decorator.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/train-remote-decorator.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configure Amazon SageMaker Canvas in a VPC without internet access - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="canvas-vpc" /><meta name="default_state" content="canvas-vpc" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="canvas-vpc.html" /><meta name="description" content="Run Amazon SageMaker Canvas in an Amazon Virtual Private Cloud." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="canvas-vpc.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/canvas-vpc.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/canvas-vpc.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/canvas-vpc.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/canvas-vpc.html" hreflang="de" /><link rel="alternative" href="canvas-vpc.html" hreflang="en-us" /><link rel="alternative" href="canvas-vpc.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/canvas-vpc.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/canvas-vpc.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/canvas-vpc.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/canvas-vpc.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/canvas-vpc.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/canvas-vpc.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/canvas-vpc.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/canvas-vpc.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/canvas-vpc.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/canvas-vpc.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/canvas-vpc.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/canvas-vpc.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/canvas-vpc.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/canvas-vpc.html" hreflang="zh-tw" /><link rel="alternative" href="canvas-vpc.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Configure Amazon SageMaker Canvas in a VPC without internet access" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Configure Amazon SageMaker Canvas in a VPC without internet access - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#canvas-vpc" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-vpc.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-vpc.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-vpc.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,VPC,Canvas,internet free" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Use machine learning environments offered by SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/machine-learning-environments.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon SageMaker Canvas",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/canvas.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Setting Up and Managing Amazon SageMaker Canvas (for IT Administrators)",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/canvas-setting-up.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Configure Amazon SageMaker Canvas in a VPC without internet access",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/canvas-setting-up.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#canvas-vpc" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="canvas-vpc.html#canvas-vpc-configure">Configure Amazon SageMaker Canvas in a VPC without internet access</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="canvas-vpc">Configure Amazon SageMaker Canvas in a VPC without internet access</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The Amazon SageMaker Canvas application runs in a container in an AWS managed Amazon Virtual Private Cloud (VPC). If you
        want to further control access to your resources or run SageMaker Canvas without public internet
        access, you can configure your Amazon SageMaker Domain and VPC settings. Within your own VPC, you can
        configure settings such as security groups (virtual firewalls that control inbound and
        outbound traffic from Amazon EC2 instances) and subnets (ranges of IP addresses in your VPC). To
        learn more about VPCs, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/how-it-works.html">How Amazon VPC works</a>.</p><p>When the SageMaker Canvas application is running in the AWS managed VPC, it can interact with other
        AWS services using either an internet connection or through VPC endpoints created in a
        customer-managed VPC (without public internet access). SageMaker Canvas applications can access these
        VPC endpoints through a Studio-created network interface that provides connectivity to
        the customer-managed VPC. The default behavior of the SageMaker Canvas application is to have internet
        access. When using an internet connection, the containers for the preceding jobs access
        AWS resources over the internet, such as the Amazon S3 buckets where you store training data
        and model artifacts.</p><p>However, if you have security requirements to control access to your data and job containers,
        we recommend that you configure SageMaker Canvas and your VPC so that your data and containers aren’t
        accessible over the internet. SageMaker uses the VPC configuration settings you specify when setting
        up your Domain for SageMaker Canvas.</p><p>If you want to configure your SageMaker Canvas application without internet access, you must
        configure your VPC settings when you onboard to <a href="gs-studio-onboard.html">Amazon SageMaker Domain</a>, set up VPC endpoints, and grant the necessary AWS Identity and Access Management
        permissions. For information about configuring a VPC in Amazon SageMaker, see <a href="onboard-vpc.html">Choose an Amazon VPC</a>. The following sections describe how
        to run SageMaker Canvas in a VPC without public internet access.</p>
        <h2 id="canvas-vpc-configure">Configure Amazon SageMaker Canvas in a VPC without internet access</h2>
        <p>You can send traffic from SageMaker Canvas to other AWS services through your own VPC. If your
            own VPC doesn't have public internet access and you've set up your Domain in
                <b>VPC only</b> mode, then SageMaker Canvas won't have public internet access as
            well. This includes all requests, such as accessing datasets in Amazon S3 or training jobs
            for standard builds, and the requests go through VPC endpoints in your VPC instead of
            the public internet. When you onboard to Domain and <a href="onboard-vpc.html">Choose an Amazon VPC</a>, you can specify your own VPC as the default VPC for
            the Domain, along with your desired security group and subnet settings. Then, SageMaker
            creates a network interface in your VPC that SageMaker Canvas uses to access VPC endpoints in your
            VPC. Note that the security group and subnet settings are set after you finish
            onboarding to Domain.</p>
        <p>When onboarding to Domain, if you choose <b>Public internet only</b>
            as the network access type, the VPC is SageMaker managed and allows internet access.</p>
        <p>You can change this behavior by choosing <b>VPC only</b> so that SageMaker
            sends all traffic to a network interface that SageMaker creates in your specified VPC. When
            you choose this option, you must provide the subnets, security groups, and VPC endpoints
            that are necessary to communicate with the SageMaker API and SageMaker Runtime, and various AWS
            services, such as Amazon S3 and Amazon CloudWatch, that are used by SageMaker Canvas. Note that you can only
            import data from Amazon S3 buckets located in the same Region as your VPC.</p>
        <p>The following procedures show how you can configure these settings to use SageMaker Canvas
            without the internet.</p>
        
         
            <h3 id="canvas-vpc-configure-onboard">Step 1: Onboard to Amazon SageMaker Domain</h3>
            <p>To send SageMaker Canvas traffic to a network interface in your own VPC instead of over the
                internet, specify the VPC you want to use when onboarding to <a href="gs-studio-onboard.html">Amazon SageMaker Domain</a>. You must also specify at
                least two subnets in your VPC that SageMaker can use. Choose <b>Standard
                    setup</b> and do the following procedure when configuring the
                    <b>Network and Storage Section</b> for the Domain.</p>
            <div class="procedure"><ol><li><p>Select your desired <b>VPC</b>.</p></li><li><p>Choose two or more <b>Subnets</b>. If you don’t specify the subnets, SageMaker uses
                        all of the subnets in the VPC.</p></li><li><p>Choose one or more <b>Security group(s)</b>.</p></li><li><p>Choose <b>VPC Only</b> to turn off direct internet access in the AWS managed
                        VPC where SageMaker Canvas is hosted.</p></li></ol></div>
            <p>After disabling internet access, finish the onboarding process to set up your Domain. For more
                information about the VPC settings for Amazon SageMaker Domain, see <a href="onboard-vpc.html">Choose an Amazon VPC</a>.</p>
         
        
         
            <h3 id="canvas-vpc-configure-endpoints">Step 2: Configure VPC endpoints and access</h3>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In order to configure Canvas in your own VPC, you must enable private DNS hostnames for your VPC endpoints.
                For more information, see <a href="interface-vpc-endpoint.html">Connect to SageMaker Through a VPC Interface Endpoint</a>.</p></div></div>
            <p>SageMaker Canvas only accesses other AWS services to manage and store data for its
                functionality. For example, it connects to Amazon Redshift if your users access an Amazon Redshift
                database. It can connect to an AWS service such as Amazon Redshift using an internet
                connection or a VPC endpoint. Use VPC endpoints if you want to set up connections
                from your VPC to AWS services that don't use the public internet.</p>
            <p>A VPC endpoint creates a private connection to an AWS service that uses a
                networking path that is isolated from the public internet. For example, if you set
                up access to Amazon S3 using a VPC endpoint from your own VPC, then the SageMaker Canvas application
                can access Amazon S3 by going through the network interface in your VPC and then through
                the VPC endpoint that connects to Amazon S3. The communication between SageMaker Canvas
                and Amazon S3 is private.</p>
            <p>For more information about configuring VPC endpoints for your VPC, see
                <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/what-is-privatelink.html">AWS PrivateLink</a>.</p>
            <p>The following are the VPC endpoints for each service you can use with SageMaker Canvas:</p>
            <div class="table-container"><div class="table-contents"><table id="w714aac13c17c35c52c11c13c13"><thead>
                        <tr>
                            <th>Service</th>
                            <th>Endpoint</th>
                            <th>Endpoint type</th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Athena</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.athena</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon SageMaker</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.sagemaker.api</p>
                                <p>com.amazonaws.<code class="replaceable">Region</code>.sagemaker.runtime</p>
                                <p>com.amazonaws.<code class="replaceable">Region</code>.notebook</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>AWS Security Token Service</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.sts</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Elastic Container Registry (Amazon ECR)</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.ecr.api</p>
                                <p>com.amazonaws.<code class="replaceable">Region</code>.ecr.dkr</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Elastic Compute Cloud (Amazon EC2)</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.ec2</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Simple Storage Service (Amazon S3)</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.s3</p>
                            </td>
                            <td tabindex="-1"><p>Gateway</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Redshift</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.redshift-data</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>AWS Secrets Manager</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.secretsmanager</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>AWS Systems Manager</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.ssm</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon CloudWatch</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.monitoring</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon CloudWatch Logs</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.logs</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Forecast</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.forecast</p>
                                <p>com.amazonaws.<code class="replaceable">Region</code>.forecastquery</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Textract</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.textract</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Comprehend</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.comprehend</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Rekognition</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.rekognition</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>AWS Glue</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.glue</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>AWS Application Auto Scaling</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.application-autoscaling</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p>Amazon Relational Database Service (Amazon RDS)</p>
                            </td>
                            <td tabindex="-1">
                                <p>com.amazonaws.<code class="replaceable">Region</code>.rds</p>
                            </td>
                            <td tabindex="-1"><p>Interface</p></td>
                        </tr>
                    </table></div></div>
            <p>You must also add the following endpoint policy for Amazon S3 to control AWS
                principal access to your VPC endpoint. For information about how to update your VPC
                endpoint policy, see <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html">Control access to VPC
                    endpoints using endpoint policies</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObject",
                "s3:CreateBucket",
                "s3:GetBucketCors",
                "s3:GetBucketLocation"
            ],
            "Resource": [
                "arn:aws:s3:::*SageMaker*",
                "arn:aws:s3:::*Sagemaker*",
                "arn:aws:s3:::*sagemaker*"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket",
                "s3:ListAllMyBuckets"
            ],
            "Resource": "*"
        }</code></pre>
         
        
         
            <h3 id="canvas-vpc-configure-permissions">Step 3: Grant IAM permissions</h3>
            <p>The SageMaker Canvas user must have the necessary AWS Identity and Access Management permissions to allow connection
                to the VPC endpoints. The IAM role to which you give permissions must be the same
                one you used when onboarding to Amazon SageMaker Domain. You can attach the SageMaker managed
                    <code class="code">AmazonSageMakerFullAccess</code> policy to the IAM role for the user to
                give the user the required permissions. If you require more restrictive IAM
                permissions and use custom policies instead, then give the user’s role the
                    <code class="code">ec2:DescribeVpcEndpointServices</code> permission. SageMaker Canvas requires these
                permissions to verify the existence of the required VPC endpoints for standard build
                jobs. If it detects these VPC endpoints, then standard build jobs run by default in
                your VPC. Otherwise, they will run in the default AWS managed VPC.</p>
            <p>For instructions on how to attach the <code class="code">AmazonSageMakerFullAccess</code> IAM
                policy to your user’s IAM role, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage-attach-detach.html">Adding and
                    removing IAM identity permissions</a>.</p>
            <p>To grant your user’s IAM role the granular <code class="code">ec2:DescribeVpcEndpointServices</code> permission, use the following procedure.</p>
            <div class="procedure"><ol><li><p>Sign in to the AWS Management Console and open the <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>IAM console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li><p>In the navigation pane, choose <b>Roles</b>.</p></li><li><p>In the list, choose the name of the role to which you want to grant permissions.</p></li><li><p>Choose the <b>Permissions</b> tab.</p></li><li><p>Choose <b>Add permissions</b> and then choose <b>Create inline policy</b>.</p></li><li>
                    <p>Choose the <b>JSON</b> tab and enter the following policy, which grants the
                        <code class="code">ec2:DescribeVpcEndpointServices</code> permission:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": "ec2:DescribeVpcEndpointServices",
            "Resource": "*"
        }
    ]
}</code></pre>
                </li><li><p>Choose <b>Review policy</b>, and then enter a
                    <b>Name</b> for the policy (for example, <code class="code">VPCEndpointPermissions</code>).</p></li><li><p>Choose <b>Create policy</b>.</p></li></ol></div>
            <p>The user’s IAM role should now have permissions to access the VPC endpoints configured in your VPC.</p>
         
        
         
            <h3 id="canvas-vpc-configure-override">(Optional) Step 4: Override security group settings
                    for specific users</h3>
            <p>If you are an administrator, you might want different users to have different VPC settings, or
                user-specific VPC settings. When you override the default VPC’s security group settings for a specific user,
                these settings are passed on to the SageMaker Canvas application for that user.</p>
            <p>You can override the security groups that a specific user has access to in your VPC when you set
                up a new user profile in Studio. You can use the <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_CreateUserProfile.html">CreateUserProfile</a>
                SageMaker API call (or <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sagemaker.html#SageMaker.Client.create_user_profile" rel="noopener noreferrer" target="_blank"><span>create_user_profile</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                with the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html">AWS CLI</a>),
                and then in the <code class="code">UserSettings</code>, you can specify the <code class="code">SecurityGroups</code> for the user.</p>
         
        
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./canvas-manage-apps.html">Manage apps</div><div id="next" class="next-link" accesskey="n" href="./canvas-setting-up-oauth.html">Set up connections to data sources with OAuth</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-vpc.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/canvas-vpc.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Connect to an Amazon EMR cluster from SageMaker Studio - Amazon SageMaker</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="connect-emr-clusters" /><meta name="default_state" content="connect-emr-clusters" /><link rel="icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="../../../assets/images/favicon.ico" /><link rel="canonical" href="connect-emr-clusters.html" /><meta name="description" content="Learn how to connect to an Amazon EMR cluster from Studio ." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon SageMaker" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Use Internet Monitor to build, train, and host machine learning models in AWS." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="connect-emr-clusters.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="de" /><link rel="alternative" href="connect-emr-clusters.html" hreflang="en-us" /><link rel="alternative" href="connect-emr-clusters.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sagemaker/latest/dg/connect-emr-clusters.html" hreflang="zh-tw" /><link rel="alternative" href="connect-emr-clusters.html" hreflang="x-default" /><meta name="feedback-item" content="SageMaker" /><meta name="this_doc_product" content="Amazon SageMaker" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="../../../assets/r/vendor4.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor3.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/vendor1.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-common.js@version=2021.12.02"></script><script defer="" src="../../../assets/r/awsdocs-doc-page.js@version=2021.12.02"></script><link href="../../../assets/r/vendor4.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-common.css@version=2021.12.02.css" rel="stylesheet" /><link href="../../../assets/r/awsdocs-doc-page.css@version=2021.12.02.css" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sagemaker'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Connect to an Amazon EMR cluster from SageMaker Studio" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Connect to an Amazon EMR cluster from SageMaker Studio - Amazon SageMaker</title><meta name="pdf" content="/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#connect-emr-clusters" /><meta name="rss" content="amazon-sagemaker-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=285" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/connect-emr-clusters.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/connect-emr-clusters.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sagemaker/latest/dg/connect-emr-clusters.html" /><meta name="keywords" content="SageMaker,Amazon SageMaker,machine learning,notebook instance,SageMaker Amazon EMR,SageMaker AWS Glue,SageMaker Spark,SageMaker Hive,SageMaker Presto" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon SageMaker",
        "item" : "https://docs.aws.amazon.com/sagemaker/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Prepare data",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/data-prep.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Scale data preparation using Apache Spark, Hive, or Presto on Amazon EMR or AWS Glue from Amazon SageMaker Studio notebooks",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-notebooks-emr-spark-glue.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Prepare data using Amazon EMR",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-notebooks-emr-cluster.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Use Amazon EMR clusters from Studio notebooks",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-notebooks-emr-cluster-connect.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Connect to an Amazon EMR cluster from SageMaker Studio",
        "item" : "https://docs.aws.amazon.com/sagemaker/latest/dg/studio-notebooks-emr-cluster-connect.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://docs.aws.amazon.com/pdfs/sagemaker/latest/dg/sagemaker-dg.pdf#connect-emr-clusters" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/sagemaker/index.html">Amazon SageMaker</a><a href="whatis.html">Developer Guide</a></div><div id="page-toc-src"><a href="connect-emr-clusters.html#connect-emr-clusters-ui-options">Generate the connection command automatically</a><a href="connect-emr-clusters.html#connect-emr-clusters-manually">Enter the connection command manually</a><a href="connect-emr-clusters.html#connect-emr-clusters-ssl">Connect over HTTPS</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="connect-emr-clusters">Connect to an Amazon EMR cluster from SageMaker
                    Studio</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>This section explains how you can connect to an Amazon EMR cluster from a Studio
                notebook when you use any of the supported kernels.</p>
                <h2 id="connect-emr-clusters-ui-options">Connect to an Amazon EMR cluster
                        automatically</h2>
                <p>To connect to your cluster using the Studio UI, you can either initiate a
                    connection from the list of clusters accessed in <a href="discover-emr-clusters.html">Discover Amazon EMR clusters from SageMaker
                    Studio</a>, or
                    from a notebook in SageMaker Studio.</p>
                <div class="procedure"><h6>To connect to a particular cluster from your list of clusters</h6><ol><li>
                        <p>Choose the name of the cluster in your list. This activates the
                                <b>Attach to new notebook</b> button.</p>
                    </li><li>
                        <p>Choose <b>Attach to new notebook</b>. This opens up the
                            images and kernels selection box.</p>
                    </li><li>

                        <p>Select your image and kernel, then choose <b>Select</b>.
                            For a list of supported images, see <a href="studio-notebooks-emr-cluster-connect.html#studio-notebooks-emr-cluster-connect-kernels">Supported images and
                    kernels to connect to an Amazon EMR cluster from SageMaker Studio</a> or
                            refer to <a href="studio-notebooks-emr-cluster-connect.html#studio-notebooks-emr-byoi">Bring your own image</a>.</p>
                    </li><li>
                        <p>If the cluster you select does not use Kerberos, LDAP, or runtime role
                            authentication, Studio prompts you to select the credential type.
                            Choose from <b>Http basic authentication</b> or
                                <b>No credentials</b>, then enter your credentials, if
                            applicable. A connection command populates the first cell of your
                            notebook and initiates the connection with the Amazon EMR cluster.</p>
                        <p>Once the connection succeeds, a message confirms the connection and
                            the start of the Spark application.</p>
                    </li></ol></div>
                <div class="procedure"><h6>Alternatively, you can connect to a cluster from a notebook.</h6><ol><li>
                        <p>Choose <b>Cluster</b> at the top of your notebook. </p>
                        <p><b>Cluster</b> is only visible when you use a kernel
                            from <a href="studio-notebooks-emr-cluster-connect.html#studio-notebooks-emr-cluster-connect-kernels">Supported images and
                    kernels to connect to an Amazon EMR cluster from SageMaker Studio</a> or
                            from <a href="studio-notebooks-emr-cluster-connect.html#studio-notebooks-emr-byoi">Bring your own image</a>. If you cannot see
                                <b>Cluster</b> at the top of your notebook, ensure
                            that your administrator has <a href="studio-notebooks-configure-discoverability-emr-cluster.html">configured the discoverability of your clusters</a> and switch
                            to a supported kernel.</p>
                        <div class="mediaobject">
                             
                                <img src="../../../images/sagemaker/latest/dg/images/studio/emr/studio-notebooks-emr-cluster-connection.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Find the cluster icon to connect to an Amazon EMR cluster from a&#xA;                                    SageMaker Studio notebook&#xA;                            " style="max-width:85%" />
                             
                             
                        </div>
                        <p>This opens up a list of available clusters.</p>
                    </li><li>
                        <p>Select the cluster to which you want to connect, then choose
                                <b>Connect</b>.</p>

                    </li><li>
                        <p>If you configured your Amazon EMR clusters to support runtime IAM roles
                            and your administrator preloaded your roles in an execution role
                            configuration JSON, you can select your Amazon EMR access role from the
                                <b>Amazon EMR execution role</b> drop down menu. If your
                            roles are not preloaded, Studio uses your Studio execution role
                            by default. For information about using runtime roles with Amazon EMR, see
                                <a href="studio-notebooks-emr-cluster-rbac.html">Connect to an Amazon EMR cluster from Studio
      using runtime IAM roles</a>. When you
                            connect to a cluster, Studio adds a code block to an active cell to
                            establish the connection.</p>

                        <p>Otherwise, if the cluster you choose does not use Kerberos, LDAP, or
                            runtime role authentication, Studio prompts you to select the
                            credential type. You can choose <b>HTTP basic
                                authentication</b> or <b>No
                            credential</b>.</p>
                    </li><li>
                        <p>An active cell populates and runs. This cell contains the connection
                            command to connect to your Amazon EMR cluster.</p>
                        <p>Once the connection succeeds, a message confirm the connection and the
                            start of the Spark application.</p>
                    </li></ol></div>
             
                <h2 id="connect-emr-clusters-manually">Enter the connection command to
                        an Amazon EMR cluster manually</h2>
                <p>You can manually connect to your Amazon EMR cluster from a Studio notebook
                    whether or not your Studio application and cluster reside in the same AWS
                    account.</p>
                <p>For each of the following authentication types, use the specified command to
                    manually connect to your cluster from your Studio notebook.</p>
                <div class="itemizedlist">
                     

                     

                     

                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><b>Kerberos</b></p>
                        <p>Append the <code class="code">--assumable-role-arn</code> argument if you need
                            cross-account Amazon EMR access. Append the <code class="code">--verify-certificate</code>
                            argument if you connect to your cluster with HTTPS.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">%load_ext sagemaker_studio_analytics_extension.magics
%sm_analytics emr connect --cluster-id <code class="replaceable">cluster_id</code> \
--auth-type Kerberos --language python 
[--assumable-role-arn <code class="replaceable">EMR_access_role_ARN</code> ] 
[--verify-certificate <code class="replaceable">/home/user/certificateKey.pem</code>]</code></pre>
                    </li><li class="listitem">
                        <p><b>LDAP</b></p>
                        <p>Append the <code class="code">--assumable-role-arn</code> argument if you need
                            cross-account Amazon EMR access. Append the <code class="code">--verify-certificate</code>
                            argument if you connect to your cluster with HTTPS.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">%load_ext sagemaker_studio_analytics_extension.magics
%sm_analytics emr connect --cluster-id <code class="replaceable">cluster_id</code> \
--auth-type Basic_Access --language python 
[--assumable-role-arn <code class="replaceable">EMR_access_role_ARN</code> ]
[--verify-certificate <code class="replaceable">/home/user/certificateKey.pem</code>]</code></pre>
                    </li><li class="listitem">
                        <p><b>NoAuth</b></p>
                        <p>Append the <code class="code">--assumable-role-arn</code> argument if you need
                            cross-account Amazon EMR access. Append the <code class="code">--verify-certificate</code>
                            argument if you connect to your cluster with HTTPS.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">%load_ext sagemaker_studio_analytics_extension.magics
%sm_analytics emr connect --cluster-id <code class="replaceable">cluster_id</code> \
--auth-type None --language python
[--assumable-role-arn <code class="replaceable">EMR_access_role_ARN</code> ]
[--verify-certificate <code class="replaceable">/home/user/certificateKey.pem</code>]</code></pre>
                    </li><li class="listitem">
                        <p><b>Runtime IAM roles</b></p>
                        <p>Append the <code class="code">--assumable-role-arn</code> argument if you need
                            cross-account Amazon EMR access. Append the <code class="code">--verify-certificate</code>
                            argument if you connect to your cluster with HTTPS. </p>
                        <p>For more information on connecting to an Amazon EMR cluster using runtime
                            IAM roles, see <a href="studio-notebooks-emr-cluster-rbac.html">Connect to an Amazon EMR cluster from Studio
      using runtime IAM roles</a>.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">%load_ext sagemaker_studio_analytics_extension.magics
%sm_analytics emr connect --cluster-id <code class="replaceable">cluster_id</code> \
--auth-type Basic_Access \
--emr-execution-role-arn arn:aws:iam::<code class="replaceable">studio_account_id</code>:role/<code class="replaceable">emr-execution-role-name</code>
[--assumable-role-arn <code class="replaceable">EMR_access_role_ARN</code>]
[--verify-certificate <code class="replaceable">/home/user/certificateKey.pem</code>]</code></pre>
                    </li></ul></div>
             
                <h2 id="connect-emr-clusters-ssl">Connect to an Amazon EMR cluster over
                        HTTPS</h2>
                <p>If you have configured your Amazon EMR cluster with transit encryption enabled and
                    Apache Livy server for HTTPS and would like Studio to communicate with Amazon EMR
                    using HTTPS, you need to configure Studio to access your certificate
                    key.</p>
                <p>For self-signed or local Certificate Authority (CA) signed certificates, you
                    can do this in two steps:</p>
                <div class="orderedlist">
                     
                     
                <ol><li>
                        <p>Download the PEM file of your certificate to your local file system
                            using one of the following options:</p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Jupyter's built-in file upload function.</p>
                            </li><li class="listitem">
                                <p>A notebook cell.</p>
                            </li><li class="listitem">
                                <p>A lifecycle configuration (LCC) script.</p>
                                <p>For information on how to use an LCC script, see <a href="notebook-lifecycle-config.html">Customize a Notebook Instance Using a Lifecycle
                                        Configuration Script</a></p>
                            </li></ul></div>
                    </li><li>
                        <p>Enable the validation of the certificate by providing the path to your
                            certificate in the <code class="code">--verify-certificate</code> argument of your
                            connection command.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">%sm_analytics emr connect --cluster-id <code class="replaceable">cluster_id</code> \
    --verify-certificate <code class="replaceable">/home/user/certificateKey.pem</code> ... </code></pre>
                    </li></ol></div>

                <p>For public CA issued certificates, set the certificate validation by setting
                    the <code class="code">--verify-certificate</code> parameter as <code class="code">true</code>.</p>
                <p>Alternatively, you can disable the certificate validation by setting the
                        <code class="code">--verify-certificate</code> parameter as <code class="code">false</code>.</p>
                <p>You can find the list of available connection commands to an Amazon EMR cluster in
                        <a href="connect-emr-clusters.html#connect-emr-clusters-manually">Enter the connection command to
                        an Amazon EMR cluster manually</a>.</p>

            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./discover-emr-clusters.html">Discover Amazon EMR clusters</div><div id="next" class="next-link" accesskey="n" href="./studio-notebooks-emr-cluster-rbac.html">Connect to a cluster using runtime IAM roles</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/connect-emr-clusters.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SageMaker&amp;topic_url=https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/connect-emr-clusters.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>